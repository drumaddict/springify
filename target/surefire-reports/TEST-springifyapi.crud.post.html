<!DOCTYPE html>
<html>
<head>
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>springifyapi/crud/post.feature</title>
<style>body { font-family: monospace, monospace; font-size: small; } table { border-collapse: collapse; } table td { border: 1px solid gray; padding: 0.1em 0.2em; } .scenario-heading { background-color: #F5F28F; padding: 0.2em 0.5em; border-bottom: 1px solid gray; } .scenario-name { font-weight: bold; } .scenario { border: 1px solid gray; margin-bottom: 1em; } .scenario-steps { padding-left: 0.2em; } .scenario-steps-nested { padding-left: 2em; } .step-row { margin: 0.2em 0; } .step-cell { background-color: #92DD96; display: inline-block; width: 85%; padding: 0.2em 0.5em; } .time-cell { background-color: #92DD96; display: inline-block; width: 10%; padding: 0.2em 0.5em; } .failed { background-color: #F2928C; } .skipped { background-color: #8AF; }</style>
</head>
<body>
<div>
<div class="scenario">
<div class="scenario-heading">
<span class="scenario-keyword">Scenario: </span><span class="scenario-name">create genre</span>
</div>
<div class="scenario-steps">
<div class="step-row">
<div class="step-cell">* url baseUrl</div>
<div class="time-cell">3.612758</div>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">* call classpath:springifyapi/common/setHeaders.feature</div>
<div class="time-cell">0</div>
</div>
<pre>{
  "config": {
    "user": "admin",
    "baseUrl": "http:\/\/127.0.0.1:35129\/api\/"
  }
}
</pre>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">* print 'Config passed: ', karate.pretty(config)</div>
<div class="time-cell">0</div>
</div>
<pre>02:45:35.086 INFO  - [print] Config passed:  {
  "user": "admin",
  "baseUrl": "http:\/\/127.0.0.1:35129\/api\/"
}

</pre>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">* def creds = read('classpath:springifyapi/data/'+ config.user + '.json')</div>
<div class="time-cell">0</div>
</div>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">* url baseUrl</div>
<div class="time-cell">0</div>
</div>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">Given url baseUrl</div>
<div class="time-cell">0</div>
</div>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">And path 'login'</div>
<div class="time-cell">0</div>
</div>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">And request creds</div>
<div class="time-cell">0</div>
</div>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">When method post</div>
<div class="time-cell">0</div>
</div>
<pre>02:45:35.153 INFO  - request:
{
  "password": "11111111",
  "username": "admin"
}

02:45:35.636 DEBUG - 
1 &gt; POST http://127.0.0.1:35129/api/login
1 &gt; Accept-Encoding: gzip,deflate
1 &gt; Connection: Keep-Alive
1 &gt; Content-Length: 42
1 &gt; Content-Type: application/json
1 &gt; Host: 127.0.0.1:35129
1 &gt; User-Agent: Apache-HttpClient/4.5.3 (Java/1.8.0_151)
{"password":"11111111","username":"admin"}

02:45:37.002 DEBUG - 
1 &lt; 200
1 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
1 &lt; Content-Type: application/hal+json;charset=UTF-8
1 &lt; Date: Sun, 14 Jan 2018 00:45:36 GMT
1 &lt; Expires: 0
1 &lt; Pragma: no-cache
1 &lt; Token: eyJhbGciOiJIUzUxMiJ9.eyJhdWQiOiJTcHJpbmdpZnkgVXNlcnMiLCJqdGkiOiJhZG1pbkBzcHJpbmdpZnkuY29tIiwic3ViIjoiYWRtaW4iLCJleHAiOjE1MTY1ODkxMzYsImlzcyI6ImNvbS5zcnBpbmdpZnkua2FiYXNha2FsaXMifQ.AsgJfI2rU2VN6REP7C4ZCXNVhz6ZYCdoS3spKRh-Vi72vD-MTUbVfqxbu9Z5tKY_pWWaVSn2pduSIcbtszLo0w
1 &lt; Transfer-Encoding: chunked
1 &lt; X-Application-Context: application:0
1 &lt; X-Content-Type-Options: nosniff
1 &lt; X-Frame-Options: DENY
1 &lt; X-XSS-Protection: 1; mode=block
{
  "username" : "admin",
  "email" : "admin@springify.com",
  "password" : "$2a$10$UClj/ChiXzRXcT6HvSdOpePZFzTIJs9CYDagygovYbM0TDzMRe7Di",
  "jwtToken" : "eyJhbGciOiJIUzUxMiJ9.eyJhdWQiOiJTcHJpbmdpZnkgVXNlcnMiLCJqdGkiOiJhZG1pbkBzcHJpbmdpZnkuY29tIiwic3ViIjoiYWRtaW4iLCJleHAiOjE1MTY1ODkxMzYsImlzcyI6ImNvbS5zcnBpbmdpZnkua2FiYXNha2FsaXMifQ.AsgJfI2rU2VN6REP7C4ZCXNVhz6ZYCdoS3spKRh-Vi72vD-MTUbVfqxbu9Z5tKY_pWWaVSn2pduSIcbtszLo0w",
  "updated_date" : "Sat, 13 Jan 2018 23:47:57 +0200",
  "created_date" : "Sat, 13 Jan 2018 23:47:57 +0200"
}

02:45:37.004 DEBUG - response time in milliseconds: 1837
02:45:37.005 INFO  - response:
{
  "username": "admin",
  "email": "admin@springify.com",
  "password": "$2a$10$UClj\/ChiXzRXcT6HvSdOpePZFzTIJs9CYDagygovYbM0TDzMRe7Di",
  "jwtToken": "eyJhbGciOiJIUzUxMiJ9.eyJhdWQiOiJTcHJpbmdpZnkgVXNlcnMiLCJqdGkiOiJhZG1pbkBzcHJpbmdpZnkuY29tIiwic3ViIjoiYWRtaW4iLCJleHAiOjE1MTY1ODkxMzYsImlzcyI6ImNvbS5zcnBpbmdpZnkua2FiYXNha2FsaXMifQ.AsgJfI2rU2VN6REP7C4ZCXNVhz6ZYCdoS3spKRh-Vi72vD-MTUbVfqxbu9Z5tKY_pWWaVSn2pduSIcbtszLo0w",
  "updated_date": "Sat, 13 Jan 2018 23:47:57 +0200",
  "created_date": "Sat, 13 Jan 2018 23:47:57 +0200"
}

</pre>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">Then status 200</div>
<div class="time-cell">0</div>
</div>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">* def jwtToken = response.jwtToken</div>
<div class="time-cell">0</div>
</div>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">* print 'jwtToken OK: ', karate.pretty(jwtToken)</div>
<div class="time-cell">0</div>
</div>
<pre>02:45:37.036 INFO  - [print] jwtToken OK:  eyJhbGciOiJIUzUxMiJ9.eyJhdWQiOiJTcHJpbmdpZnkgVXNlcnMiLCJqdGkiOiJhZG1pbkBzcHJpbmdpZnkuY29tIiwic3ViIjoiYWRtaW4iLCJleHAiOjE1MTY1ODkxMzYsImlzcyI6ImNvbS5zcnBpbmdpZnkua2FiYXNha2FsaXMifQ.AsgJfI2rU2VN6REP7C4ZCXNVhz6ZYCdoS3spKRh-Vi72vD-MTUbVfqxbu9Z5tKY_pWWaVSn2pduSIcbtszLo0w
</pre>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">* def defaultHeaders =  call read('classpath:springifyapi/common/HeadersFun.js')  { jwtToken:  '#(jwtToken)' }</div>
<div class="time-cell">0</div>
</div>
<pre>02:45:37.102 INFO  - AUTH {jwtToken=eyJhbGciOiJIUzUxMiJ9.eyJhdWQiOiJTcHJpbmdpZnkgVXNlcnMiLCJqdGkiOiJhZG1pbkBzcHJpbmdpZnkuY29tIiwic3ViIjoiYWRtaW4iLCJleHAiOjE1MTY1ODkxMzYsImlzcyI6ImNvbS5zcnBpbmdpZnkua2FiYXNha2FsaXMifQ.AsgJfI2rU2VN6REP7C4ZCXNVhz6ZYCdoS3spKRh-Vi72vD-MTUbVfqxbu9Z5tKY_pWWaVSn2pduSIcbtszLo0w} 
</pre>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">* configure headers = defaultHeaders</div>
<div class="time-cell">0</div>
</div>
</div>
<div class="step-row">
<div class="step-cell">Given path 'genres'</div>
<div class="time-cell">0.009787</div>
</div>
<div class="step-row">
<div class="step-cell">And request { name: 'EDM' }</div>
<div class="time-cell">0.000194</div>
</div>
<div class="step-row">
<div class="step-cell">When method post</div>
<div class="time-cell">0.299833</div>
</div>
<pre>02:45:37.132 INFO  - request:
{
  "name": "EDM"
}

02:45:37.134 DEBUG - 
1 &gt; POST http://127.0.0.1:35129/api/genres
1 &gt; Accept-Encoding: gzip,deflate
1 &gt; Authorization: Bearer eyJhbGciOiJIUzUxMiJ9.eyJhdWQiOiJTcHJpbmdpZnkgVXNlcnMiLCJqdGkiOiJhZG1pbkBzcHJpbmdpZnkuY29tIiwic3ViIjoiYWRtaW4iLCJleHAiOjE1MTY1ODkxMzYsImlzcyI6ImNvbS5zcnBpbmdpZnkua2FiYXNha2FsaXMifQ.AsgJfI2rU2VN6REP7C4ZCXNVhz6ZYCdoS3spKRh-Vi72vD-MTUbVfqxbu9Z5tKY_pWWaVSn2pduSIcbtszLo0w
1 &gt; Connection: Keep-Alive
1 &gt; Content-Length: 14
1 &gt; Content-Type: application/json
1 &gt; Host: 127.0.0.1:35129
1 &gt; User-Agent: Apache-HttpClient/4.5.3 (Java/1.8.0_151)
{"name":"EDM"}

02:45:37.430 DEBUG - 
1 &lt; 201
1 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
1 &lt; Content-Type: application/hal+json;charset=UTF-8
1 &lt; Date: Sun, 14 Jan 2018 00:45:36 GMT
1 &lt; Expires: 0
1 &lt; Location: http://127.0.0.1:35129/api/genres/115
1 &lt; Pragma: no-cache
1 &lt; Set-Cookie: JSESSIONID=F335D7EC6BD2983D1EA5686F8E3EE4D1; Path=/api; HttpOnly
1 &lt; Transfer-Encoding: chunked
1 &lt; X-Application-Context: application:0
1 &lt; X-Content-Type-Options: nosniff
1 &lt; X-Frame-Options: DENY
1 &lt; X-XSS-Protection: 1; mode=block
{
  "name" : "EDM",
  "updated_date" : "Sun, 14 Jan 2018 02:45:37 +0200",
  "created_date" : "Sun, 14 Jan 2018 02:45:37 +0200"
}

02:45:37.431 DEBUG - response time in milliseconds: 298
02:45:37.431 INFO  - response:
{
  "name": "EDM",
  "updated_date": "Sun, 14 Jan 2018 02:45:37 +0200",
  "created_date": "Sun, 14 Jan 2018 02:45:37 +0200"
}

</pre>
<div class="step-row">
<div class="step-cell">Then status 201</div>
<div class="time-cell">0.00014</div>
</div>
<div class="step-row">
<div class="step-cell">And match response contains { name: 'EDM' }</div>
<div class="time-cell">0.00205</div>
</div>
<div class="step-row">
<div class="step-cell">* print 'RESPHEAD: ', karate.pretty(responseHeaders['Location'][0])</div>
<div class="time-cell">0.053881</div>
</div>
<pre>02:45:37.489 INFO  - [print] RESPHEAD:  http://127.0.0.1:35129/api/genres/115
</pre>
<div class="step-row">
<div class="step-cell">* def createdUrl = responseHeaders['Location'][0]</div>
<div class="time-cell">0.013018</div>
</div>
<div class="step-row">
<div class="step-cell">* karate.set('createdUrl', createdUrl);</div>
<div class="time-cell">-</div>
</div>
<div class="step-row">
<div class="step-cell skipped">* print 'createdUrl', karate.pretty(createdUrl)</div>
<div class="time-cell skipped">-</div>
</div>
</div>
</div>
<div class="scenario">
<div class="scenario-heading">
<span class="scenario-keyword">Scenario: </span><span class="scenario-name">delete genre</span>
</div>
<div class="scenario-steps">
<div class="step-row">
<div class="step-cell">* url baseUrl</div>
<div class="time-cell">0.482822</div>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">* call classpath:springifyapi/common/setHeaders.feature</div>
<div class="time-cell">0</div>
</div>
<pre>{
  "config": {
    "user": "admin",
    "baseUrl": "http:\/\/127.0.0.1:35129\/api\/"
  }
}
</pre>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">* print 'Config passed: ', karate.pretty(config)</div>
<div class="time-cell">0</div>
</div>
<pre>02:45:37.687 INFO  - [print] Config passed:  {
  "user": "admin",
  "baseUrl": "http:\/\/127.0.0.1:35129\/api\/"
}

</pre>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">* def creds = read('classpath:springifyapi/data/'+ config.user + '.json')</div>
<div class="time-cell">0</div>
</div>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">* url baseUrl</div>
<div class="time-cell">0</div>
</div>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">Given url baseUrl</div>
<div class="time-cell">0</div>
</div>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">And path 'login'</div>
<div class="time-cell">0</div>
</div>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">And request creds</div>
<div class="time-cell">0</div>
</div>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">When method post</div>
<div class="time-cell">0</div>
</div>
<pre>02:45:37.718 INFO  - request:
{
  "password": "11111111",
  "username": "admin"
}

02:45:37.720 DEBUG - 
1 &gt; POST http://127.0.0.1:35129/api/login
1 &gt; Accept-Encoding: gzip,deflate
1 &gt; Connection: Keep-Alive
1 &gt; Content-Length: 42
1 &gt; Content-Type: application/json
1 &gt; Host: 127.0.0.1:35129
1 &gt; User-Agent: Apache-HttpClient/4.5.3 (Java/1.8.0_151)
{"password":"11111111","username":"admin"}

02:45:37.928 DEBUG - 
1 &lt; 200
1 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
1 &lt; Content-Type: application/hal+json;charset=UTF-8
1 &lt; Date: Sun, 14 Jan 2018 00:45:36 GMT
1 &lt; Expires: 0
1 &lt; Pragma: no-cache
1 &lt; Token: eyJhbGciOiJIUzUxMiJ9.eyJhdWQiOiJTcHJpbmdpZnkgVXNlcnMiLCJqdGkiOiJhZG1pbkBzcHJpbmdpZnkuY29tIiwic3ViIjoiYWRtaW4iLCJleHAiOjE1MTY1ODkxMzcsImlzcyI6ImNvbS5zcnBpbmdpZnkua2FiYXNha2FsaXMifQ.OBAQWiwFhYOl_MQz0GFTMq8ZkSPOhHO-EJFYoKeGLxyvXgMxHKucArg-twLDYngM7WH1ALyjNDYQnPBdIu9fuQ
1 &lt; Transfer-Encoding: chunked
1 &lt; X-Application-Context: application:0
1 &lt; X-Content-Type-Options: nosniff
1 &lt; X-Frame-Options: DENY
1 &lt; X-XSS-Protection: 1; mode=block
{
  "username" : "admin",
  "email" : "admin@springify.com",
  "password" : "$2a$10$UClj/ChiXzRXcT6HvSdOpePZFzTIJs9CYDagygovYbM0TDzMRe7Di",
  "jwtToken" : "eyJhbGciOiJIUzUxMiJ9.eyJhdWQiOiJTcHJpbmdpZnkgVXNlcnMiLCJqdGkiOiJhZG1pbkBzcHJpbmdpZnkuY29tIiwic3ViIjoiYWRtaW4iLCJleHAiOjE1MTY1ODkxMzcsImlzcyI6ImNvbS5zcnBpbmdpZnkua2FiYXNha2FsaXMifQ.OBAQWiwFhYOl_MQz0GFTMq8ZkSPOhHO-EJFYoKeGLxyvXgMxHKucArg-twLDYngM7WH1ALyjNDYQnPBdIu9fuQ",
  "updated_date" : "Sat, 13 Jan 2018 23:47:57 +0200",
  "created_date" : "Sat, 13 Jan 2018 23:47:57 +0200"
}

02:45:37.928 DEBUG - response time in milliseconds: 210
02:45:37.929 INFO  - response:
{
  "username": "admin",
  "email": "admin@springify.com",
  "password": "$2a$10$UClj\/ChiXzRXcT6HvSdOpePZFzTIJs9CYDagygovYbM0TDzMRe7Di",
  "jwtToken": "eyJhbGciOiJIUzUxMiJ9.eyJhdWQiOiJTcHJpbmdpZnkgVXNlcnMiLCJqdGkiOiJhZG1pbkBzcHJpbmdpZnkuY29tIiwic3ViIjoiYWRtaW4iLCJleHAiOjE1MTY1ODkxMzcsImlzcyI6ImNvbS5zcnBpbmdpZnkua2FiYXNha2FsaXMifQ.OBAQWiwFhYOl_MQz0GFTMq8ZkSPOhHO-EJFYoKeGLxyvXgMxHKucArg-twLDYngM7WH1ALyjNDYQnPBdIu9fuQ",
  "updated_date": "Sat, 13 Jan 2018 23:47:57 +0200",
  "created_date": "Sat, 13 Jan 2018 23:47:57 +0200"
}

</pre>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">Then status 200</div>
<div class="time-cell">0</div>
</div>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">* def jwtToken = response.jwtToken</div>
<div class="time-cell">0</div>
</div>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">* print 'jwtToken OK: ', karate.pretty(jwtToken)</div>
<div class="time-cell">0</div>
</div>
<pre>02:45:37.951 INFO  - [print] jwtToken OK:  eyJhbGciOiJIUzUxMiJ9.eyJhdWQiOiJTcHJpbmdpZnkgVXNlcnMiLCJqdGkiOiJhZG1pbkBzcHJpbmdpZnkuY29tIiwic3ViIjoiYWRtaW4iLCJleHAiOjE1MTY1ODkxMzcsImlzcyI6ImNvbS5zcnBpbmdpZnkua2FiYXNha2FsaXMifQ.OBAQWiwFhYOl_MQz0GFTMq8ZkSPOhHO-EJFYoKeGLxyvXgMxHKucArg-twLDYngM7WH1ALyjNDYQnPBdIu9fuQ
</pre>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">* def defaultHeaders =  call read('classpath:springifyapi/common/HeadersFun.js')  { jwtToken:  '#(jwtToken)' }</div>
<div class="time-cell">0</div>
</div>
<pre>02:45:38.011 INFO  - AUTH {jwtToken=eyJhbGciOiJIUzUxMiJ9.eyJhdWQiOiJTcHJpbmdpZnkgVXNlcnMiLCJqdGkiOiJhZG1pbkBzcHJpbmdpZnkuY29tIiwic3ViIjoiYWRtaW4iLCJleHAiOjE1MTY1ODkxMzcsImlzcyI6ImNvbS5zcnBpbmdpZnkua2FiYXNha2FsaXMifQ.OBAQWiwFhYOl_MQz0GFTMq8ZkSPOhHO-EJFYoKeGLxyvXgMxHKucArg-twLDYngM7WH1ALyjNDYQnPBdIu9fuQ} 
</pre>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">* configure headers = defaultHeaders</div>
<div class="time-cell">0</div>
</div>
</div>
<div class="step-row">
<div class="step-cell failed">* call read('classpath:springifyapi/crud/delete.feature')  { deleted:  '#(createdUrl)' }</div>
<div class="time-cell failed">0.152577</div>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">* call classpath:springifyapi/crud/delete.feature</div>
<div class="time-cell">0</div>
</div>
<pre>{
  "deleted": "#(createdUrl)"
}
</pre>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">* url baseUrl</div>
<div class="time-cell">0</div>
</div>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">* def id = 7</div>
<div class="time-cell">0</div>
</div>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">* print 'deleted: ', karate.pretty(deleted)</div>
<div class="time-cell">0</div>
</div>
<pre>02:45:38.114 INFO  - [print] deleted:  #(createdUrl)
</pre>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">* print 'createdUrl', karate.pretty(createdUrl)</div>
<div class="time-cell">0</div>
</div>
<pre>02:45:38.147 INFO  - [print] createdUrl
</pre>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell failed">Given url createdUrl</div>
<div class="time-cell failed">0</div>
</div>
</div>
</div>
</div>
</div>
</body>
</html>

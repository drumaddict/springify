<!DOCTYPE html>
<html>
<head>
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>springifyapi/playlist/associations.feature</title>
<style>body { font-family: monospace, monospace; font-size: small; } table { border-collapse: collapse; } table td { border: 1px solid gray; padding: 0.1em 0.2em; } .scenario-heading { background-color: #F5F28F; padding: 0.2em 0.5em; border-bottom: 1px solid gray; } .scenario-name { font-weight: bold; } .scenario { border: 1px solid gray; margin-bottom: 1em; } .scenario-steps { padding-left: 0.2em; } .scenario-steps-nested { padding-left: 2em; } .step-row { margin: 0.2em 0; } .step-cell { background-color: #92DD96; display: inline-block; width: 85%; padding: 0.2em 0.5em; } .time-cell { background-color: #92DD96; display: inline-block; width: 10%; padding: 0.2em 0.5em; } .failed { background-color: #F2928C; } .skipped { background-color: #8AF; }</style>
</head>
<body>
<div>
<div class="scenario">
<div class="scenario-heading">
<span class="scenario-keyword">Scenario: </span><span class="scenario-name">Verify newly created album</span>
</div>
<div class="scenario-steps">
<div class="step-row">
<div class="step-cell">* def postData = {}</div>
<div class="time-cell">3.737819</div>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">* call classpath:springifyapi/common/setHeaders.feature</div>
<div class="time-cell">0</div>
</div>
<pre>{
  "config": {
    "user": "admin",
    "baseUrl": "http:\/\/127.0.0.1:36661\/api\/"
  }
}
</pre>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">* print 'Config passed: ', karate.pretty(config)</div>
<div class="time-cell">0</div>
</div>
<pre>18:13:04.074 INFO  - [print] Config passed:  {
  "user": "admin",
  "baseUrl": "http:\/\/127.0.0.1:36661\/api\/"
}

</pre>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">* def creds = read('classpath:springifyapi/data/'+ config.user + '.json')</div>
<div class="time-cell">0</div>
</div>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">* url baseUrl</div>
<div class="time-cell">0</div>
</div>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">Given url baseUrl</div>
<div class="time-cell">0</div>
</div>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">And path 'login'</div>
<div class="time-cell">0</div>
</div>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">And request creds</div>
<div class="time-cell">0</div>
</div>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">When method post</div>
<div class="time-cell">0</div>
</div>
<pre>18:13:04.142 INFO  - request:
{
  "password": "11111111",
  "username": "admin"
}

18:13:04.737 DEBUG - 
1 &gt; POST http://127.0.0.1:36661/api/login
1 &gt; Accept-Encoding: gzip,deflate
1 &gt; Connection: Keep-Alive
1 &gt; Content-Length: 42
1 &gt; Content-Type: application/json
1 &gt; Host: 127.0.0.1:36661
1 &gt; User-Agent: Apache-HttpClient/4.5.3 (Java/1.8.0_151)
{"password":"11111111","username":"admin"}

18:13:06.270 DEBUG - 
1 &lt; 200
1 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
1 &lt; Content-Type: application/hal+json;charset=UTF-8
1 &lt; Date: Mon, 15 Jan 2018 16:13:06 GMT
1 &lt; Expires: 0
1 &lt; Pragma: no-cache
1 &lt; Token: eyJhbGciOiJIUzUxMiJ9.eyJhdWQiOiJTcHJpbmdpZnkgVXNlcnMiLCJqdGkiOiJhZG1pbkBzcHJpbmdpZnkuY29tIiwic3ViIjoiYWRtaW4iLCJleHAiOjE1MTY3MzExODUsImlzcyI6ImNvbS5zcnBpbmdpZnkua2FiYXNha2FsaXMifQ.hNOdWZKeKTVGALs5DxuZTFK8558i32MYX5vKNnbx7GTAkz3ewYUcqip2tlsAxJORytQcLdq7sJ6d5ir2kwd2Lg
1 &lt; Transfer-Encoding: chunked
1 &lt; X-Application-Context: application:0
1 &lt; X-Content-Type-Options: nosniff
1 &lt; X-Frame-Options: DENY
1 &lt; X-XSS-Protection: 1; mode=block
{
  "username" : "admin",
  "email" : "admin@springify.com",
  "password" : "$2a$10$UClj/ChiXzRXcT6HvSdOpePZFzTIJs9CYDagygovYbM0TDzMRe7Di",
  "jwtToken" : "eyJhbGciOiJIUzUxMiJ9.eyJhdWQiOiJTcHJpbmdpZnkgVXNlcnMiLCJqdGkiOiJhZG1pbkBzcHJpbmdpZnkuY29tIiwic3ViIjoiYWRtaW4iLCJleHAiOjE1MTY3MzExODUsImlzcyI6ImNvbS5zcnBpbmdpZnkua2FiYXNha2FsaXMifQ.hNOdWZKeKTVGALs5DxuZTFK8558i32MYX5vKNnbx7GTAkz3ewYUcqip2tlsAxJORytQcLdq7sJ6d5ir2kwd2Lg",
  "updated_date" : "Mon, 15 Jan 2018 15:20:18 +0200",
  "created_date" : "Mon, 15 Jan 2018 15:20:18 +0200"
}

18:13:06.273 DEBUG - response time in milliseconds: 2115
18:13:06.274 INFO  - response:
{
  "username": "admin",
  "email": "admin@springify.com",
  "password": "$2a$10$UClj\/ChiXzRXcT6HvSdOpePZFzTIJs9CYDagygovYbM0TDzMRe7Di",
  "jwtToken": "eyJhbGciOiJIUzUxMiJ9.eyJhdWQiOiJTcHJpbmdpZnkgVXNlcnMiLCJqdGkiOiJhZG1pbkBzcHJpbmdpZnkuY29tIiwic3ViIjoiYWRtaW4iLCJleHAiOjE1MTY3MzExODUsImlzcyI6ImNvbS5zcnBpbmdpZnkua2FiYXNha2FsaXMifQ.hNOdWZKeKTVGALs5DxuZTFK8558i32MYX5vKNnbx7GTAkz3ewYUcqip2tlsAxJORytQcLdq7sJ6d5ir2kwd2Lg",
  "updated_date": "Mon, 15 Jan 2018 15:20:18 +0200",
  "created_date": "Mon, 15 Jan 2018 15:20:18 +0200"
}

</pre>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">Then status 200</div>
<div class="time-cell">0</div>
</div>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">* def jwtToken = response.jwtToken</div>
<div class="time-cell">0</div>
</div>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">* print 'jwtToken OK: ', karate.pretty(jwtToken)</div>
<div class="time-cell">0</div>
</div>
<pre>18:13:06.309 INFO  - [print] jwtToken OK:  eyJhbGciOiJIUzUxMiJ9.eyJhdWQiOiJTcHJpbmdpZnkgVXNlcnMiLCJqdGkiOiJhZG1pbkBzcHJpbmdpZnkuY29tIiwic3ViIjoiYWRtaW4iLCJleHAiOjE1MTY3MzExODUsImlzcyI6ImNvbS5zcnBpbmdpZnkua2FiYXNha2FsaXMifQ.hNOdWZKeKTVGALs5DxuZTFK8558i32MYX5vKNnbx7GTAkz3ewYUcqip2tlsAxJORytQcLdq7sJ6d5ir2kwd2Lg
</pre>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">* def defaultHeaders =  callonce read('classpath:springifyapi/common/HeadersFun.js')  { jwtToken:  '#(jwtToken)' }</div>
<div class="time-cell">0</div>
</div>
<pre>18:13:06.370 INFO  - AUTH {jwtToken=eyJhbGciOiJIUzUxMiJ9.eyJhdWQiOiJTcHJpbmdpZnkgVXNlcnMiLCJqdGkiOiJhZG1pbkBzcHJpbmdpZnkuY29tIiwic3ViIjoiYWRtaW4iLCJleHAiOjE1MTY3MzExODUsImlzcyI6ImNvbS5zcnBpbmdpZnkua2FiYXNha2FsaXMifQ.hNOdWZKeKTVGALs5DxuZTFK8558i32MYX5vKNnbx7GTAkz3ewYUcqip2tlsAxJORytQcLdq7sJ6d5ir2kwd2Lg} 
18:13:06.382 DEBUG - cached callonce: read('classpath:springifyapi/common/HeadersFun.js')
</pre>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">* configure headers = defaultHeaders</div>
<div class="time-cell">0</div>
</div>
</div>
<div class="step-row">
<div class="step-cell">* def album_payload = {title: 'Revival', year: '2017'}</div>
<div class="time-cell">0.000239</div>
</div>
<div class="step-row">
<div class="step-cell">* set postData.path = 'albums'</div>
<div class="time-cell">0.011576</div>
</div>
<div class="step-row">
<div class="step-cell">* set postData.payload =  album_payload</div>
<div class="time-cell">0.000365</div>
</div>
<div class="step-row">
<div class="step-cell">* def post = callonce read('classpath:springifyapi/common/genericPost.feature') { postData: '#(postData)' }</div>
<div class="time-cell">0.535816</div>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">* call classpath:springifyapi/common/genericPost.feature</div>
<div class="time-cell">0</div>
</div>
<pre>{
  "postData": {
    "path": "albums",
    "payload": {
      "title": "Revival",
      "year": "2017"
    }
  }
}
</pre>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">* print 'Starting generic post with postData', karate.pretty(postData)</div>
<div class="time-cell">0</div>
</div>
<pre>18:13:06.482 INFO  - [print] Starting generic post with postData {
  "path": "albums",
  "payload": {
    "title": "Revival",
    "year": "2017"
  }
}

</pre>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">* url baseUrl</div>
<div class="time-cell">0</div>
</div>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">* def genericPostResult = {}</div>
<div class="time-cell">0</div>
</div>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">Given path postData.path</div>
<div class="time-cell">0</div>
</div>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">And request postData.payload</div>
<div class="time-cell">0</div>
</div>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">When method post</div>
<div class="time-cell">0</div>
</div>
<pre>18:13:06.485 INFO  - request:
{
  "title": "Revival",
  "year": "2017"
}

18:13:06.486 DEBUG - 
1 &gt; POST http://127.0.0.1:36661/api/albums
1 &gt; Accept-Encoding: gzip,deflate
1 &gt; Authorization: Bearer eyJhbGciOiJIUzUxMiJ9.eyJhdWQiOiJTcHJpbmdpZnkgVXNlcnMiLCJqdGkiOiJhZG1pbkBzcHJpbmdpZnkuY29tIiwic3ViIjoiYWRtaW4iLCJleHAiOjE1MTY3MzExODUsImlzcyI6ImNvbS5zcnBpbmdpZnkua2FiYXNha2FsaXMifQ.hNOdWZKeKTVGALs5DxuZTFK8558i32MYX5vKNnbx7GTAkz3ewYUcqip2tlsAxJORytQcLdq7sJ6d5ir2kwd2Lg
1 &gt; Connection: Keep-Alive
1 &gt; Content-Length: 33
1 &gt; Content-Type: application/json
1 &gt; Host: 127.0.0.1:36661
1 &gt; User-Agent: Apache-HttpClient/4.5.3 (Java/1.8.0_151)
{"title":"Revival","year":"2017"}

18:13:06.878 DEBUG - 
1 &lt; 201
1 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
1 &lt; Content-Type: application/hal+json;charset=UTF-8
1 &lt; Date: Mon, 15 Jan 2018 16:13:06 GMT
1 &lt; Expires: 0
1 &lt; Location: http://127.0.0.1:36661/api/albums/10007
1 &lt; Pragma: no-cache
1 &lt; Set-Cookie: JSESSIONID=5E452F9CDF422B3C96786D23A9EBCD5C; Path=/api; HttpOnly
1 &lt; Transfer-Encoding: chunked
1 &lt; X-Application-Context: application:0
1 &lt; X-Content-Type-Options: nosniff
1 &lt; X-Frame-Options: DENY
1 &lt; X-XSS-Protection: 1; mode=block
{
  "id" : 10007,
  "title" : "Revival",
  "year" : "2017",
  "created_date" : "Mon, 15 Jan 2018 18:13:06 +0200",
  "updated_date" : "Mon, 15 Jan 2018 18:13:06 +0200",
  "_links" : {
    "self" : {
      "href" : "http://127.0.0.1:36661/api/albums/10007"
    },
    "albums" : {
      "href" : "http://127.0.0.1:36661/api/albums"
    },
    "playlists" : {
      "href" : "http://127.0.0.1:36661/api/albums/10007/playlists"
    },
    "artist" : {
      "href" : "http://127.0.0.1:36661/api/albums/10007/artist"
    }
  }
}

18:13:06.879 DEBUG - response time in milliseconds: 394
18:13:06.881 INFO  - response:
{
  "id": 10007,
  "title": "Revival",
  "year": "2017",
  "created_date": "Mon, 15 Jan 2018 18:13:06 +0200",
  "updated_date": "Mon, 15 Jan 2018 18:13:06 +0200",
  "_links": {
    "self": {
      "href": "http:\/\/127.0.0.1:36661\/api\/albums\/10007"
    },
    "albums": {
      "href": "http:\/\/127.0.0.1:36661\/api\/albums"
    },
    "playlists": {
      "href": "http:\/\/127.0.0.1:36661\/api\/albums\/10007\/playlists"
    },
    "artist": {
      "href": "http:\/\/127.0.0.1:36661\/api\/albums\/10007\/artist"
    }
  }
}

</pre>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">Then status 201</div>
<div class="time-cell">0</div>
</div>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">And set genericPostResult.location = responseHeaders['Location'][0]</div>
<div class="time-cell">0</div>
</div>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">And set genericPostResult.response = response</div>
<div class="time-cell">0</div>
</div>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">* print 'Setting GenericPostResult', karate.pretty(genericPostResult)</div>
<div class="time-cell">0</div>
</div>
<pre>18:13:06.942 INFO  - [print] Setting GenericPostResult {
  "location": "http:\/\/127.0.0.1:36661\/api\/albums\/10007",
  "response": {
    "id": 10007,
    "title": "Revival",
    "year": "2017",
    "created_date": "Mon, 15 Jan 2018 18:13:06 +0200",
    "updated_date": "Mon, 15 Jan 2018 18:13:06 +0200",
    "_links": {
      "self": {
        "href": "http:\/\/127.0.0.1:36661\/api\/albums\/10007"
      },
      "albums": {
        "href": "http:\/\/127.0.0.1:36661\/api\/albums"
      },
      "playlists": {
        "href": "http:\/\/127.0.0.1:36661\/api\/albums\/10007\/playlists"
      },
      "artist": {
        "href": "http:\/\/127.0.0.1:36661\/api\/albums\/10007\/artist"
      }
    }
  }
}

</pre>
</div>
<div class="step-row">
<div class="step-cell">* def postResponse = post.genericPostResult.response</div>
<div class="time-cell">0.000377</div>
</div>
<div class="step-row">
<div class="step-cell">* def location = post.genericPostResult.location</div>
<div class="time-cell">0.000223</div>
</div>
<div class="step-row">
<div class="step-cell">* print 'postResult', karate.pretty(postResponse)</div>
<div class="time-cell">0.021827</div>
</div>
<pre>18:13:06.965 INFO  - [print] postResult {
  "id": 10007,
  "title": "Revival",
  "year": "2017",
  "created_date": "Mon, 15 Jan 2018 18:13:06 +0200",
  "updated_date": "Mon, 15 Jan 2018 18:13:06 +0200",
  "_links": {
    "self": {
      "href": "http:\/\/127.0.0.1:36661\/api\/albums\/10007"
    },
    "albums": {
      "href": "http:\/\/127.0.0.1:36661\/api\/albums"
    },
    "playlists": {
      "href": "http:\/\/127.0.0.1:36661\/api\/albums\/10007\/playlists"
    },
    "artist": {
      "href": "http:\/\/127.0.0.1:36661\/api\/albums\/10007\/artist"
    }
  }
}

</pre>
<div class="step-row">
<div class="step-cell">Given url location</div>
<div class="time-cell">0.000127</div>
</div>
<div class="step-row">
<div class="step-cell">When method get</div>
<div class="time-cell">0.077622</div>
</div>
<pre>18:13:06.969 DEBUG - 
1 &gt; GET http://127.0.0.1:36661/api/albums/10007
1 &gt; Accept-Encoding: gzip,deflate
1 &gt; Authorization: Bearer eyJhbGciOiJIUzUxMiJ9.eyJhdWQiOiJTcHJpbmdpZnkgVXNlcnMiLCJqdGkiOiJhZG1pbkBzcHJpbmdpZnkuY29tIiwic3ViIjoiYWRtaW4iLCJleHAiOjE1MTY3MzExODUsImlzcyI6ImNvbS5zcnBpbmdpZnkua2FiYXNha2FsaXMifQ.hNOdWZKeKTVGALs5DxuZTFK8558i32MYX5vKNnbx7GTAkz3ewYUcqip2tlsAxJORytQcLdq7sJ6d5ir2kwd2Lg
1 &gt; Connection: Keep-Alive
1 &gt; Content-Type: application/json
1 &gt; Host: 127.0.0.1:36661
1 &gt; User-Agent: Apache-HttpClient/4.5.3 (Java/1.8.0_151)

18:13:07.043 DEBUG - 
1 &lt; 200
1 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
1 &lt; Content-Type: application/hal+json;charset=UTF-8
1 &lt; Date: Mon, 15 Jan 2018 16:13:06 GMT
1 &lt; Expires: 0
1 &lt; Pragma: no-cache
1 &lt; Set-Cookie: JSESSIONID=C8EE462FE27CA6D7EC7003B97A3F8CC6; Path=/api; HttpOnly
1 &lt; Transfer-Encoding: chunked
1 &lt; X-Application-Context: application:0
1 &lt; X-Content-Type-Options: nosniff
1 &lt; X-Frame-Options: DENY
1 &lt; X-XSS-Protection: 1; mode=block
{
  "id" : 10007,
  "title" : "Revival",
  "year" : "2017",
  "created_date" : "Mon, 15 Jan 2018 18:13:06 +0200",
  "updated_date" : "Mon, 15 Jan 2018 18:13:06 +0200",
  "_links" : {
    "self" : {
      "href" : "http://127.0.0.1:36661/api/albums/10007"
    },
    "albums" : {
      "href" : "http://127.0.0.1:36661/api/albums"
    },
    "playlists" : {
      "href" : "http://127.0.0.1:36661/api/albums/10007/playlists"
    },
    "artist" : {
      "href" : "http://127.0.0.1:36661/api/albums/10007/artist"
    }
  }
}

18:13:07.044 DEBUG - response time in milliseconds: 77
18:13:07.044 INFO  - response:
{
  "id": 10007,
  "title": "Revival",
  "year": "2017",
  "created_date": "Mon, 15 Jan 2018 18:13:06 +0200",
  "updated_date": "Mon, 15 Jan 2018 18:13:06 +0200",
  "_links": {
    "self": {
      "href": "http:\/\/127.0.0.1:36661\/api\/albums\/10007"
    },
    "albums": {
      "href": "http:\/\/127.0.0.1:36661\/api\/albums"
    },
    "playlists": {
      "href": "http:\/\/127.0.0.1:36661\/api\/albums\/10007\/playlists"
    },
    "artist": {
      "href": "http:\/\/127.0.0.1:36661\/api\/albums\/10007\/artist"
    }
  }
}

</pre>
<div class="step-row">
<div class="step-cell">Then status 200</div>
<div class="time-cell">0.000151</div>
</div>
<div class="step-row">
<div class="step-cell">And match response contains { title: 'Revival' }</div>
<div class="time-cell">0.001867</div>
</div>
</div>
</div>
<div class="scenario">
<div class="scenario-heading">
<span class="scenario-keyword">Scenario: </span><span class="scenario-name">Associate the newly created album with playlist 'Rap Essentials'</span>
</div>
<div class="scenario-steps">
<div class="step-row">
<div class="step-cell">* def postData = {}</div>
<div class="time-cell">0.425324</div>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">* call classpath:springifyapi/common/setHeaders.feature</div>
<div class="time-cell">0</div>
</div>
<pre>{
  "config": {
    "user": "admin",
    "baseUrl": "http:\/\/127.0.0.1:36661\/api\/"
  }
}
</pre>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">* print 'Config passed: ', karate.pretty(config)</div>
<div class="time-cell">0</div>
</div>
<pre>18:13:07.218 INFO  - [print] Config passed:  {
  "user": "admin",
  "baseUrl": "http:\/\/127.0.0.1:36661\/api\/"
}

</pre>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">* def creds = read('classpath:springifyapi/data/'+ config.user + '.json')</div>
<div class="time-cell">0</div>
</div>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">* url baseUrl</div>
<div class="time-cell">0</div>
</div>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">Given url baseUrl</div>
<div class="time-cell">0</div>
</div>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">And path 'login'</div>
<div class="time-cell">0</div>
</div>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">And request creds</div>
<div class="time-cell">0</div>
</div>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">When method post</div>
<div class="time-cell">0</div>
</div>
<pre>18:13:07.253 INFO  - request:
{
  "password": "11111111",
  "username": "admin"
}

18:13:07.255 DEBUG - 
1 &gt; POST http://127.0.0.1:36661/api/login
1 &gt; Accept-Encoding: gzip,deflate
1 &gt; Connection: Keep-Alive
1 &gt; Content-Length: 42
1 &gt; Content-Type: application/json
1 &gt; Host: 127.0.0.1:36661
1 &gt; User-Agent: Apache-HttpClient/4.5.3 (Java/1.8.0_151)
{"password":"11111111","username":"admin"}

18:13:07.458 DEBUG - 
1 &lt; 200
1 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
1 &lt; Content-Type: application/hal+json;charset=UTF-8
1 &lt; Date: Mon, 15 Jan 2018 16:13:07 GMT
1 &lt; Expires: 0
1 &lt; Pragma: no-cache
1 &lt; Token: eyJhbGciOiJIUzUxMiJ9.eyJhdWQiOiJTcHJpbmdpZnkgVXNlcnMiLCJqdGkiOiJhZG1pbkBzcHJpbmdpZnkuY29tIiwic3ViIjoiYWRtaW4iLCJleHAiOjE1MTY3MzExODcsImlzcyI6ImNvbS5zcnBpbmdpZnkua2FiYXNha2FsaXMifQ.IYycp_uf9TuJirdUV1RTH8XaUIyOBQENWDFYctPPnk1vD3I0Do03XwleLJ5oi7Pyzb1tXl2VlHS7BcvCC12AGA
1 &lt; Transfer-Encoding: chunked
1 &lt; X-Application-Context: application:0
1 &lt; X-Content-Type-Options: nosniff
1 &lt; X-Frame-Options: DENY
1 &lt; X-XSS-Protection: 1; mode=block
{
  "username" : "admin",
  "email" : "admin@springify.com",
  "password" : "$2a$10$UClj/ChiXzRXcT6HvSdOpePZFzTIJs9CYDagygovYbM0TDzMRe7Di",
  "jwtToken" : "eyJhbGciOiJIUzUxMiJ9.eyJhdWQiOiJTcHJpbmdpZnkgVXNlcnMiLCJqdGkiOiJhZG1pbkBzcHJpbmdpZnkuY29tIiwic3ViIjoiYWRtaW4iLCJleHAiOjE1MTY3MzExODcsImlzcyI6ImNvbS5zcnBpbmdpZnkua2FiYXNha2FsaXMifQ.IYycp_uf9TuJirdUV1RTH8XaUIyOBQENWDFYctPPnk1vD3I0Do03XwleLJ5oi7Pyzb1tXl2VlHS7BcvCC12AGA",
  "updated_date" : "Mon, 15 Jan 2018 15:20:18 +0200",
  "created_date" : "Mon, 15 Jan 2018 15:20:18 +0200"
}

18:13:07.459 DEBUG - response time in milliseconds: 206
18:13:07.459 INFO  - response:
{
  "username": "admin",
  "email": "admin@springify.com",
  "password": "$2a$10$UClj\/ChiXzRXcT6HvSdOpePZFzTIJs9CYDagygovYbM0TDzMRe7Di",
  "jwtToken": "eyJhbGciOiJIUzUxMiJ9.eyJhdWQiOiJTcHJpbmdpZnkgVXNlcnMiLCJqdGkiOiJhZG1pbkBzcHJpbmdpZnkuY29tIiwic3ViIjoiYWRtaW4iLCJleHAiOjE1MTY3MzExODcsImlzcyI6ImNvbS5zcnBpbmdpZnkua2FiYXNha2FsaXMifQ.IYycp_uf9TuJirdUV1RTH8XaUIyOBQENWDFYctPPnk1vD3I0Do03XwleLJ5oi7Pyzb1tXl2VlHS7BcvCC12AGA",
  "updated_date": "Mon, 15 Jan 2018 15:20:18 +0200",
  "created_date": "Mon, 15 Jan 2018 15:20:18 +0200"
}

</pre>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">Then status 200</div>
<div class="time-cell">0</div>
</div>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">* def jwtToken = response.jwtToken</div>
<div class="time-cell">0</div>
</div>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">* print 'jwtToken OK: ', karate.pretty(jwtToken)</div>
<div class="time-cell">0</div>
</div>
<pre>18:13:07.481 INFO  - [print] jwtToken OK:  eyJhbGciOiJIUzUxMiJ9.eyJhdWQiOiJTcHJpbmdpZnkgVXNlcnMiLCJqdGkiOiJhZG1pbkBzcHJpbmdpZnkuY29tIiwic3ViIjoiYWRtaW4iLCJleHAiOjE1MTY3MzExODcsImlzcyI6ImNvbS5zcnBpbmdpZnkua2FiYXNha2FsaXMifQ.IYycp_uf9TuJirdUV1RTH8XaUIyOBQENWDFYctPPnk1vD3I0Do03XwleLJ5oi7Pyzb1tXl2VlHS7BcvCC12AGA
</pre>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">* def defaultHeaders =  callonce read('classpath:springifyapi/common/HeadersFun.js')  { jwtToken:  '#(jwtToken)' }</div>
<div class="time-cell">0</div>
</div>
<pre>18:13:07.481 DEBUG - callonce cache hit for: read('classpath:springifyapi/common/HeadersFun.js')
</pre>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">* configure headers = defaultHeaders</div>
<div class="time-cell">0</div>
</div>
</div>
<div class="step-row">
<div class="step-cell">* def album_payload = {title: 'Revival', year: '2017'}</div>
<div class="time-cell">0.000188</div>
</div>
<div class="step-row">
<div class="step-cell">* set postData.path = 'albums'</div>
<div class="time-cell">0.01383</div>
</div>
<div class="step-row">
<div class="step-cell">* set postData.payload =  album_payload</div>
<div class="time-cell">0.000175</div>
</div>
<div class="step-row">
<div class="step-cell">* def post = callonce read('classpath:springifyapi/common/genericPost.feature') { postData: '#(postData)' }</div>
<div class="time-cell">0.000217</div>
</div>
<pre>18:13:07.502 DEBUG - callonce cache hit for: read('classpath:springifyapi/common/genericPost.feature')
</pre>
<div class="step-row">
<div class="step-cell">* def postResponse = post.genericPostResult.response</div>
<div class="time-cell">0.000807</div>
</div>
<div class="step-row">
<div class="step-cell">* def location = post.genericPostResult.location</div>
<div class="time-cell">0.000208</div>
</div>
<div class="step-row">
<div class="step-cell">* print 'postResult', karate.pretty(postResponse)</div>
<div class="time-cell">0.024525</div>
</div>
<pre>18:13:07.528 INFO  - [print] postResult {
  "id": 10007,
  "title": "Revival",
  "year": "2017",
  "created_date": "Mon, 15 Jan 2018 18:13:06 +0200",
  "updated_date": "Mon, 15 Jan 2018 18:13:06 +0200",
  "_links": {
    "self": {
      "href": "http:\/\/127.0.0.1:36661\/api\/albums\/10007"
    },
    "albums": {
      "href": "http:\/\/127.0.0.1:36661\/api\/albums"
    },
    "playlists": {
      "href": "http:\/\/127.0.0.1:36661\/api\/albums\/10007\/playlists"
    },
    "artist": {
      "href": "http:\/\/127.0.0.1:36661\/api\/albums\/10007\/artist"
    }
  }
}

</pre>
<div class="step-row">
<div class="step-cell">Given url baseUrl</div>
<div class="time-cell">0.000142</div>
</div>
<div class="step-row">
<div class="step-cell">And path '/playlists/12/albums'</div>
<div class="time-cell">0.010539</div>
</div>
<div class="step-row">
<div class="step-cell">And header Content-Type = 'text/uri-list'</div>
<div class="time-cell">0.009557</div>
</div>
<div class="step-row">
<div class="step-cell">And request location</div>
<div class="time-cell">0.000088</div>
</div>
<div class="step-row">
<div class="step-cell">When method put</div>
<div class="time-cell">0.159171</div>
</div>
<pre>18:13:07.551 INFO  - request:
http://127.0.0.1:36661/api/albums/10007
18:13:07.553 DEBUG - 
1 &gt; PUT http://127.0.0.1:36661/api/playlists/12/albums
1 &gt; Accept-Encoding: gzip,deflate
1 &gt; Authorization: Bearer eyJhbGciOiJIUzUxMiJ9.eyJhdWQiOiJTcHJpbmdpZnkgVXNlcnMiLCJqdGkiOiJhZG1pbkBzcHJpbmdpZnkuY29tIiwic3ViIjoiYWRtaW4iLCJleHAiOjE1MTY3MzExODUsImlzcyI6ImNvbS5zcnBpbmdpZnkua2FiYXNha2FsaXMifQ.hNOdWZKeKTVGALs5DxuZTFK8558i32MYX5vKNnbx7GTAkz3ewYUcqip2tlsAxJORytQcLdq7sJ6d5ir2kwd2Lg
1 &gt; Connection: Keep-Alive
1 &gt; Content-Length: 39
1 &gt; Content-Type: text/uri-list
1 &gt; Host: 127.0.0.1:36661
1 &gt; User-Agent: Apache-HttpClient/4.5.3 (Java/1.8.0_151)
http://127.0.0.1:36661/api/albums/10007

18:13:07.709 DEBUG - 
1 &lt; 204
1 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
1 &lt; Date: Mon, 15 Jan 2018 16:13:07 GMT
1 &lt; Expires: 0
1 &lt; Pragma: no-cache
1 &lt; Set-Cookie: JSESSIONID=72A8DDC3F516B07E33839EE65109ADAF; Path=/api; HttpOnly
1 &lt; X-Application-Context: application:0
1 &lt; X-Content-Type-Options: nosniff
1 &lt; X-Frame-Options: DENY
1 &lt; X-XSS-Protection: 1; mode=block

18:13:07.709 DEBUG - response time in milliseconds: 158
</pre>
<div class="step-row">
<div class="step-cell">Then status 204</div>
<div class="time-cell">0.000123</div>
</div>
</div>
</div>
<div class="scenario">
<div class="scenario-heading">
<span class="scenario-keyword">Scenario: </span><span class="scenario-name">Verify that the album has been associated with playlist 'Rap Essentials'</span>
</div>
<div class="scenario-steps">
<div class="step-row">
<div class="step-cell">* def postData = {}</div>
<div class="time-cell">0.447978</div>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">* call classpath:springifyapi/common/setHeaders.feature</div>
<div class="time-cell">0</div>
</div>
<pre>{
  "config": {
    "user": "admin",
    "baseUrl": "http:\/\/127.0.0.1:36661\/api\/"
  }
}
</pre>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">* print 'Config passed: ', karate.pretty(config)</div>
<div class="time-cell">0</div>
</div>
<pre>18:13:07.899 INFO  - [print] Config passed:  {
  "user": "admin",
  "baseUrl": "http:\/\/127.0.0.1:36661\/api\/"
}

</pre>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">* def creds = read('classpath:springifyapi/data/'+ config.user + '.json')</div>
<div class="time-cell">0</div>
</div>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">* url baseUrl</div>
<div class="time-cell">0</div>
</div>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">Given url baseUrl</div>
<div class="time-cell">0</div>
</div>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">And path 'login'</div>
<div class="time-cell">0</div>
</div>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">And request creds</div>
<div class="time-cell">0</div>
</div>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">When method post</div>
<div class="time-cell">0</div>
</div>
<pre>18:13:07.934 INFO  - request:
{
  "password": "11111111",
  "username": "admin"
}

18:13:07.936 DEBUG - 
1 &gt; POST http://127.0.0.1:36661/api/login
1 &gt; Accept-Encoding: gzip,deflate
1 &gt; Connection: Keep-Alive
1 &gt; Content-Length: 42
1 &gt; Content-Type: application/json
1 &gt; Host: 127.0.0.1:36661
1 &gt; User-Agent: Apache-HttpClient/4.5.3 (Java/1.8.0_151)
{"password":"11111111","username":"admin"}

18:13:08.142 DEBUG - 
1 &lt; 200
1 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
1 &lt; Content-Type: application/hal+json;charset=UTF-8
1 &lt; Date: Mon, 15 Jan 2018 16:13:07 GMT
1 &lt; Expires: 0
1 &lt; Pragma: no-cache
1 &lt; Token: eyJhbGciOiJIUzUxMiJ9.eyJhdWQiOiJTcHJpbmdpZnkgVXNlcnMiLCJqdGkiOiJhZG1pbkBzcHJpbmdpZnkuY29tIiwic3ViIjoiYWRtaW4iLCJleHAiOjE1MTY3MzExODgsImlzcyI6ImNvbS5zcnBpbmdpZnkua2FiYXNha2FsaXMifQ.G29vb9dnephV4x-rDW1QCEaZLTc1OwS2TJMdOHJD5isd58KfeLXTkl9xgnO6fAlgvxBIUuk854kH_1ONe9sEjQ
1 &lt; Transfer-Encoding: chunked
1 &lt; X-Application-Context: application:0
1 &lt; X-Content-Type-Options: nosniff
1 &lt; X-Frame-Options: DENY
1 &lt; X-XSS-Protection: 1; mode=block
{
  "username" : "admin",
  "email" : "admin@springify.com",
  "password" : "$2a$10$UClj/ChiXzRXcT6HvSdOpePZFzTIJs9CYDagygovYbM0TDzMRe7Di",
  "jwtToken" : "eyJhbGciOiJIUzUxMiJ9.eyJhdWQiOiJTcHJpbmdpZnkgVXNlcnMiLCJqdGkiOiJhZG1pbkBzcHJpbmdpZnkuY29tIiwic3ViIjoiYWRtaW4iLCJleHAiOjE1MTY3MzExODgsImlzcyI6ImNvbS5zcnBpbmdpZnkua2FiYXNha2FsaXMifQ.G29vb9dnephV4x-rDW1QCEaZLTc1OwS2TJMdOHJD5isd58KfeLXTkl9xgnO6fAlgvxBIUuk854kH_1ONe9sEjQ",
  "updated_date" : "Mon, 15 Jan 2018 15:20:18 +0200",
  "created_date" : "Mon, 15 Jan 2018 15:20:18 +0200"
}

18:13:08.142 DEBUG - response time in milliseconds: 208
18:13:08.143 INFO  - response:
{
  "username": "admin",
  "email": "admin@springify.com",
  "password": "$2a$10$UClj\/ChiXzRXcT6HvSdOpePZFzTIJs9CYDagygovYbM0TDzMRe7Di",
  "jwtToken": "eyJhbGciOiJIUzUxMiJ9.eyJhdWQiOiJTcHJpbmdpZnkgVXNlcnMiLCJqdGkiOiJhZG1pbkBzcHJpbmdpZnkuY29tIiwic3ViIjoiYWRtaW4iLCJleHAiOjE1MTY3MzExODgsImlzcyI6ImNvbS5zcnBpbmdpZnkua2FiYXNha2FsaXMifQ.G29vb9dnephV4x-rDW1QCEaZLTc1OwS2TJMdOHJD5isd58KfeLXTkl9xgnO6fAlgvxBIUuk854kH_1ONe9sEjQ",
  "updated_date": "Mon, 15 Jan 2018 15:20:18 +0200",
  "created_date": "Mon, 15 Jan 2018 15:20:18 +0200"
}

</pre>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">Then status 200</div>
<div class="time-cell">0</div>
</div>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">* def jwtToken = response.jwtToken</div>
<div class="time-cell">0</div>
</div>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">* print 'jwtToken OK: ', karate.pretty(jwtToken)</div>
<div class="time-cell">0</div>
</div>
<pre>18:13:08.169 INFO  - [print] jwtToken OK:  eyJhbGciOiJIUzUxMiJ9.eyJhdWQiOiJTcHJpbmdpZnkgVXNlcnMiLCJqdGkiOiJhZG1pbkBzcHJpbmdpZnkuY29tIiwic3ViIjoiYWRtaW4iLCJleHAiOjE1MTY3MzExODgsImlzcyI6ImNvbS5zcnBpbmdpZnkua2FiYXNha2FsaXMifQ.G29vb9dnephV4x-rDW1QCEaZLTc1OwS2TJMdOHJD5isd58KfeLXTkl9xgnO6fAlgvxBIUuk854kH_1ONe9sEjQ
</pre>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">* def defaultHeaders =  callonce read('classpath:springifyapi/common/HeadersFun.js')  { jwtToken:  '#(jwtToken)' }</div>
<div class="time-cell">0</div>
</div>
<pre>18:13:08.169 DEBUG - callonce cache hit for: read('classpath:springifyapi/common/HeadersFun.js')
</pre>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">* configure headers = defaultHeaders</div>
<div class="time-cell">0</div>
</div>
</div>
<div class="step-row">
<div class="step-cell">* def album_payload = {title: 'Revival', year: '2017'}</div>
<div class="time-cell">0.000188</div>
</div>
<div class="step-row">
<div class="step-cell">* set postData.path = 'albums'</div>
<div class="time-cell">0.010297</div>
</div>
<div class="step-row">
<div class="step-cell">* set postData.payload =  album_payload</div>
<div class="time-cell">0.000279</div>
</div>
<div class="step-row">
<div class="step-cell">* def post = callonce read('classpath:springifyapi/common/genericPost.feature') { postData: '#(postData)' }</div>
<div class="time-cell">0.000287</div>
</div>
<pre>18:13:08.187 DEBUG - callonce cache hit for: read('classpath:springifyapi/common/genericPost.feature')
</pre>
<div class="step-row">
<div class="step-cell">* def postResponse = post.genericPostResult.response</div>
<div class="time-cell">0.000191</div>
</div>
<div class="step-row">
<div class="step-cell">* def location = post.genericPostResult.location</div>
<div class="time-cell">0.000235</div>
</div>
<div class="step-row">
<div class="step-cell">* print 'postResult', karate.pretty(postResponse)</div>
<div class="time-cell">0.035174</div>
</div>
<pre>18:13:08.223 INFO  - [print] postResult {
  "id": 10007,
  "title": "Revival",
  "year": "2017",
  "created_date": "Mon, 15 Jan 2018 18:13:06 +0200",
  "updated_date": "Mon, 15 Jan 2018 18:13:06 +0200",
  "_links": {
    "self": {
      "href": "http:\/\/127.0.0.1:36661\/api\/albums\/10007"
    },
    "albums": {
      "href": "http:\/\/127.0.0.1:36661\/api\/albums"
    },
    "playlists": {
      "href": "http:\/\/127.0.0.1:36661\/api\/albums\/10007\/playlists"
    },
    "artist": {
      "href": "http:\/\/127.0.0.1:36661\/api\/albums\/10007\/artist"
    }
  }
}

</pre>
<div class="step-row">
<div class="step-cell">Given url location + '/playlists'</div>
<div class="time-cell">0.015831</div>
</div>
<div class="step-row">
<div class="step-cell">When method get</div>
<div class="time-cell">0.231792</div>
</div>
<pre>18:13:08.242 DEBUG - 
1 &gt; GET http://127.0.0.1:36661/api/albums/10007/playlists
1 &gt; Accept-Encoding: gzip,deflate
1 &gt; Authorization: Bearer eyJhbGciOiJIUzUxMiJ9.eyJhdWQiOiJTcHJpbmdpZnkgVXNlcnMiLCJqdGkiOiJhZG1pbkBzcHJpbmdpZnkuY29tIiwic3ViIjoiYWRtaW4iLCJleHAiOjE1MTY3MzExODUsImlzcyI6ImNvbS5zcnBpbmdpZnkua2FiYXNha2FsaXMifQ.hNOdWZKeKTVGALs5DxuZTFK8558i32MYX5vKNnbx7GTAkz3ewYUcqip2tlsAxJORytQcLdq7sJ6d5ir2kwd2Lg
1 &gt; Connection: Keep-Alive
1 &gt; Content-Type: application/json
1 &gt; Host: 127.0.0.1:36661
1 &gt; User-Agent: Apache-HttpClient/4.5.3 (Java/1.8.0_151)

18:13:08.470 DEBUG - 
1 &lt; 200
1 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
1 &lt; Content-Type: application/hal+json;charset=UTF-8
1 &lt; Date: Mon, 15 Jan 2018 16:13:08 GMT
1 &lt; Expires: 0
1 &lt; Pragma: no-cache
1 &lt; Set-Cookie: JSESSIONID=EB251368ED85E6D286709B3BCEA8E53D; Path=/api; HttpOnly
1 &lt; Transfer-Encoding: chunked
1 &lt; X-Application-Context: application:0
1 &lt; X-Content-Type-Options: nosniff
1 &lt; X-Frame-Options: DENY
1 &lt; X-XSS-Protection: 1; mode=block
{
  "_embedded" : {
    "playlistResources" : [ {
      "id" : 12,
      "name" : "Rap Essentials",
      "albums_count" : 12,
      "created_date" : "Mon, 15 Jan 2018 15:20:18 +0200",
      "updated_date" : "Mon, 15 Jan 2018 15:20:18 +0200",
      "_links" : {
        "self" : {
          "href" : "http://127.0.0.1:36661/api/playlists/12"
        },
        "playlists" : {
          "href" : "http://127.0.0.1:36661/api/playlists"
        },
        "albums" : {
          "href" : "http://127.0.0.1:36661/api/playlists/12/albums"
        }
      }
    } ]
  },
  "_links" : {
    "self" : {
      "href" : "http://127.0.0.1:36661/api/albums/10007/playlists?page=0&amp;size=20"
    },
    "artists" : {
      "href" : "http://127.0.0.1:36661/api/artists"
    },
    "genres" : {
      "href" : "http://127.0.0.1:36661/api/genres"
    },
    "albums" : {
      "href" : "http://127.0.0.1:36661/api/albums"
    },
    "home" : {
      "href" : "http://127.0.0.1:36661/api/"
    }
  },
  "page" : {
    "size" : 20,
    "totalElements" : 1,
    "totalPages" : 1,
    "number" : 0
  }
}

18:13:08.471 DEBUG - response time in milliseconds: 231
18:13:08.472 INFO  - response:
{
  "_embedded": {
    "playlistResources": [
      {
        "id": 12,
        "name": "Rap Essentials",
        "albums_count": 12,
        "created_date": "Mon, 15 Jan 2018 15:20:18 +0200",
        "updated_date": "Mon, 15 Jan 2018 15:20:18 +0200",
        "_links": {
          "self": {
            "href": "http:\/\/127.0.0.1:36661\/api\/playlists\/12"
          },
          "playlists": {
            "href": "http:\/\/127.0.0.1:36661\/api\/playlists"
          },
          "albums": {
            "href": "http:\/\/127.0.0.1:36661\/api\/playlists\/12\/albums"
          }
        }
      }
    ]
  },
  "_links": {
    "self": {
      "href": "http:\/\/127.0.0.1:36661\/api\/albums\/10007\/playlists?page=0&amp;size=20"
    },
    "artists": {
      "href": "http:\/\/127.0.0.1:36661\/api\/artists"
    },
    "genres": {
      "href": "http:\/\/127.0.0.1:36661\/api\/genres"
    },
    "albums": {
      "href": "http:\/\/127.0.0.1:36661\/api\/albums"
    },
    "home": {
      "href": "http:\/\/127.0.0.1:36661\/api\/"
    }
  },
  "page": {
    "size": 20,
    "totalElements": 1,
    "totalPages": 1,
    "number": 0
  }
}

</pre>
<div class="step-row">
<div class="step-cell">Then status 200</div>
<div class="time-cell">0.000139</div>
</div>
<div class="step-row">
<div class="step-cell">And match response._embedded.playlistResources[*].name contains 'Rap Essentials'</div>
<div class="time-cell">0.016349</div>
</div>
</div>
</div>
<div class="scenario">
<div class="scenario-heading">
<span class="scenario-keyword">Scenario: </span><span class="scenario-name">Remove association of album with this playlist</span>
</div>
<div class="scenario-steps">
<div class="step-row">
<div class="step-cell">* def postData = {}</div>
<div class="time-cell">0.442817</div>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">* call classpath:springifyapi/common/setHeaders.feature</div>
<div class="time-cell">0</div>
</div>
<pre>{
  "config": {
    "user": "admin",
    "baseUrl": "http:\/\/127.0.0.1:36661\/api\/"
  }
}
</pre>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">* print 'Config passed: ', karate.pretty(config)</div>
<div class="time-cell">0</div>
</div>
<pre>18:13:08.672 INFO  - [print] Config passed:  {
  "user": "admin",
  "baseUrl": "http:\/\/127.0.0.1:36661\/api\/"
}

</pre>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">* def creds = read('classpath:springifyapi/data/'+ config.user + '.json')</div>
<div class="time-cell">0</div>
</div>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">* url baseUrl</div>
<div class="time-cell">0</div>
</div>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">Given url baseUrl</div>
<div class="time-cell">0</div>
</div>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">And path 'login'</div>
<div class="time-cell">0</div>
</div>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">And request creds</div>
<div class="time-cell">0</div>
</div>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">When method post</div>
<div class="time-cell">0</div>
</div>
<pre>18:13:08.718 INFO  - request:
{
  "password": "11111111",
  "username": "admin"
}

18:13:08.727 DEBUG - 
1 &gt; POST http://127.0.0.1:36661/api/login
1 &gt; Accept-Encoding: gzip,deflate
1 &gt; Connection: Keep-Alive
1 &gt; Content-Length: 42
1 &gt; Content-Type: application/json
1 &gt; Host: 127.0.0.1:36661
1 &gt; User-Agent: Apache-HttpClient/4.5.3 (Java/1.8.0_151)
{"password":"11111111","username":"admin"}

18:13:08.917 DEBUG - 
1 &lt; 200
1 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
1 &lt; Content-Type: application/hal+json;charset=UTF-8
1 &lt; Date: Mon, 15 Jan 2018 16:13:08 GMT
1 &lt; Expires: 0
1 &lt; Pragma: no-cache
1 &lt; Token: eyJhbGciOiJIUzUxMiJ9.eyJhdWQiOiJTcHJpbmdpZnkgVXNlcnMiLCJqdGkiOiJhZG1pbkBzcHJpbmdpZnkuY29tIiwic3ViIjoiYWRtaW4iLCJleHAiOjE1MTY3MzExODgsImlzcyI6ImNvbS5zcnBpbmdpZnkua2FiYXNha2FsaXMifQ.G29vb9dnephV4x-rDW1QCEaZLTc1OwS2TJMdOHJD5isd58KfeLXTkl9xgnO6fAlgvxBIUuk854kH_1ONe9sEjQ
1 &lt; Transfer-Encoding: chunked
1 &lt; X-Application-Context: application:0
1 &lt; X-Content-Type-Options: nosniff
1 &lt; X-Frame-Options: DENY
1 &lt; X-XSS-Protection: 1; mode=block
{
  "username" : "admin",
  "email" : "admin@springify.com",
  "password" : "$2a$10$UClj/ChiXzRXcT6HvSdOpePZFzTIJs9CYDagygovYbM0TDzMRe7Di",
  "jwtToken" : "eyJhbGciOiJIUzUxMiJ9.eyJhdWQiOiJTcHJpbmdpZnkgVXNlcnMiLCJqdGkiOiJhZG1pbkBzcHJpbmdpZnkuY29tIiwic3ViIjoiYWRtaW4iLCJleHAiOjE1MTY3MzExODgsImlzcyI6ImNvbS5zcnBpbmdpZnkua2FiYXNha2FsaXMifQ.G29vb9dnephV4x-rDW1QCEaZLTc1OwS2TJMdOHJD5isd58KfeLXTkl9xgnO6fAlgvxBIUuk854kH_1ONe9sEjQ",
  "updated_date" : "Mon, 15 Jan 2018 15:20:18 +0200",
  "created_date" : "Mon, 15 Jan 2018 15:20:18 +0200"
}

18:13:08.917 DEBUG - response time in milliseconds: 199
18:13:08.918 INFO  - response:
{
  "username": "admin",
  "email": "admin@springify.com",
  "password": "$2a$10$UClj\/ChiXzRXcT6HvSdOpePZFzTIJs9CYDagygovYbM0TDzMRe7Di",
  "jwtToken": "eyJhbGciOiJIUzUxMiJ9.eyJhdWQiOiJTcHJpbmdpZnkgVXNlcnMiLCJqdGkiOiJhZG1pbkBzcHJpbmdpZnkuY29tIiwic3ViIjoiYWRtaW4iLCJleHAiOjE1MTY3MzExODgsImlzcyI6ImNvbS5zcnBpbmdpZnkua2FiYXNha2FsaXMifQ.G29vb9dnephV4x-rDW1QCEaZLTc1OwS2TJMdOHJD5isd58KfeLXTkl9xgnO6fAlgvxBIUuk854kH_1ONe9sEjQ",
  "updated_date": "Mon, 15 Jan 2018 15:20:18 +0200",
  "created_date": "Mon, 15 Jan 2018 15:20:18 +0200"
}

</pre>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">Then status 200</div>
<div class="time-cell">0</div>
</div>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">* def jwtToken = response.jwtToken</div>
<div class="time-cell">0</div>
</div>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">* print 'jwtToken OK: ', karate.pretty(jwtToken)</div>
<div class="time-cell">0</div>
</div>
<pre>18:13:08.942 INFO  - [print] jwtToken OK:  eyJhbGciOiJIUzUxMiJ9.eyJhdWQiOiJTcHJpbmdpZnkgVXNlcnMiLCJqdGkiOiJhZG1pbkBzcHJpbmdpZnkuY29tIiwic3ViIjoiYWRtaW4iLCJleHAiOjE1MTY3MzExODgsImlzcyI6ImNvbS5zcnBpbmdpZnkua2FiYXNha2FsaXMifQ.G29vb9dnephV4x-rDW1QCEaZLTc1OwS2TJMdOHJD5isd58KfeLXTkl9xgnO6fAlgvxBIUuk854kH_1ONe9sEjQ
</pre>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">* def defaultHeaders =  callonce read('classpath:springifyapi/common/HeadersFun.js')  { jwtToken:  '#(jwtToken)' }</div>
<div class="time-cell">0</div>
</div>
<pre>18:13:08.943 DEBUG - callonce cache hit for: read('classpath:springifyapi/common/HeadersFun.js')
</pre>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">* configure headers = defaultHeaders</div>
<div class="time-cell">0</div>
</div>
</div>
<div class="step-row">
<div class="step-cell">* def album_payload = {title: 'Revival', year: '2017'}</div>
<div class="time-cell">0.000176</div>
</div>
<div class="step-row">
<div class="step-cell">* set postData.path = 'albums'</div>
<div class="time-cell">0.010065</div>
</div>
<div class="step-row">
<div class="step-cell">* set postData.payload =  album_payload</div>
<div class="time-cell">0.000244</div>
</div>
<div class="step-row">
<div class="step-cell">* def post = callonce read('classpath:springifyapi/common/genericPost.feature') { postData: '#(postData)' }</div>
<div class="time-cell">0.000375</div>
</div>
<pre>18:13:08.960 DEBUG - callonce cache hit for: read('classpath:springifyapi/common/genericPost.feature')
</pre>
<div class="step-row">
<div class="step-cell">* def postResponse = post.genericPostResult.response</div>
<div class="time-cell">0.000175</div>
</div>
<div class="step-row">
<div class="step-cell">* def location = post.genericPostResult.location</div>
<div class="time-cell">0.000093</div>
</div>
<div class="step-row">
<div class="step-cell">* print 'postResult', karate.pretty(postResponse)</div>
<div class="time-cell">0.022256</div>
</div>
<pre>18:13:08.983 INFO  - [print] postResult {
  "id": 10007,
  "title": "Revival",
  "year": "2017",
  "created_date": "Mon, 15 Jan 2018 18:13:06 +0200",
  "updated_date": "Mon, 15 Jan 2018 18:13:06 +0200",
  "_links": {
    "self": {
      "href": "http:\/\/127.0.0.1:36661\/api\/albums\/10007"
    },
    "albums": {
      "href": "http:\/\/127.0.0.1:36661\/api\/albums"
    },
    "playlists": {
      "href": "http:\/\/127.0.0.1:36661\/api\/albums\/10007\/playlists"
    },
    "artist": {
      "href": "http:\/\/127.0.0.1:36661\/api\/albums\/10007\/artist"
    }
  }
}

</pre>
<div class="step-row">
<div class="step-cell">Given url baseUrl</div>
<div class="time-cell">0.000093</div>
</div>
<div class="step-row">
<div class="step-cell">And path '/playlists/12/albums/' + postResponse.id</div>
<div class="time-cell">0.014356</div>
</div>
<div class="step-row">
<div class="step-cell">When method delete</div>
<div class="time-cell">0.083047</div>
</div>
<pre>18:13:09.001 DEBUG - 
1 &gt; DELETE http://127.0.0.1:36661/api/playlists/12/albums/10007
1 &gt; Accept-Encoding: gzip,deflate
1 &gt; Authorization: Bearer eyJhbGciOiJIUzUxMiJ9.eyJhdWQiOiJTcHJpbmdpZnkgVXNlcnMiLCJqdGkiOiJhZG1pbkBzcHJpbmdpZnkuY29tIiwic3ViIjoiYWRtaW4iLCJleHAiOjE1MTY3MzExODUsImlzcyI6ImNvbS5zcnBpbmdpZnkua2FiYXNha2FsaXMifQ.hNOdWZKeKTVGALs5DxuZTFK8558i32MYX5vKNnbx7GTAkz3ewYUcqip2tlsAxJORytQcLdq7sJ6d5ir2kwd2Lg
1 &gt; Connection: Keep-Alive
1 &gt; Content-Type: application/json
1 &gt; Host: 127.0.0.1:36661
1 &gt; User-Agent: Apache-HttpClient/4.5.3 (Java/1.8.0_151)

18:13:09.081 DEBUG - 
1 &lt; 204
1 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
1 &lt; Date: Mon, 15 Jan 2018 16:13:08 GMT
1 &lt; Expires: 0
1 &lt; Pragma: no-cache
1 &lt; Set-Cookie: JSESSIONID=CD256D793423BDA80667C29E8A630B26; Path=/api; HttpOnly
1 &lt; X-Application-Context: application:0
1 &lt; X-Content-Type-Options: nosniff
1 &lt; X-Frame-Options: DENY
1 &lt; X-XSS-Protection: 1; mode=block

18:13:09.081 DEBUG - response time in milliseconds: 82
</pre>
<div class="step-row">
<div class="step-cell">Then status 204</div>
<div class="time-cell">0.000131</div>
</div>
</div>
</div>
<div class="scenario">
<div class="scenario-heading">
<span class="scenario-keyword">Scenario: </span><span class="scenario-name">Verify that the new album has no associated playlist</span>
</div>
<div class="scenario-steps">
<div class="step-row">
<div class="step-cell">* def postData = {}</div>
<div class="time-cell">0.408397</div>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">* call classpath:springifyapi/common/setHeaders.feature</div>
<div class="time-cell">0</div>
</div>
<pre>{
  "config": {
    "user": "admin",
    "baseUrl": "http:\/\/127.0.0.1:36661\/api\/"
  }
}
</pre>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">* print 'Config passed: ', karate.pretty(config)</div>
<div class="time-cell">0</div>
</div>
<pre>18:13:09.237 INFO  - [print] Config passed:  {
  "user": "admin",
  "baseUrl": "http:\/\/127.0.0.1:36661\/api\/"
}

</pre>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">* def creds = read('classpath:springifyapi/data/'+ config.user + '.json')</div>
<div class="time-cell">0</div>
</div>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">* url baseUrl</div>
<div class="time-cell">0</div>
</div>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">Given url baseUrl</div>
<div class="time-cell">0</div>
</div>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">And path 'login'</div>
<div class="time-cell">0</div>
</div>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">And request creds</div>
<div class="time-cell">0</div>
</div>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">When method post</div>
<div class="time-cell">0</div>
</div>
<pre>18:13:09.273 INFO  - request:
{
  "password": "11111111",
  "username": "admin"
}

18:13:09.275 DEBUG - 
1 &gt; POST http://127.0.0.1:36661/api/login
1 &gt; Accept-Encoding: gzip,deflate
1 &gt; Connection: Keep-Alive
1 &gt; Content-Length: 42
1 &gt; Content-Type: application/json
1 &gt; Host: 127.0.0.1:36661
1 &gt; User-Agent: Apache-HttpClient/4.5.3 (Java/1.8.0_151)
{"password":"11111111","username":"admin"}

18:13:09.475 DEBUG - 
1 &lt; 200
1 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
1 &lt; Content-Type: application/hal+json;charset=UTF-8
1 &lt; Date: Mon, 15 Jan 2018 16:13:09 GMT
1 &lt; Expires: 0
1 &lt; Pragma: no-cache
1 &lt; Token: eyJhbGciOiJIUzUxMiJ9.eyJhdWQiOiJTcHJpbmdpZnkgVXNlcnMiLCJqdGkiOiJhZG1pbkBzcHJpbmdpZnkuY29tIiwic3ViIjoiYWRtaW4iLCJleHAiOjE1MTY3MzExODksImlzcyI6ImNvbS5zcnBpbmdpZnkua2FiYXNha2FsaXMifQ.xaKfgphLT71NdnoW0UjZsOXXLXqyisZ3Ecz6j_sEgugGJPQgDOMN7MG0iz4M6PwFKgPisbTzkN7B-ACeMGLx5Q
1 &lt; Transfer-Encoding: chunked
1 &lt; X-Application-Context: application:0
1 &lt; X-Content-Type-Options: nosniff
1 &lt; X-Frame-Options: DENY
1 &lt; X-XSS-Protection: 1; mode=block
{
  "username" : "admin",
  "email" : "admin@springify.com",
  "password" : "$2a$10$UClj/ChiXzRXcT6HvSdOpePZFzTIJs9CYDagygovYbM0TDzMRe7Di",
  "jwtToken" : "eyJhbGciOiJIUzUxMiJ9.eyJhdWQiOiJTcHJpbmdpZnkgVXNlcnMiLCJqdGkiOiJhZG1pbkBzcHJpbmdpZnkuY29tIiwic3ViIjoiYWRtaW4iLCJleHAiOjE1MTY3MzExODksImlzcyI6ImNvbS5zcnBpbmdpZnkua2FiYXNha2FsaXMifQ.xaKfgphLT71NdnoW0UjZsOXXLXqyisZ3Ecz6j_sEgugGJPQgDOMN7MG0iz4M6PwFKgPisbTzkN7B-ACeMGLx5Q",
  "updated_date" : "Mon, 15 Jan 2018 15:20:18 +0200",
  "created_date" : "Mon, 15 Jan 2018 15:20:18 +0200"
}

18:13:09.476 DEBUG - response time in milliseconds: 203
18:13:09.476 INFO  - response:
{
  "username": "admin",
  "email": "admin@springify.com",
  "password": "$2a$10$UClj\/ChiXzRXcT6HvSdOpePZFzTIJs9CYDagygovYbM0TDzMRe7Di",
  "jwtToken": "eyJhbGciOiJIUzUxMiJ9.eyJhdWQiOiJTcHJpbmdpZnkgVXNlcnMiLCJqdGkiOiJhZG1pbkBzcHJpbmdpZnkuY29tIiwic3ViIjoiYWRtaW4iLCJleHAiOjE1MTY3MzExODksImlzcyI6ImNvbS5zcnBpbmdpZnkua2FiYXNha2FsaXMifQ.xaKfgphLT71NdnoW0UjZsOXXLXqyisZ3Ecz6j_sEgugGJPQgDOMN7MG0iz4M6PwFKgPisbTzkN7B-ACeMGLx5Q",
  "updated_date": "Mon, 15 Jan 2018 15:20:18 +0200",
  "created_date": "Mon, 15 Jan 2018 15:20:18 +0200"
}

</pre>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">Then status 200</div>
<div class="time-cell">0</div>
</div>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">* def jwtToken = response.jwtToken</div>
<div class="time-cell">0</div>
</div>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">* print 'jwtToken OK: ', karate.pretty(jwtToken)</div>
<div class="time-cell">0</div>
</div>
<pre>18:13:09.507 INFO  - [print] jwtToken OK:  eyJhbGciOiJIUzUxMiJ9.eyJhdWQiOiJTcHJpbmdpZnkgVXNlcnMiLCJqdGkiOiJhZG1pbkBzcHJpbmdpZnkuY29tIiwic3ViIjoiYWRtaW4iLCJleHAiOjE1MTY3MzExODksImlzcyI6ImNvbS5zcnBpbmdpZnkua2FiYXNha2FsaXMifQ.xaKfgphLT71NdnoW0UjZsOXXLXqyisZ3Ecz6j_sEgugGJPQgDOMN7MG0iz4M6PwFKgPisbTzkN7B-ACeMGLx5Q
</pre>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">* def defaultHeaders =  callonce read('classpath:springifyapi/common/HeadersFun.js')  { jwtToken:  '#(jwtToken)' }</div>
<div class="time-cell">0</div>
</div>
<pre>18:13:09.508 DEBUG - callonce cache hit for: read('classpath:springifyapi/common/HeadersFun.js')
</pre>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">* configure headers = defaultHeaders</div>
<div class="time-cell">0</div>
</div>
</div>
<div class="step-row">
<div class="step-cell">* def album_payload = {title: 'Revival', year: '2017'}</div>
<div class="time-cell">0.000172</div>
</div>
<div class="step-row">
<div class="step-cell">* set postData.path = 'albums'</div>
<div class="time-cell">0.009378</div>
</div>
<div class="step-row">
<div class="step-cell">* set postData.payload =  album_payload</div>
<div class="time-cell">0.000263</div>
</div>
<div class="step-row">
<div class="step-cell">* def post = callonce read('classpath:springifyapi/common/genericPost.feature') { postData: '#(postData)' }</div>
<div class="time-cell">0.000313</div>
</div>
<pre>18:13:09.525 DEBUG - callonce cache hit for: read('classpath:springifyapi/common/genericPost.feature')
</pre>
<div class="step-row">
<div class="step-cell">* def postResponse = post.genericPostResult.response</div>
<div class="time-cell">0.000182</div>
</div>
<div class="step-row">
<div class="step-cell">* def location = post.genericPostResult.location</div>
<div class="time-cell">0.000171</div>
</div>
<div class="step-row">
<div class="step-cell">* print 'postResult', karate.pretty(postResponse)</div>
<div class="time-cell">0.019804</div>
</div>
<pre>18:13:09.545 INFO  - [print] postResult {
  "id": 10007,
  "title": "Revival",
  "year": "2017",
  "created_date": "Mon, 15 Jan 2018 18:13:06 +0200",
  "updated_date": "Mon, 15 Jan 2018 18:13:06 +0200",
  "_links": {
    "self": {
      "href": "http:\/\/127.0.0.1:36661\/api\/albums\/10007"
    },
    "albums": {
      "href": "http:\/\/127.0.0.1:36661\/api\/albums"
    },
    "playlists": {
      "href": "http:\/\/127.0.0.1:36661\/api\/albums\/10007\/playlists"
    },
    "artist": {
      "href": "http:\/\/127.0.0.1:36661\/api\/albums\/10007\/artist"
    }
  }
}

</pre>
<div class="step-row">
<div class="step-cell">Given url location + '/playlists'</div>
<div class="time-cell">0.027826</div>
</div>
<div class="step-row">
<div class="step-cell">When method get</div>
<div class="time-cell">0.053519</div>
</div>
<pre>18:13:09.578 DEBUG - 
1 &gt; GET http://127.0.0.1:36661/api/albums/10007/playlists
1 &gt; Accept-Encoding: gzip,deflate
1 &gt; Authorization: Bearer eyJhbGciOiJIUzUxMiJ9.eyJhdWQiOiJTcHJpbmdpZnkgVXNlcnMiLCJqdGkiOiJhZG1pbkBzcHJpbmdpZnkuY29tIiwic3ViIjoiYWRtaW4iLCJleHAiOjE1MTY3MzExODUsImlzcyI6ImNvbS5zcnBpbmdpZnkua2FiYXNha2FsaXMifQ.hNOdWZKeKTVGALs5DxuZTFK8558i32MYX5vKNnbx7GTAkz3ewYUcqip2tlsAxJORytQcLdq7sJ6d5ir2kwd2Lg
1 &gt; Connection: Keep-Alive
1 &gt; Content-Type: application/json
1 &gt; Host: 127.0.0.1:36661
1 &gt; User-Agent: Apache-HttpClient/4.5.3 (Java/1.8.0_151)

18:13:09.627 DEBUG - 
1 &lt; 200
1 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
1 &lt; Content-Type: application/hal+json;charset=UTF-8
1 &lt; Date: Mon, 15 Jan 2018 16:13:09 GMT
1 &lt; Expires: 0
1 &lt; Pragma: no-cache
1 &lt; Set-Cookie: JSESSIONID=B35E22791DA4E676610DB1407C9702C5; Path=/api; HttpOnly
1 &lt; Transfer-Encoding: chunked
1 &lt; X-Application-Context: application:0
1 &lt; X-Content-Type-Options: nosniff
1 &lt; X-Frame-Options: DENY
1 &lt; X-XSS-Protection: 1; mode=block
{
  "_links" : {
    "self" : {
      "href" : "http://127.0.0.1:36661/api/albums/10007/playlists?page=0&amp;size=20"
    },
    "artists" : {
      "href" : "http://127.0.0.1:36661/api/artists"
    },
    "genres" : {
      "href" : "http://127.0.0.1:36661/api/genres"
    },
    "albums" : {
      "href" : "http://127.0.0.1:36661/api/albums"
    },
    "home" : {
      "href" : "http://127.0.0.1:36661/api/"
    }
  },
  "page" : {
    "size" : 20,
    "totalElements" : 0,
    "totalPages" : 0,
    "number" : 0
  }
}

18:13:09.627 DEBUG - response time in milliseconds: 52
18:13:09.628 INFO  - response:
{
  "_links": {
    "self": {
      "href": "http:\/\/127.0.0.1:36661\/api\/albums\/10007\/playlists?page=0&amp;size=20"
    },
    "artists": {
      "href": "http:\/\/127.0.0.1:36661\/api\/artists"
    },
    "genres": {
      "href": "http:\/\/127.0.0.1:36661\/api\/genres"
    },
    "albums": {
      "href": "http:\/\/127.0.0.1:36661\/api\/albums"
    },
    "home": {
      "href": "http:\/\/127.0.0.1:36661\/api\/"
    }
  },
  "page": {
    "size": 20,
    "totalElements": 0,
    "totalPages": 0,
    "number": 0
  }
}

</pre>
<div class="step-row">
<div class="step-cell">Then status 200</div>
<div class="time-cell">0.000114</div>
</div>
<div class="step-row">
<div class="step-cell">And match response !contains { _embedded: '#object' }</div>
<div class="time-cell">0.002383</div>
</div>
</div>
</div>
<div class="scenario">
<div class="scenario-heading">
<span class="scenario-keyword">Scenario: </span><span class="scenario-name">Get all albums of this playlist and verify the json schema</span>
</div>
<div class="scenario-steps">
<div class="step-row">
<div class="step-cell">* def postData = {}</div>
<div class="time-cell">0.362236</div>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">* call classpath:springifyapi/common/setHeaders.feature</div>
<div class="time-cell">0</div>
</div>
<pre>{
  "config": {
    "user": "admin",
    "baseUrl": "http:\/\/127.0.0.1:36661\/api\/"
  }
}
</pre>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">* print 'Config passed: ', karate.pretty(config)</div>
<div class="time-cell">0</div>
</div>
<pre>18:13:09.763 INFO  - [print] Config passed:  {
  "user": "admin",
  "baseUrl": "http:\/\/127.0.0.1:36661\/api\/"
}

</pre>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">* def creds = read('classpath:springifyapi/data/'+ config.user + '.json')</div>
<div class="time-cell">0</div>
</div>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">* url baseUrl</div>
<div class="time-cell">0</div>
</div>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">Given url baseUrl</div>
<div class="time-cell">0</div>
</div>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">And path 'login'</div>
<div class="time-cell">0</div>
</div>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">And request creds</div>
<div class="time-cell">0</div>
</div>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">When method post</div>
<div class="time-cell">0</div>
</div>
<pre>18:13:09.797 INFO  - request:
{
  "password": "11111111",
  "username": "admin"
}

18:13:09.799 DEBUG - 
1 &gt; POST http://127.0.0.1:36661/api/login
1 &gt; Accept-Encoding: gzip,deflate
1 &gt; Connection: Keep-Alive
1 &gt; Content-Length: 42
1 &gt; Content-Type: application/json
1 &gt; Host: 127.0.0.1:36661
1 &gt; User-Agent: Apache-HttpClient/4.5.3 (Java/1.8.0_151)
{"password":"11111111","username":"admin"}

18:13:09.995 DEBUG - 
1 &lt; 200
1 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
1 &lt; Content-Type: application/hal+json;charset=UTF-8
1 &lt; Date: Mon, 15 Jan 2018 16:13:09 GMT
1 &lt; Expires: 0
1 &lt; Pragma: no-cache
1 &lt; Token: eyJhbGciOiJIUzUxMiJ9.eyJhdWQiOiJTcHJpbmdpZnkgVXNlcnMiLCJqdGkiOiJhZG1pbkBzcHJpbmdpZnkuY29tIiwic3ViIjoiYWRtaW4iLCJleHAiOjE1MTY3MzExODksImlzcyI6ImNvbS5zcnBpbmdpZnkua2FiYXNha2FsaXMifQ.xaKfgphLT71NdnoW0UjZsOXXLXqyisZ3Ecz6j_sEgugGJPQgDOMN7MG0iz4M6PwFKgPisbTzkN7B-ACeMGLx5Q
1 &lt; Transfer-Encoding: chunked
1 &lt; X-Application-Context: application:0
1 &lt; X-Content-Type-Options: nosniff
1 &lt; X-Frame-Options: DENY
1 &lt; X-XSS-Protection: 1; mode=block
{
  "username" : "admin",
  "email" : "admin@springify.com",
  "password" : "$2a$10$UClj/ChiXzRXcT6HvSdOpePZFzTIJs9CYDagygovYbM0TDzMRe7Di",
  "jwtToken" : "eyJhbGciOiJIUzUxMiJ9.eyJhdWQiOiJTcHJpbmdpZnkgVXNlcnMiLCJqdGkiOiJhZG1pbkBzcHJpbmdpZnkuY29tIiwic3ViIjoiYWRtaW4iLCJleHAiOjE1MTY3MzExODksImlzcyI6ImNvbS5zcnBpbmdpZnkua2FiYXNha2FsaXMifQ.xaKfgphLT71NdnoW0UjZsOXXLXqyisZ3Ecz6j_sEgugGJPQgDOMN7MG0iz4M6PwFKgPisbTzkN7B-ACeMGLx5Q",
  "updated_date" : "Mon, 15 Jan 2018 15:20:18 +0200",
  "created_date" : "Mon, 15 Jan 2018 15:20:18 +0200"
}

18:13:09.996 DEBUG - response time in milliseconds: 199
18:13:09.997 INFO  - response:
{
  "username": "admin",
  "email": "admin@springify.com",
  "password": "$2a$10$UClj\/ChiXzRXcT6HvSdOpePZFzTIJs9CYDagygovYbM0TDzMRe7Di",
  "jwtToken": "eyJhbGciOiJIUzUxMiJ9.eyJhdWQiOiJTcHJpbmdpZnkgVXNlcnMiLCJqdGkiOiJhZG1pbkBzcHJpbmdpZnkuY29tIiwic3ViIjoiYWRtaW4iLCJleHAiOjE1MTY3MzExODksImlzcyI6ImNvbS5zcnBpbmdpZnkua2FiYXNha2FsaXMifQ.xaKfgphLT71NdnoW0UjZsOXXLXqyisZ3Ecz6j_sEgugGJPQgDOMN7MG0iz4M6PwFKgPisbTzkN7B-ACeMGLx5Q",
  "updated_date": "Mon, 15 Jan 2018 15:20:18 +0200",
  "created_date": "Mon, 15 Jan 2018 15:20:18 +0200"
}

</pre>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">Then status 200</div>
<div class="time-cell">0</div>
</div>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">* def jwtToken = response.jwtToken</div>
<div class="time-cell">0</div>
</div>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">* print 'jwtToken OK: ', karate.pretty(jwtToken)</div>
<div class="time-cell">0</div>
</div>
<pre>18:13:10.016 INFO  - [print] jwtToken OK:  eyJhbGciOiJIUzUxMiJ9.eyJhdWQiOiJTcHJpbmdpZnkgVXNlcnMiLCJqdGkiOiJhZG1pbkBzcHJpbmdpZnkuY29tIiwic3ViIjoiYWRtaW4iLCJleHAiOjE1MTY3MzExODksImlzcyI6ImNvbS5zcnBpbmdpZnkua2FiYXNha2FsaXMifQ.xaKfgphLT71NdnoW0UjZsOXXLXqyisZ3Ecz6j_sEgugGJPQgDOMN7MG0iz4M6PwFKgPisbTzkN7B-ACeMGLx5Q
</pre>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">* def defaultHeaders =  callonce read('classpath:springifyapi/common/HeadersFun.js')  { jwtToken:  '#(jwtToken)' }</div>
<div class="time-cell">0</div>
</div>
<pre>18:13:10.017 DEBUG - callonce cache hit for: read('classpath:springifyapi/common/HeadersFun.js')
</pre>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">* configure headers = defaultHeaders</div>
<div class="time-cell">0</div>
</div>
</div>
<div class="step-row">
<div class="step-cell">* def album_payload = {title: 'Revival', year: '2017'}</div>
<div class="time-cell">0.000207</div>
</div>
<div class="step-row">
<div class="step-cell">* set postData.path = 'albums'</div>
<div class="time-cell">0.008027</div>
</div>
<div class="step-row">
<div class="step-cell">* set postData.payload =  album_payload</div>
<div class="time-cell">0.000285</div>
</div>
<div class="step-row">
<div class="step-cell">* def post = callonce read('classpath:springifyapi/common/genericPost.feature') { postData: '#(postData)' }</div>
<div class="time-cell">0.000287</div>
</div>
<pre>18:13:10.031 DEBUG - callonce cache hit for: read('classpath:springifyapi/common/genericPost.feature')
</pre>
<div class="step-row">
<div class="step-cell">* def postResponse = post.genericPostResult.response</div>
<div class="time-cell">0.00021</div>
</div>
<div class="step-row">
<div class="step-cell">* def location = post.genericPostResult.location</div>
<div class="time-cell">0.000128</div>
</div>
<div class="step-row">
<div class="step-cell">* print 'postResult', karate.pretty(postResponse)</div>
<div class="time-cell">0.01865</div>
</div>
<pre>18:13:10.051 INFO  - [print] postResult {
  "id": 10007,
  "title": "Revival",
  "year": "2017",
  "created_date": "Mon, 15 Jan 2018 18:13:06 +0200",
  "updated_date": "Mon, 15 Jan 2018 18:13:06 +0200",
  "_links": {
    "self": {
      "href": "http:\/\/127.0.0.1:36661\/api\/albums\/10007"
    },
    "albums": {
      "href": "http:\/\/127.0.0.1:36661\/api\/albums"
    },
    "playlists": {
      "href": "http:\/\/127.0.0.1:36661\/api\/albums\/10007\/playlists"
    },
    "artist": {
      "href": "http:\/\/127.0.0.1:36661\/api\/albums\/10007\/artist"
    }
  }
}

</pre>
<div class="step-row">
<div class="step-cell">* def albumStructure = read('classpath:springifyapi/common/schemas/album.js')</div>
<div class="time-cell">0.011528</div>
</div>
<div class="step-row">
<div class="step-cell">* def pageStructure = read('classpath:springifyapi/common/schemas/page.js')</div>
<div class="time-cell">0.01833</div>
</div>
<div class="step-row">
<div class="step-cell">* def linksStructure = read('classpath:springifyapi/common/schemas/albums_links.js')</div>
<div class="time-cell">0.035515</div>
</div>
<div class="step-row">
<div class="step-cell">Given url baseUrl</div>
<div class="time-cell">0.000076</div>
</div>
<div class="step-row">
<div class="step-cell">And path '/playlists/12/albums/'</div>
<div class="time-cell">0.008779</div>
</div>
<div class="step-row">
<div class="step-cell">When method get</div>
<div class="time-cell">0.131351</div>
</div>
<pre>18:13:10.136 DEBUG - 
1 &gt; GET http://127.0.0.1:36661/api/playlists/12/albums/
1 &gt; Accept-Encoding: gzip,deflate
1 &gt; Authorization: Bearer eyJhbGciOiJIUzUxMiJ9.eyJhdWQiOiJTcHJpbmdpZnkgVXNlcnMiLCJqdGkiOiJhZG1pbkBzcHJpbmdpZnkuY29tIiwic3ViIjoiYWRtaW4iLCJleHAiOjE1MTY3MzExODUsImlzcyI6ImNvbS5zcnBpbmdpZnkua2FiYXNha2FsaXMifQ.hNOdWZKeKTVGALs5DxuZTFK8558i32MYX5vKNnbx7GTAkz3ewYUcqip2tlsAxJORytQcLdq7sJ6d5ir2kwd2Lg
1 &gt; Connection: Keep-Alive
1 &gt; Content-Type: application/json
1 &gt; Host: 127.0.0.1:36661
1 &gt; User-Agent: Apache-HttpClient/4.5.3 (Java/1.8.0_151)

18:13:10.262 DEBUG - 
1 &lt; 200
1 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
1 &lt; Content-Type: application/hal+json;charset=UTF-8
1 &lt; Date: Mon, 15 Jan 2018 16:13:09 GMT
1 &lt; Expires: 0
1 &lt; Pragma: no-cache
1 &lt; Set-Cookie: JSESSIONID=4FA08CABB131C60DF53170F5E2751F72; Path=/api; HttpOnly
1 &lt; Transfer-Encoding: chunked
1 &lt; X-Application-Context: application:0
1 &lt; X-Content-Type-Options: nosniff
1 &lt; X-Frame-Options: DENY
1 &lt; X-XSS-Protection: 1; mode=block
{
  "_embedded" : {
    "albumResources" : [ {
      "id" : 41,
      "title" : "Trial By Fire",
      "year" : "2017",
      "artist" : "Yelawolf",
      "created_date" : "Mon, 15 Jan 2018 15:20:18 +0200",
      "updated_date" : "Mon, 15 Jan 2018 15:20:18 +0200",
      "_links" : {
        "self" : {
          "href" : "http://127.0.0.1:36661/api/albums/41"
        },
        "albums" : {
          "href" : "http://127.0.0.1:36661/api/albums"
        },
        "playlists" : {
          "href" : "http://127.0.0.1:36661/api/albums/41/playlists"
        },
        "artist" : {
          "href" : "http://127.0.0.1:36661/api/albums/41/artist"
        }
      }
    }, {
      "id" : 42,
      "title" : "Trunk Muzik",
      "year" : "2010",
      "artist" : "Yelawolf",
      "created_date" : "Mon, 15 Jan 2018 15:20:18 +0200",
      "updated_date" : "Mon, 15 Jan 2018 15:20:18 +0200",
      "_links" : {
        "self" : {
          "href" : "http://127.0.0.1:36661/api/albums/42"
        },
        "albums" : {
          "href" : "http://127.0.0.1:36661/api/albums"
        },
        "playlists" : {
          "href" : "http://127.0.0.1:36661/api/albums/42/playlists"
        },
        "artist" : {
          "href" : "http://127.0.0.1:36661/api/albums/42/artist"
        }
      }
    }, {
      "id" : 43,
      "title" : "Radioactive",
      "year" : "2011",
      "artist" : "Yelawolf",
      "created_date" : "Mon, 15 Jan 2018 15:20:18 +0200",
      "updated_date" : "Mon, 15 Jan 2018 15:20:18 +0200",
      "_links" : {
        "self" : {
          "href" : "http://127.0.0.1:36661/api/albums/43"
        },
        "albums" : {
          "href" : "http://127.0.0.1:36661/api/albums"
        },
        "playlists" : {
          "href" : "http://127.0.0.1:36661/api/albums/43/playlists"
        },
        "artist" : {
          "href" : "http://127.0.0.1:36661/api/albums/43/artist"
        }
      }
    }, {
      "id" : 44,
      "title" : "Lovestory",
      "year" : "2015",
      "artist" : "Yelawolf",
      "created_date" : "Mon, 15 Jan 2018 15:20:18 +0200",
      "updated_date" : "Mon, 15 Jan 2018 15:20:18 +0200",
      "_links" : {
        "self" : {
          "href" : "http://127.0.0.1:36661/api/albums/44"
        },
        "albums" : {
          "href" : "http://127.0.0.1:36661/api/albums"
        },
        "playlists" : {
          "href" : "http://127.0.0.1:36661/api/albums/44/playlists"
        },
        "artist" : {
          "href" : "http://127.0.0.1:36661/api/albums/44/artist"
        }
      }
    }, {
      "id" : 45,
      "title" : "The Eminem Show",
      "year" : "2002",
      "artist" : "Eminem",
      "created_date" : "Mon, 15 Jan 2018 15:20:18 +0200",
      "updated_date" : "Mon, 15 Jan 2018 15:20:18 +0200",
      "_links" : {
        "self" : {
          "href" : "http://127.0.0.1:36661/api/albums/45"
        },
        "albums" : {
          "href" : "http://127.0.0.1:36661/api/albums"
        },
        "playlists" : {
          "href" : "http://127.0.0.1:36661/api/albums/45/playlists"
        },
        "artist" : {
          "href" : "http://127.0.0.1:36661/api/albums/45/artist"
        }
      }
    }, {
      "id" : 46,
      "title" : "The Marshall Mathers LP",
      "year" : "2000",
      "artist" : "Eminem",
      "created_date" : "Mon, 15 Jan 2018 15:20:18 +0200",
      "updated_date" : "Mon, 15 Jan 2018 15:20:18 +0200",
      "_links" : {
        "self" : {
          "href" : "http://127.0.0.1:36661/api/albums/46"
        },
        "albums" : {
          "href" : "http://127.0.0.1:36661/api/albums"
        },
        "playlists" : {
          "href" : "http://127.0.0.1:36661/api/albums/46/playlists"
        },
        "artist" : {
          "href" : "http://127.0.0.1:36661/api/albums/46/artist"
        }
      }
    }, {
      "id" : 47,
      "title" : "Encore",
      "year" : "2004",
      "artist" : "Eminem",
      "created_date" : "Mon, 15 Jan 2018 15:20:18 +0200",
      "updated_date" : "Mon, 15 Jan 2018 15:20:18 +0200",
      "_links" : {
        "self" : {
          "href" : "http://127.0.0.1:36661/api/albums/47"
        },
        "albums" : {
          "href" : "http://127.0.0.1:36661/api/albums"
        },
        "playlists" : {
          "href" : "http://127.0.0.1:36661/api/albums/47/playlists"
        },
        "artist" : {
          "href" : "http://127.0.0.1:36661/api/albums/47/artist"
        }
      }
    }, {
      "id" : 48,
      "title" : "Infinite",
      "year" : "1996",
      "artist" : "Eminem",
      "created_date" : "Mon, 15 Jan 2018 15:20:18 +0200",
      "updated_date" : "Mon, 15 Jan 2018 15:20:18 +0200",
      "_links" : {
        "self" : {
          "href" : "http://127.0.0.1:36661/api/albums/48"
        },
        "albums" : {
          "href" : "http://127.0.0.1:36661/api/albums"
        },
        "playlists" : {
          "href" : "http://127.0.0.1:36661/api/albums/48/playlists"
        },
        "artist" : {
          "href" : "http://127.0.0.1:36661/api/albums/48/artist"
        }
      }
    }, {
      "id" : 49,
      "title" : "Next To Nothing",
      "year" : "2014",
      "artist" : "Rittz",
      "created_date" : "Mon, 15 Jan 2018 15:20:18 +0200",
      "updated_date" : "Mon, 15 Jan 2018 15:20:18 +0200",
      "_links" : {
        "self" : {
          "href" : "http://127.0.0.1:36661/api/albums/49"
        },
        "albums" : {
          "href" : "http://127.0.0.1:36661/api/albums"
        },
        "playlists" : {
          "href" : "http://127.0.0.1:36661/api/albums/49/playlists"
        },
        "artist" : {
          "href" : "http://127.0.0.1:36661/api/albums/49/artist"
        }
      }
    }, {
      "id" : 50,
      "title" : "Top Of The Line",
      "year" : "2016",
      "artist" : "Rittz",
      "created_date" : "Mon, 15 Jan 2018 15:20:18 +0200",
      "updated_date" : "Mon, 15 Jan 2018 15:20:18 +0200",
      "_links" : {
        "self" : {
          "href" : "http://127.0.0.1:36661/api/albums/50"
        },
        "albums" : {
          "href" : "http://127.0.0.1:36661/api/albums"
        },
        "playlists" : {
          "href" : "http://127.0.0.1:36661/api/albums/50/playlists"
        },
        "artist" : {
          "href" : "http://127.0.0.1:36661/api/albums/50/artist"
        }
      }
    }, {
      "id" : 51,
      "title" : "Last Call",
      "year" : "2017",
      "artist" : "Rittz",
      "created_date" : "Mon, 15 Jan 2018 15:20:18 +0200",
      "updated_date" : "Mon, 15 Jan 2018 15:20:18 +0200",
      "_links" : {
        "self" : {
          "href" : "http://127.0.0.1:36661/api/albums/51"
        },
        "albums" : {
          "href" : "http://127.0.0.1:36661/api/albums"
        },
        "playlists" : {
          "href" : "http://127.0.0.1:36661/api/albums/51/playlists"
        },
        "artist" : {
          "href" : "http://127.0.0.1:36661/api/albums/51/artist"
        }
      }
    } ]
  },
  "_links" : {
    "self" : {
      "href" : "http://127.0.0.1:36661/api/playlists/12/albums/?page=0&amp;size=20"
    },
    "artists" : {
      "href" : "http://127.0.0.1:36661/api/artists"
    },
    "playlists" : {
      "href" : "http://127.0.0.1:36661/api/playlists"
    },
    "home" : {
      "href" : "http://127.0.0.1:36661/api/"
    }
  },
  "page" : {
    "size" : 20,
    "totalElements" : 11,
    "totalPages" : 1,
    "number" : 0
  }
}

18:13:10.262 DEBUG - response time in milliseconds: 127
18:13:10.264 INFO  - response:
{
  "_embedded": {
    "albumResources": [
      {
        "id": 41,
        "title": "Trial By Fire",
        "year": "2017",
        "artist": "Yelawolf",
        "created_date": "Mon, 15 Jan 2018 15:20:18 +0200",
        "updated_date": "Mon, 15 Jan 2018 15:20:18 +0200",
        "_links": {
          "self": {
            "href": "http:\/\/127.0.0.1:36661\/api\/albums\/41"
          },
          "albums": {
            "href": "http:\/\/127.0.0.1:36661\/api\/albums"
          },
          "playlists": {
            "href": "http:\/\/127.0.0.1:36661\/api\/albums\/41\/playlists"
          },
          "artist": {
            "href": "http:\/\/127.0.0.1:36661\/api\/albums\/41\/artist"
          }
        }
      },
      {
        "id": 42,
        "title": "Trunk Muzik",
        "year": "2010",
        "artist": "Yelawolf",
        "created_date": "Mon, 15 Jan 2018 15:20:18 +0200",
        "updated_date": "Mon, 15 Jan 2018 15:20:18 +0200",
        "_links": {
          "self": {
            "href": "http:\/\/127.0.0.1:36661\/api\/albums\/42"
          },
          "albums": {
            "href": "http:\/\/127.0.0.1:36661\/api\/albums"
          },
          "playlists": {
            "href": "http:\/\/127.0.0.1:36661\/api\/albums\/42\/playlists"
          },
          "artist": {
            "href": "http:\/\/127.0.0.1:36661\/api\/albums\/42\/artist"
          }
        }
      },
      {
        "id": 43,
        "title": "Radioactive",
        "year": "2011",
        "artist": "Yelawolf",
        "created_date": "Mon, 15 Jan 2018 15:20:18 +0200",
        "updated_date": "Mon, 15 Jan 2018 15:20:18 +0200",
        "_links": {
          "self": {
            "href": "http:\/\/127.0.0.1:36661\/api\/albums\/43"
          },
          "albums": {
            "href": "http:\/\/127.0.0.1:36661\/api\/albums"
          },
          "playlists": {
            "href": "http:\/\/127.0.0.1:36661\/api\/albums\/43\/playlists"
          },
          "artist": {
            "href": "http:\/\/127.0.0.1:36661\/api\/albums\/43\/artist"
          }
        }
      },
      {
        "id": 44,
        "title": "Lovestory",
        "year": "2015",
        "artist": "Yelawolf",
        "created_date": "Mon, 15 Jan 2018 15:20:18 +0200",
        "updated_date": "Mon, 15 Jan 2018 15:20:18 +0200",
        "_links": {
          "self": {
            "href": "http:\/\/127.0.0.1:36661\/api\/albums\/44"
          },
          "albums": {
            "href": "http:\/\/127.0.0.1:36661\/api\/albums"
          },
          "playlists": {
            "href": "http:\/\/127.0.0.1:36661\/api\/albums\/44\/playlists"
          },
          "artist": {
            "href": "http:\/\/127.0.0.1:36661\/api\/albums\/44\/artist"
          }
        }
      },
      {
        "id": 45,
        "title": "The Eminem Show",
        "year": "2002",
        "artist": "Eminem",
        "created_date": "Mon, 15 Jan 2018 15:20:18 +0200",
        "updated_date": "Mon, 15 Jan 2018 15:20:18 +0200",
        "_links": {
          "self": {
            "href": "http:\/\/127.0.0.1:36661\/api\/albums\/45"
          },
          "albums": {
            "href": "http:\/\/127.0.0.1:36661\/api\/albums"
          },
          "playlists": {
            "href": "http:\/\/127.0.0.1:36661\/api\/albums\/45\/playlists"
          },
          "artist": {
            "href": "http:\/\/127.0.0.1:36661\/api\/albums\/45\/artist"
          }
        }
      },
      {
        "id": 46,
        "title": "The Marshall Mathers LP",
        "year": "2000",
        "artist": "Eminem",
        "created_date": "Mon, 15 Jan 2018 15:20:18 +0200",
        "updated_date": "Mon, 15 Jan 2018 15:20:18 +0200",
        "_links": {
          "self": {
            "href": "http:\/\/127.0.0.1:36661\/api\/albums\/46"
          },
          "albums": {
            "href": "http:\/\/127.0.0.1:36661\/api\/albums"
          },
          "playlists": {
            "href": "http:\/\/127.0.0.1:36661\/api\/albums\/46\/playlists"
          },
          "artist": {
            "href": "http:\/\/127.0.0.1:36661\/api\/albums\/46\/artist"
          }
        }
      },
      {
        "id": 47,
        "title": "Encore",
        "year": "2004",
        "artist": "Eminem",
        "created_date": "Mon, 15 Jan 2018 15:20:18 +0200",
        "updated_date": "Mon, 15 Jan 2018 15:20:18 +0200",
        "_links": {
          "self": {
            "href": "http:\/\/127.0.0.1:36661\/api\/albums\/47"
          },
          "albums": {
            "href": "http:\/\/127.0.0.1:36661\/api\/albums"
          },
          "playlists": {
            "href": "http:\/\/127.0.0.1:36661\/api\/albums\/47\/playlists"
          },
          "artist": {
            "href": "http:\/\/127.0.0.1:36661\/api\/albums\/47\/artist"
          }
        }
      },
      {
        "id": 48,
        "title": "Infinite",
        "year": "1996",
        "artist": "Eminem",
        "created_date": "Mon, 15 Jan 2018 15:20:18 +0200",
        "updated_date": "Mon, 15 Jan 2018 15:20:18 +0200",
        "_links": {
          "self": {
            "href": "http:\/\/127.0.0.1:36661\/api\/albums\/48"
          },
          "albums": {
            "href": "http:\/\/127.0.0.1:36661\/api\/albums"
          },
          "playlists": {
            "href": "http:\/\/127.0.0.1:36661\/api\/albums\/48\/playlists"
          },
          "artist": {
            "href": "http:\/\/127.0.0.1:36661\/api\/albums\/48\/artist"
          }
        }
      },
      {
        "id": 49,
        "title": "Next To Nothing",
        "year": "2014",
        "artist": "Rittz",
        "created_date": "Mon, 15 Jan 2018 15:20:18 +0200",
        "updated_date": "Mon, 15 Jan 2018 15:20:18 +0200",
        "_links": {
          "self": {
            "href": "http:\/\/127.0.0.1:36661\/api\/albums\/49"
          },
          "albums": {
            "href": "http:\/\/127.0.0.1:36661\/api\/albums"
          },
          "playlists": {
            "href": "http:\/\/127.0.0.1:36661\/api\/albums\/49\/playlists"
          },
          "artist": {
            "href": "http:\/\/127.0.0.1:36661\/api\/albums\/49\/artist"
          }
        }
      },
      {
        "id": 50,
        "title": "Top Of The Line",
        "year": "2016",
        "artist": "Rittz",
        "created_date": "Mon, 15 Jan 2018 15:20:18 +0200",
        "updated_date": "Mon, 15 Jan 2018 15:20:18 +0200",
        "_links": {
          "self": {
            "href": "http:\/\/127.0.0.1:36661\/api\/albums\/50"
          },
          "albums": {
            "href": "http:\/\/127.0.0.1:36661\/api\/albums"
          },
          "playlists": {
            "href": "http:\/\/127.0.0.1:36661\/api\/albums\/50\/playlists"
          },
          "artist": {
            "href": "http:\/\/127.0.0.1:36661\/api\/albums\/50\/artist"
          }
        }
      },
      {
        "id": 51,
        "title": "Last Call",
        "year": "2017",
        "artist": "Rittz",
        "created_date": "Mon, 15 Jan 2018 15:20:18 +0200",
        "updated_date": "Mon, 15 Jan 2018 15:20:18 +0200",
        "_links": {
          "self": {
            "href": "http:\/\/127.0.0.1:36661\/api\/albums\/51"
          },
          "albums": {
            "href": "http:\/\/127.0.0.1:36661\/api\/albums"
          },
          "playlists": {
            "href": "http:\/\/127.0.0.1:36661\/api\/albums\/51\/playlists"
          },
          "artist": {
            "href": "http:\/\/127.0.0.1:36661\/api\/albums\/51\/artist"
          }
        }
      }
    ]
  },
  "_links": {
    "self": {
      "href": "http:\/\/127.0.0.1:36661\/api\/playlists\/12\/albums\/?page=0&amp;size=20"
    },
    "artists": {
      "href": "http:\/\/127.0.0.1:36661\/api\/artists"
    },
    "playlists": {
      "href": "http:\/\/127.0.0.1:36661\/api\/playlists"
    },
    "home": {
      "href": "http:\/\/127.0.0.1:36661\/api\/"
    }
  },
  "page": {
    "size": 20,
    "totalElements": 11,
    "totalPages": 1,
    "number": 0
  }
}

</pre>
<div class="step-row">
<div class="step-cell">Then status 200</div>
<div class="time-cell">0.00016</div>
</div>
<div class="step-row">
<div class="step-cell">And match response._embedded.albumResources == '#[] albumStructure'</div>
<div class="time-cell">0.045796</div>
</div>
<div class="step-row">
<div class="step-cell">And match response._links == linksStructure</div>
<div class="time-cell">0.000384</div>
</div>
<div class="step-row">
<div class="step-cell">And match response.page == pageStructure</div>
<div class="time-cell">0.000301</div>
</div>
</div>
</div>
</div>
</body>
</html>

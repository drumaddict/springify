<!DOCTYPE html>
<html>
<head>
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>springifyapi/genre/associations.feature</title>
<style>body { font-family: monospace, monospace; font-size: small; } table { border-collapse: collapse; } table td { border: 1px solid gray; padding: 0.1em 0.2em; } .scenario-heading { background-color: #F5F28F; padding: 0.2em 0.5em; border-bottom: 1px solid gray; } .scenario-name { font-weight: bold; } .scenario { border: 1px solid gray; margin-bottom: 1em; } .scenario-steps { padding-left: 0.2em; } .scenario-steps-nested { padding-left: 2em; } .step-row { margin: 0.2em 0; } .step-cell { background-color: #92DD96; display: inline-block; width: 85%; padding: 0.2em 0.5em; } .time-cell { background-color: #92DD96; display: inline-block; width: 10%; padding: 0.2em 0.5em; } .failed { background-color: #F2928C; } .skipped { background-color: #8AF; }</style>
</head>
<body>
<div>
<div class="scenario">
<div class="scenario-heading">
<span class="scenario-keyword">Scenario: </span><span class="scenario-name">Verify newly created genre</span>
</div>
<div class="scenario-steps">
<div class="step-row">
<div class="step-cell">* def postData = {}</div>
<div class="time-cell">3.761735</div>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">* call classpath:springifyapi/common/setHeaders.feature</div>
<div class="time-cell">0</div>
</div>
<pre>{
  "config": {
    "user": "admin",
    "baseUrl": "http:\/\/127.0.0.1:35051\/api\/"
  }
}
</pre>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">* print 'Config passed: ', karate.pretty(config)</div>
<div class="time-cell">0</div>
</div>
<pre>01:21:08.571 INFO  - [print] Config passed:  {
  "user": "admin",
  "baseUrl": "http:\/\/127.0.0.1:35051\/api\/"
}

</pre>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">* def creds = read('classpath:springifyapi/data/'+ config.user + '.json')</div>
<div class="time-cell">0</div>
</div>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">* url baseUrl</div>
<div class="time-cell">0</div>
</div>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">Given url baseUrl</div>
<div class="time-cell">0</div>
</div>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">And path 'login'</div>
<div class="time-cell">0</div>
</div>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">And request creds</div>
<div class="time-cell">0</div>
</div>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">When method post</div>
<div class="time-cell">0</div>
</div>
<pre>01:21:08.632 INFO  - request:
{
  "password": "11111111",
  "username": "admin"
}

01:21:09.200 DEBUG - 
1 &gt; POST http://127.0.0.1:35051/api/login
1 &gt; Accept-Encoding: gzip,deflate
1 &gt; Connection: Keep-Alive
1 &gt; Content-Length: 42
1 &gt; Content-Type: application/json
1 &gt; Host: 127.0.0.1:35051
1 &gt; User-Agent: Apache-HttpClient/4.5.3 (Java/1.8.0_151)
{"password":"11111111","username":"admin"}

01:21:10.753 DEBUG - 
1 &lt; 200
1 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
1 &lt; Content-Type: application/hal+json;charset=UTF-8
1 &lt; Date: Sun, 14 Jan 2018 23:21:10 GMT
1 &lt; Expires: 0
1 &lt; Pragma: no-cache
1 &lt; Token: eyJhbGciOiJIUzUxMiJ9.eyJhdWQiOiJTcHJpbmdpZnkgVXNlcnMiLCJqdGkiOiJhZG1pbkBzcHJpbmdpZnkuY29tIiwic3ViIjoiYWRtaW4iLCJleHAiOjE1MTY2NzA0NzAsImlzcyI6ImNvbS5zcnBpbmdpZnkua2FiYXNha2FsaXMifQ.IgEZ6OPP2n9ir3PzE8eWQF8yojLt-HoBrwdbIf5VnPLqr3oxCnBI7RJrx26YCuY78Mg6mrQt24hOGjNMd4SykQ
1 &lt; Transfer-Encoding: chunked
1 &lt; X-Application-Context: application:0
1 &lt; X-Content-Type-Options: nosniff
1 &lt; X-Frame-Options: DENY
1 &lt; X-XSS-Protection: 1; mode=block
{
  "username" : "admin",
  "email" : "admin@springify.com",
  "password" : "$2a$10$UClj/ChiXzRXcT6HvSdOpePZFzTIJs9CYDagygovYbM0TDzMRe7Di",
  "jwtToken" : "eyJhbGciOiJIUzUxMiJ9.eyJhdWQiOiJTcHJpbmdpZnkgVXNlcnMiLCJqdGkiOiJhZG1pbkBzcHJpbmdpZnkuY29tIiwic3ViIjoiYWRtaW4iLCJleHAiOjE1MTY2NzA0NzAsImlzcyI6ImNvbS5zcnBpbmdpZnkua2FiYXNha2FsaXMifQ.IgEZ6OPP2n9ir3PzE8eWQF8yojLt-HoBrwdbIf5VnPLqr3oxCnBI7RJrx26YCuY78Mg6mrQt24hOGjNMd4SykQ",
  "created_date" : "Sat, 13 Jan 2018 23:47:57 +0200",
  "updated_date" : "Sat, 13 Jan 2018 23:47:57 +0200"
}

01:21:10.755 DEBUG - response time in milliseconds: 2112
01:21:10.756 INFO  - response:
{
  "username": "admin",
  "email": "admin@springify.com",
  "password": "$2a$10$UClj\/ChiXzRXcT6HvSdOpePZFzTIJs9CYDagygovYbM0TDzMRe7Di",
  "jwtToken": "eyJhbGciOiJIUzUxMiJ9.eyJhdWQiOiJTcHJpbmdpZnkgVXNlcnMiLCJqdGkiOiJhZG1pbkBzcHJpbmdpZnkuY29tIiwic3ViIjoiYWRtaW4iLCJleHAiOjE1MTY2NzA0NzAsImlzcyI6ImNvbS5zcnBpbmdpZnkua2FiYXNha2FsaXMifQ.IgEZ6OPP2n9ir3PzE8eWQF8yojLt-HoBrwdbIf5VnPLqr3oxCnBI7RJrx26YCuY78Mg6mrQt24hOGjNMd4SykQ",
  "created_date": "Sat, 13 Jan 2018 23:47:57 +0200",
  "updated_date": "Sat, 13 Jan 2018 23:47:57 +0200"
}

</pre>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">Then status 200</div>
<div class="time-cell">0</div>
</div>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">* def jwtToken = response.jwtToken</div>
<div class="time-cell">0</div>
</div>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">* print 'jwtToken OK: ', karate.pretty(jwtToken)</div>
<div class="time-cell">0</div>
</div>
<pre>01:21:10.789 INFO  - [print] jwtToken OK:  eyJhbGciOiJIUzUxMiJ9.eyJhdWQiOiJTcHJpbmdpZnkgVXNlcnMiLCJqdGkiOiJhZG1pbkBzcHJpbmdpZnkuY29tIiwic3ViIjoiYWRtaW4iLCJleHAiOjE1MTY2NzA0NzAsImlzcyI6ImNvbS5zcnBpbmdpZnkua2FiYXNha2FsaXMifQ.IgEZ6OPP2n9ir3PzE8eWQF8yojLt-HoBrwdbIf5VnPLqr3oxCnBI7RJrx26YCuY78Mg6mrQt24hOGjNMd4SykQ
</pre>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">* def defaultHeaders =  callonce read('classpath:springifyapi/common/HeadersFun.js')  { jwtToken:  '#(jwtToken)' }</div>
<div class="time-cell">0</div>
</div>
<pre>01:21:10.849 INFO  - AUTH {jwtToken=eyJhbGciOiJIUzUxMiJ9.eyJhdWQiOiJTcHJpbmdpZnkgVXNlcnMiLCJqdGkiOiJhZG1pbkBzcHJpbmdpZnkuY29tIiwic3ViIjoiYWRtaW4iLCJleHAiOjE1MTY2NzA0NzAsImlzcyI6ImNvbS5zcnBpbmdpZnkua2FiYXNha2FsaXMifQ.IgEZ6OPP2n9ir3PzE8eWQF8yojLt-HoBrwdbIf5VnPLqr3oxCnBI7RJrx26YCuY78Mg6mrQt24hOGjNMd4SykQ} 
01:21:10.861 DEBUG - cached callonce: read('classpath:springifyapi/common/HeadersFun.js')
</pre>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">* configure headers = defaultHeaders</div>
<div class="time-cell">0</div>
</div>
</div>
<div class="step-row">
<div class="step-cell">* def artist_payload = {name: 'Motley Crue', country: 'USA'}</div>
<div class="time-cell">0.000318</div>
</div>
<div class="step-row">
<div class="step-cell">* set postData.path = 'artists'</div>
<div class="time-cell">0.01208</div>
</div>
<div class="step-row">
<div class="step-cell">* set postData.payload =  artist_payload</div>
<div class="time-cell">0.000207</div>
</div>
<div class="step-row">
<div class="step-cell">* def post = callonce read('classpath:springifyapi/common/genericPost.feature') { postData: '#(postData)' }</div>
<div class="time-cell">0.647101</div>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">* call classpath:springifyapi/common/genericPost.feature</div>
<div class="time-cell">0</div>
</div>
<pre>{
  "postData": {
    "path": "artists",
    "payload": {
      "name": "Motley Crue",
      "country": "USA"
    }
  }
}
</pre>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">* print 'Starting generic post with postData', karate.pretty(postData)</div>
<div class="time-cell">0</div>
</div>
<pre>01:21:10.987 INFO  - [print] Starting generic post with postData {
  "path": "artists",
  "payload": {
    "name": "Motley Crue",
    "country": "USA"
  }
}

</pre>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">* url baseUrl</div>
<div class="time-cell">0</div>
</div>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">* def genericPostResult = {}</div>
<div class="time-cell">0</div>
</div>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">Given path postData.path</div>
<div class="time-cell">0</div>
</div>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">And request postData.payload</div>
<div class="time-cell">0</div>
</div>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">When method post</div>
<div class="time-cell">0</div>
</div>
<pre>01:21:10.990 INFO  - request:
{
  "name": "Motley Crue",
  "country": "USA"
}

01:21:10.992 DEBUG - 
1 &gt; POST http://127.0.0.1:35051/api/artists
1 &gt; Accept-Encoding: gzip,deflate
1 &gt; Authorization: Bearer eyJhbGciOiJIUzUxMiJ9.eyJhdWQiOiJTcHJpbmdpZnkgVXNlcnMiLCJqdGkiOiJhZG1pbkBzcHJpbmdpZnkuY29tIiwic3ViIjoiYWRtaW4iLCJleHAiOjE1MTY2NzA0NzAsImlzcyI6ImNvbS5zcnBpbmdpZnkua2FiYXNha2FsaXMifQ.IgEZ6OPP2n9ir3PzE8eWQF8yojLt-HoBrwdbIf5VnPLqr3oxCnBI7RJrx26YCuY78Mg6mrQt24hOGjNMd4SykQ
1 &gt; Connection: Keep-Alive
1 &gt; Content-Length: 38
1 &gt; Content-Type: application/json
1 &gt; Host: 127.0.0.1:35051
1 &gt; User-Agent: Apache-HttpClient/4.5.3 (Java/1.8.0_151)
{"name":"Motley Crue","country":"USA"}

01:21:11.467 DEBUG - 
1 &lt; 201
1 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
1 &lt; Content-Type: application/hal+json;charset=UTF-8
1 &lt; Date: Sun, 14 Jan 2018 23:21:10 GMT
1 &lt; Expires: 0
1 &lt; Location: http://127.0.0.1:35051/api/artists/1043
1 &lt; Pragma: no-cache
1 &lt; Set-Cookie: JSESSIONID=8CB1842EAAEA30B588C85467BFE7F01C; Path=/api; HttpOnly
1 &lt; Transfer-Encoding: chunked
1 &lt; X-Application-Context: application:0
1 &lt; X-Content-Type-Options: nosniff
1 &lt; X-Frame-Options: DENY
1 &lt; X-XSS-Protection: 1; mode=block
{
  "id" : 1043,
  "name" : "Motley Crue",
  "country" : "USA",
  "albums_count" : 0,
  "created_date" : "Mon, 15 Jan 2018 01:21:11 +0200",
  "updated_date" : "Mon, 15 Jan 2018 01:21:11 +0200",
  "_links" : {
    "self" : {
      "href" : "http://127.0.0.1:35051/api/artists/1043"
    },
    "artists" : {
      "href" : "http://127.0.0.1:35051/api/artists"
    },
    "albums" : {
      "href" : "http://127.0.0.1:35051/api/artists/1043/albums"
    },
    "genre" : {
      "href" : "http://127.0.0.1:35051/api/artists/1043/genre"
    }
  }
}

01:21:11.468 DEBUG - response time in milliseconds: 477
01:21:11.469 INFO  - response:
{
  "id": 1043,
  "name": "Motley Crue",
  "country": "USA",
  "albums_count": 0,
  "created_date": "Mon, 15 Jan 2018 01:21:11 +0200",
  "updated_date": "Mon, 15 Jan 2018 01:21:11 +0200",
  "_links": {
    "self": {
      "href": "http:\/\/127.0.0.1:35051\/api\/artists\/1043"
    },
    "artists": {
      "href": "http:\/\/127.0.0.1:35051\/api\/artists"
    },
    "albums": {
      "href": "http:\/\/127.0.0.1:35051\/api\/artists\/1043\/albums"
    },
    "genre": {
      "href": "http:\/\/127.0.0.1:35051\/api\/artists\/1043\/genre"
    }
  }
}

</pre>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">Then status 201</div>
<div class="time-cell">0</div>
</div>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">And set genericPostResult.location = responseHeaders['Location'][0]</div>
<div class="time-cell">0</div>
</div>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">And set genericPostResult.response = response</div>
<div class="time-cell">0</div>
</div>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">* print 'Setting GenericPostResult', karate.pretty(genericPostResult)</div>
<div class="time-cell">0</div>
</div>
<pre>01:21:11.539 INFO  - [print] Setting GenericPostResult {
  "location": "http:\/\/127.0.0.1:35051\/api\/artists\/1043",
  "response": {
    "id": 1043,
    "name": "Motley Crue",
    "country": "USA",
    "albums_count": 0,
    "created_date": "Mon, 15 Jan 2018 01:21:11 +0200",
    "updated_date": "Mon, 15 Jan 2018 01:21:11 +0200",
    "_links": {
      "self": {
        "href": "http:\/\/127.0.0.1:35051\/api\/artists\/1043"
      },
      "artists": {
        "href": "http:\/\/127.0.0.1:35051\/api\/artists"
      },
      "albums": {
        "href": "http:\/\/127.0.0.1:35051\/api\/artists\/1043\/albums"
      },
      "genre": {
        "href": "http:\/\/127.0.0.1:35051\/api\/artists\/1043\/genre"
      }
    }
  }
}

</pre>
</div>
<div class="step-row">
<div class="step-cell">* def postResponse = post.genericPostResult.response</div>
<div class="time-cell">0.000456</div>
</div>
<div class="step-row">
<div class="step-cell">* def location = post.genericPostResult.location</div>
<div class="time-cell">0.000384</div>
</div>
<div class="step-row">
<div class="step-cell">* print 'postRe', karate.pretty(postResponse)</div>
<div class="time-cell">0.026135</div>
</div>
<pre>01:21:11.568 INFO  - [print] postRe {
  "id": 1043,
  "name": "Motley Crue",
  "country": "USA",
  "albums_count": 0,
  "created_date": "Mon, 15 Jan 2018 01:21:11 +0200",
  "updated_date": "Mon, 15 Jan 2018 01:21:11 +0200",
  "_links": {
    "self": {
      "href": "http:\/\/127.0.0.1:35051\/api\/artists\/1043"
    },
    "artists": {
      "href": "http:\/\/127.0.0.1:35051\/api\/artists"
    },
    "albums": {
      "href": "http:\/\/127.0.0.1:35051\/api\/artists\/1043\/albums"
    },
    "genre": {
      "href": "http:\/\/127.0.0.1:35051\/api\/artists\/1043\/genre"
    }
  }
}

</pre>
<div class="step-row">
<div class="step-cell">Given url location</div>
<div class="time-cell">0.000101</div>
</div>
<div class="step-row">
<div class="step-cell">When method get</div>
<div class="time-cell">0.080598</div>
</div>
<pre>01:21:11.571 DEBUG - 
1 &gt; GET http://127.0.0.1:35051/api/artists/1043
1 &gt; Accept-Encoding: gzip,deflate
1 &gt; Authorization: Bearer eyJhbGciOiJIUzUxMiJ9.eyJhdWQiOiJTcHJpbmdpZnkgVXNlcnMiLCJqdGkiOiJhZG1pbkBzcHJpbmdpZnkuY29tIiwic3ViIjoiYWRtaW4iLCJleHAiOjE1MTY2NzA0NzAsImlzcyI6ImNvbS5zcnBpbmdpZnkua2FiYXNha2FsaXMifQ.IgEZ6OPP2n9ir3PzE8eWQF8yojLt-HoBrwdbIf5VnPLqr3oxCnBI7RJrx26YCuY78Mg6mrQt24hOGjNMd4SykQ
1 &gt; Connection: Keep-Alive
1 &gt; Content-Type: application/json
1 &gt; Host: 127.0.0.1:35051
1 &gt; User-Agent: Apache-HttpClient/4.5.3 (Java/1.8.0_151)

01:21:11.648 DEBUG - 
1 &lt; 200
1 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
1 &lt; Content-Type: application/hal+json;charset=UTF-8
1 &lt; Date: Sun, 14 Jan 2018 23:21:10 GMT
1 &lt; Expires: 0
1 &lt; Pragma: no-cache
1 &lt; Set-Cookie: JSESSIONID=A1883A6F8609E862519956ED68BFB371; Path=/api; HttpOnly
1 &lt; Transfer-Encoding: chunked
1 &lt; X-Application-Context: application:0
1 &lt; X-Content-Type-Options: nosniff
1 &lt; X-Frame-Options: DENY
1 &lt; X-XSS-Protection: 1; mode=block
{
  "id" : 1043,
  "name" : "Motley Crue",
  "country" : "USA",
  "albums_count" : 0,
  "created_date" : "Mon, 15 Jan 2018 01:21:11 +0200",
  "updated_date" : "Mon, 15 Jan 2018 01:21:11 +0200",
  "_links" : {
    "self" : {
      "href" : "http://127.0.0.1:35051/api/artists/1043"
    },
    "artists" : {
      "href" : "http://127.0.0.1:35051/api/artists"
    },
    "albums" : {
      "href" : "http://127.0.0.1:35051/api/artists/1043/albums"
    },
    "genre" : {
      "href" : "http://127.0.0.1:35051/api/artists/1043/genre"
    }
  }
}

01:21:11.649 DEBUG - response time in milliseconds: 80
01:21:11.649 INFO  - response:
{
  "id": 1043,
  "name": "Motley Crue",
  "country": "USA",
  "albums_count": 0,
  "created_date": "Mon, 15 Jan 2018 01:21:11 +0200",
  "updated_date": "Mon, 15 Jan 2018 01:21:11 +0200",
  "_links": {
    "self": {
      "href": "http:\/\/127.0.0.1:35051\/api\/artists\/1043"
    },
    "artists": {
      "href": "http:\/\/127.0.0.1:35051\/api\/artists"
    },
    "albums": {
      "href": "http:\/\/127.0.0.1:35051\/api\/artists\/1043\/albums"
    },
    "genre": {
      "href": "http:\/\/127.0.0.1:35051\/api\/artists\/1043\/genre"
    }
  }
}

</pre>
<div class="step-row">
<div class="step-cell">Then status 200</div>
<div class="time-cell">0.000176</div>
</div>
<div class="step-row">
<div class="step-cell">And match response contains { name: 'Motley Crue' }</div>
<div class="time-cell">0.001709</div>
</div>
</div>
</div>
<div class="scenario">
<div class="scenario-heading">
<span class="scenario-keyword">Scenario: </span><span class="scenario-name">Associate the newly created artist with genre 'Rock'</span>
</div>
<div class="scenario-steps">
<div class="step-row">
<div class="step-cell">* def postData = {}</div>
<div class="time-cell">0.494338</div>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">* call classpath:springifyapi/common/setHeaders.feature</div>
<div class="time-cell">0</div>
</div>
<pre>{
  "config": {
    "user": "admin",
    "baseUrl": "http:\/\/127.0.0.1:35051\/api\/"
  }
}
</pre>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">* print 'Config passed: ', karate.pretty(config)</div>
<div class="time-cell">0</div>
</div>
<pre>01:21:11.893 INFO  - [print] Config passed:  {
  "user": "admin",
  "baseUrl": "http:\/\/127.0.0.1:35051\/api\/"
}

</pre>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">* def creds = read('classpath:springifyapi/data/'+ config.user + '.json')</div>
<div class="time-cell">0</div>
</div>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">* url baseUrl</div>
<div class="time-cell">0</div>
</div>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">Given url baseUrl</div>
<div class="time-cell">0</div>
</div>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">And path 'login'</div>
<div class="time-cell">0</div>
</div>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">And request creds</div>
<div class="time-cell">0</div>
</div>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">When method post</div>
<div class="time-cell">0</div>
</div>
<pre>01:21:11.925 INFO  - request:
{
  "password": "11111111",
  "username": "admin"
}

01:21:11.927 DEBUG - 
1 &gt; POST http://127.0.0.1:35051/api/login
1 &gt; Accept-Encoding: gzip,deflate
1 &gt; Connection: Keep-Alive
1 &gt; Content-Length: 42
1 &gt; Content-Type: application/json
1 &gt; Host: 127.0.0.1:35051
1 &gt; User-Agent: Apache-HttpClient/4.5.3 (Java/1.8.0_151)
{"password":"11111111","username":"admin"}

01:21:12.133 DEBUG - 
1 &lt; 200
1 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
1 &lt; Content-Type: application/hal+json;charset=UTF-8
1 &lt; Date: Sun, 14 Jan 2018 23:21:12 GMT
1 &lt; Expires: 0
1 &lt; Pragma: no-cache
1 &lt; Token: eyJhbGciOiJIUzUxMiJ9.eyJhdWQiOiJTcHJpbmdpZnkgVXNlcnMiLCJqdGkiOiJhZG1pbkBzcHJpbmdpZnkuY29tIiwic3ViIjoiYWRtaW4iLCJleHAiOjE1MTY2NzA0NzIsImlzcyI6ImNvbS5zcnBpbmdpZnkua2FiYXNha2FsaXMifQ.JfLUh0LgEV9MxAXFpA9kMn0KkhxQmk6KtZGA3kJYtFOvAwp0TDMyEWnkoa-Ccs3GkE258J7XssaguNpi5NC_-g
1 &lt; Transfer-Encoding: chunked
1 &lt; X-Application-Context: application:0
1 &lt; X-Content-Type-Options: nosniff
1 &lt; X-Frame-Options: DENY
1 &lt; X-XSS-Protection: 1; mode=block
{
  "username" : "admin",
  "email" : "admin@springify.com",
  "password" : "$2a$10$UClj/ChiXzRXcT6HvSdOpePZFzTIJs9CYDagygovYbM0TDzMRe7Di",
  "jwtToken" : "eyJhbGciOiJIUzUxMiJ9.eyJhdWQiOiJTcHJpbmdpZnkgVXNlcnMiLCJqdGkiOiJhZG1pbkBzcHJpbmdpZnkuY29tIiwic3ViIjoiYWRtaW4iLCJleHAiOjE1MTY2NzA0NzIsImlzcyI6ImNvbS5zcnBpbmdpZnkua2FiYXNha2FsaXMifQ.JfLUh0LgEV9MxAXFpA9kMn0KkhxQmk6KtZGA3kJYtFOvAwp0TDMyEWnkoa-Ccs3GkE258J7XssaguNpi5NC_-g",
  "created_date" : "Sat, 13 Jan 2018 23:47:57 +0200",
  "updated_date" : "Sat, 13 Jan 2018 23:47:57 +0200"
}

01:21:12.134 DEBUG - response time in milliseconds: 208
01:21:12.134 INFO  - response:
{
  "username": "admin",
  "email": "admin@springify.com",
  "password": "$2a$10$UClj\/ChiXzRXcT6HvSdOpePZFzTIJs9CYDagygovYbM0TDzMRe7Di",
  "jwtToken": "eyJhbGciOiJIUzUxMiJ9.eyJhdWQiOiJTcHJpbmdpZnkgVXNlcnMiLCJqdGkiOiJhZG1pbkBzcHJpbmdpZnkuY29tIiwic3ViIjoiYWRtaW4iLCJleHAiOjE1MTY2NzA0NzIsImlzcyI6ImNvbS5zcnBpbmdpZnkua2FiYXNha2FsaXMifQ.JfLUh0LgEV9MxAXFpA9kMn0KkhxQmk6KtZGA3kJYtFOvAwp0TDMyEWnkoa-Ccs3GkE258J7XssaguNpi5NC_-g",
  "created_date": "Sat, 13 Jan 2018 23:47:57 +0200",
  "updated_date": "Sat, 13 Jan 2018 23:47:57 +0200"
}

</pre>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">Then status 200</div>
<div class="time-cell">0</div>
</div>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">* def jwtToken = response.jwtToken</div>
<div class="time-cell">0</div>
</div>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">* print 'jwtToken OK: ', karate.pretty(jwtToken)</div>
<div class="time-cell">0</div>
</div>
<pre>01:21:12.160 INFO  - [print] jwtToken OK:  eyJhbGciOiJIUzUxMiJ9.eyJhdWQiOiJTcHJpbmdpZnkgVXNlcnMiLCJqdGkiOiJhZG1pbkBzcHJpbmdpZnkuY29tIiwic3ViIjoiYWRtaW4iLCJleHAiOjE1MTY2NzA0NzIsImlzcyI6ImNvbS5zcnBpbmdpZnkua2FiYXNha2FsaXMifQ.JfLUh0LgEV9MxAXFpA9kMn0KkhxQmk6KtZGA3kJYtFOvAwp0TDMyEWnkoa-Ccs3GkE258J7XssaguNpi5NC_-g
</pre>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">* def defaultHeaders =  callonce read('classpath:springifyapi/common/HeadersFun.js')  { jwtToken:  '#(jwtToken)' }</div>
<div class="time-cell">0</div>
</div>
<pre>01:21:12.161 DEBUG - callonce cache hit for: read('classpath:springifyapi/common/HeadersFun.js')
</pre>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">* configure headers = defaultHeaders</div>
<div class="time-cell">0</div>
</div>
</div>
<div class="step-row">
<div class="step-cell">* def artist_payload = {name: 'Motley Crue', country: 'USA'}</div>
<div class="time-cell">0.000216</div>
</div>
<div class="step-row">
<div class="step-cell">* set postData.path = 'artists'</div>
<div class="time-cell">0.010836</div>
</div>
<div class="step-row">
<div class="step-cell">* set postData.payload =  artist_payload</div>
<div class="time-cell">0.00027</div>
</div>
<div class="step-row">
<div class="step-cell">* def post = callonce read('classpath:springifyapi/common/genericPost.feature') { postData: '#(postData)' }</div>
<div class="time-cell">0.000302</div>
</div>
<pre>01:21:12.180 DEBUG - callonce cache hit for: read('classpath:springifyapi/common/genericPost.feature')
</pre>
<div class="step-row">
<div class="step-cell">* def postResponse = post.genericPostResult.response</div>
<div class="time-cell">0.000838</div>
</div>
<div class="step-row">
<div class="step-cell">* def location = post.genericPostResult.location</div>
<div class="time-cell">0.000219</div>
</div>
<div class="step-row">
<div class="step-cell">* print 'postRe', karate.pretty(postResponse)</div>
<div class="time-cell">0.0247</div>
</div>
<pre>01:21:12.206 INFO  - [print] postRe {
  "id": 1043,
  "name": "Motley Crue",
  "country": "USA",
  "albums_count": 0,
  "created_date": "Mon, 15 Jan 2018 01:21:11 +0200",
  "updated_date": "Mon, 15 Jan 2018 01:21:11 +0200",
  "_links": {
    "self": {
      "href": "http:\/\/127.0.0.1:35051\/api\/artists\/1043"
    },
    "artists": {
      "href": "http:\/\/127.0.0.1:35051\/api\/artists"
    },
    "albums": {
      "href": "http:\/\/127.0.0.1:35051\/api\/artists\/1043\/albums"
    },
    "genre": {
      "href": "http:\/\/127.0.0.1:35051\/api\/artists\/1043\/genre"
    }
  }
}

</pre>
<div class="step-row">
<div class="step-cell">Given url baseUrl</div>
<div class="time-cell">0.000141</div>
</div>
<div class="step-row">
<div class="step-cell">And path '/genres/1/artists'</div>
<div class="time-cell">0.010554</div>
</div>
<div class="step-row">
<div class="step-cell">And header Content-Type = 'text/uri-list'</div>
<div class="time-cell">0.029036</div>
</div>
<div class="step-row">
<div class="step-cell">And request location</div>
<div class="time-cell">0.000099</div>
</div>
<div class="step-row">
<div class="step-cell">When method put</div>
<div class="time-cell">0.214951</div>
</div>
<pre>01:21:12.249 INFO  - request:
http://127.0.0.1:35051/api/artists/1043
01:21:12.250 DEBUG - 
1 &gt; PUT http://127.0.0.1:35051/api/genres/1/artists
1 &gt; Accept-Encoding: gzip,deflate
1 &gt; Authorization: Bearer eyJhbGciOiJIUzUxMiJ9.eyJhdWQiOiJTcHJpbmdpZnkgVXNlcnMiLCJqdGkiOiJhZG1pbkBzcHJpbmdpZnkuY29tIiwic3ViIjoiYWRtaW4iLCJleHAiOjE1MTY2NzA0NzAsImlzcyI6ImNvbS5zcnBpbmdpZnkua2FiYXNha2FsaXMifQ.IgEZ6OPP2n9ir3PzE8eWQF8yojLt-HoBrwdbIf5VnPLqr3oxCnBI7RJrx26YCuY78Mg6mrQt24hOGjNMd4SykQ
1 &gt; Connection: Keep-Alive
1 &gt; Content-Length: 39
1 &gt; Content-Type: text/uri-list
1 &gt; Host: 127.0.0.1:35051
1 &gt; User-Agent: Apache-HttpClient/4.5.3 (Java/1.8.0_151)
http://127.0.0.1:35051/api/artists/1043

01:21:12.463 DEBUG - 
1 &lt; 204
1 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
1 &lt; Date: Sun, 14 Jan 2018 23:21:12 GMT
1 &lt; Expires: 0
1 &lt; Pragma: no-cache
1 &lt; Set-Cookie: JSESSIONID=8BDF82C9233332C9A2383ABC3A3B691C; Path=/api; HttpOnly
1 &lt; X-Application-Context: application:0
1 &lt; X-Content-Type-Options: nosniff
1 &lt; X-Frame-Options: DENY
1 &lt; X-XSS-Protection: 1; mode=block

01:21:12.463 DEBUG - response time in milliseconds: 214
</pre>
<div class="step-row">
<div class="step-cell">Then status 204</div>
<div class="time-cell">0.000108</div>
</div>
</div>
</div>
<div class="scenario">
<div class="scenario-heading">
<span class="scenario-keyword">Scenario: </span><span class="scenario-name">Verify that the artist has been associated with genre 'Rock'</span>
</div>
<div class="scenario-steps">
<div class="step-row">
<div class="step-cell">* def postData = {}</div>
<div class="time-cell">0.423034</div>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">* call classpath:springifyapi/common/setHeaders.feature</div>
<div class="time-cell">0</div>
</div>
<pre>{
  "config": {
    "user": "admin",
    "baseUrl": "http:\/\/127.0.0.1:35051\/api\/"
  }
}
</pre>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">* print 'Config passed: ', karate.pretty(config)</div>
<div class="time-cell">0</div>
</div>
<pre>01:21:12.619 INFO  - [print] Config passed:  {
  "user": "admin",
  "baseUrl": "http:\/\/127.0.0.1:35051\/api\/"
}

</pre>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">* def creds = read('classpath:springifyapi/data/'+ config.user + '.json')</div>
<div class="time-cell">0</div>
</div>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">* url baseUrl</div>
<div class="time-cell">0</div>
</div>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">Given url baseUrl</div>
<div class="time-cell">0</div>
</div>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">And path 'login'</div>
<div class="time-cell">0</div>
</div>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">And request creds</div>
<div class="time-cell">0</div>
</div>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">When method post</div>
<div class="time-cell">0</div>
</div>
<pre>01:21:12.656 INFO  - request:
{
  "password": "11111111",
  "username": "admin"
}

01:21:12.657 DEBUG - 
1 &gt; POST http://127.0.0.1:35051/api/login
1 &gt; Accept-Encoding: gzip,deflate
1 &gt; Connection: Keep-Alive
1 &gt; Content-Length: 42
1 &gt; Content-Type: application/json
1 &gt; Host: 127.0.0.1:35051
1 &gt; User-Agent: Apache-HttpClient/4.5.3 (Java/1.8.0_151)
{"password":"11111111","username":"admin"}

01:21:12.873 DEBUG - 
1 &lt; 200
1 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
1 &lt; Content-Type: application/hal+json;charset=UTF-8
1 &lt; Date: Sun, 14 Jan 2018 23:21:12 GMT
1 &lt; Expires: 0
1 &lt; Pragma: no-cache
1 &lt; Token: eyJhbGciOiJIUzUxMiJ9.eyJhdWQiOiJTcHJpbmdpZnkgVXNlcnMiLCJqdGkiOiJhZG1pbkBzcHJpbmdpZnkuY29tIiwic3ViIjoiYWRtaW4iLCJleHAiOjE1MTY2NzA0NzIsImlzcyI6ImNvbS5zcnBpbmdpZnkua2FiYXNha2FsaXMifQ.JfLUh0LgEV9MxAXFpA9kMn0KkhxQmk6KtZGA3kJYtFOvAwp0TDMyEWnkoa-Ccs3GkE258J7XssaguNpi5NC_-g
1 &lt; Transfer-Encoding: chunked
1 &lt; X-Application-Context: application:0
1 &lt; X-Content-Type-Options: nosniff
1 &lt; X-Frame-Options: DENY
1 &lt; X-XSS-Protection: 1; mode=block
{
  "username" : "admin",
  "email" : "admin@springify.com",
  "password" : "$2a$10$UClj/ChiXzRXcT6HvSdOpePZFzTIJs9CYDagygovYbM0TDzMRe7Di",
  "jwtToken" : "eyJhbGciOiJIUzUxMiJ9.eyJhdWQiOiJTcHJpbmdpZnkgVXNlcnMiLCJqdGkiOiJhZG1pbkBzcHJpbmdpZnkuY29tIiwic3ViIjoiYWRtaW4iLCJleHAiOjE1MTY2NzA0NzIsImlzcyI6ImNvbS5zcnBpbmdpZnkua2FiYXNha2FsaXMifQ.JfLUh0LgEV9MxAXFpA9kMn0KkhxQmk6KtZGA3kJYtFOvAwp0TDMyEWnkoa-Ccs3GkE258J7XssaguNpi5NC_-g",
  "created_date" : "Sat, 13 Jan 2018 23:47:57 +0200",
  "updated_date" : "Sat, 13 Jan 2018 23:47:57 +0200"
}

01:21:12.874 DEBUG - response time in milliseconds: 217
01:21:12.874 INFO  - response:
{
  "username": "admin",
  "email": "admin@springify.com",
  "password": "$2a$10$UClj\/ChiXzRXcT6HvSdOpePZFzTIJs9CYDagygovYbM0TDzMRe7Di",
  "jwtToken": "eyJhbGciOiJIUzUxMiJ9.eyJhdWQiOiJTcHJpbmdpZnkgVXNlcnMiLCJqdGkiOiJhZG1pbkBzcHJpbmdpZnkuY29tIiwic3ViIjoiYWRtaW4iLCJleHAiOjE1MTY2NzA0NzIsImlzcyI6ImNvbS5zcnBpbmdpZnkua2FiYXNha2FsaXMifQ.JfLUh0LgEV9MxAXFpA9kMn0KkhxQmk6KtZGA3kJYtFOvAwp0TDMyEWnkoa-Ccs3GkE258J7XssaguNpi5NC_-g",
  "created_date": "Sat, 13 Jan 2018 23:47:57 +0200",
  "updated_date": "Sat, 13 Jan 2018 23:47:57 +0200"
}

</pre>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">Then status 200</div>
<div class="time-cell">0</div>
</div>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">* def jwtToken = response.jwtToken</div>
<div class="time-cell">0</div>
</div>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">* print 'jwtToken OK: ', karate.pretty(jwtToken)</div>
<div class="time-cell">0</div>
</div>
<pre>01:21:12.898 INFO  - [print] jwtToken OK:  eyJhbGciOiJIUzUxMiJ9.eyJhdWQiOiJTcHJpbmdpZnkgVXNlcnMiLCJqdGkiOiJhZG1pbkBzcHJpbmdpZnkuY29tIiwic3ViIjoiYWRtaW4iLCJleHAiOjE1MTY2NzA0NzIsImlzcyI6ImNvbS5zcnBpbmdpZnkua2FiYXNha2FsaXMifQ.JfLUh0LgEV9MxAXFpA9kMn0KkhxQmk6KtZGA3kJYtFOvAwp0TDMyEWnkoa-Ccs3GkE258J7XssaguNpi5NC_-g
</pre>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">* def defaultHeaders =  callonce read('classpath:springifyapi/common/HeadersFun.js')  { jwtToken:  '#(jwtToken)' }</div>
<div class="time-cell">0</div>
</div>
<pre>01:21:12.898 DEBUG - callonce cache hit for: read('classpath:springifyapi/common/HeadersFun.js')
</pre>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">* configure headers = defaultHeaders</div>
<div class="time-cell">0</div>
</div>
</div>
<div class="step-row">
<div class="step-cell">* def artist_payload = {name: 'Motley Crue', country: 'USA'}</div>
<div class="time-cell">0.000221</div>
</div>
<div class="step-row">
<div class="step-cell">* set postData.path = 'artists'</div>
<div class="time-cell">0.022997</div>
</div>
<div class="step-row">
<div class="step-cell">* set postData.payload =  artist_payload</div>
<div class="time-cell">0.000281</div>
</div>
<div class="step-row">
<div class="step-cell">* def post = callonce read('classpath:springifyapi/common/genericPost.feature') { postData: '#(postData)' }</div>
<div class="time-cell">0.000311</div>
</div>
<pre>01:21:12.929 DEBUG - callonce cache hit for: read('classpath:springifyapi/common/genericPost.feature')
</pre>
<div class="step-row">
<div class="step-cell">* def postResponse = post.genericPostResult.response</div>
<div class="time-cell">0.0002</div>
</div>
<div class="step-row">
<div class="step-cell">* def location = post.genericPostResult.location</div>
<div class="time-cell">0.000243</div>
</div>
<div class="step-row">
<div class="step-cell">* print 'postRe', karate.pretty(postResponse)</div>
<div class="time-cell">0.038912</div>
</div>
<pre>01:21:12.968 INFO  - [print] postRe {
  "id": 1043,
  "name": "Motley Crue",
  "country": "USA",
  "albums_count": 0,
  "created_date": "Mon, 15 Jan 2018 01:21:11 +0200",
  "updated_date": "Mon, 15 Jan 2018 01:21:11 +0200",
  "_links": {
    "self": {
      "href": "http:\/\/127.0.0.1:35051\/api\/artists\/1043"
    },
    "artists": {
      "href": "http:\/\/127.0.0.1:35051\/api\/artists"
    },
    "albums": {
      "href": "http:\/\/127.0.0.1:35051\/api\/artists\/1043\/albums"
    },
    "genre": {
      "href": "http:\/\/127.0.0.1:35051\/api\/artists\/1043\/genre"
    }
  }
}

</pre>
<div class="step-row">
<div class="step-cell">Given url location</div>
<div class="time-cell">0.000093</div>
</div>
<div class="step-row">
<div class="step-cell">When method get</div>
<div class="time-cell">0.107486</div>
</div>
<pre>01:21:12.972 DEBUG - 
1 &gt; GET http://127.0.0.1:35051/api/artists/1043
1 &gt; Accept-Encoding: gzip,deflate
1 &gt; Authorization: Bearer eyJhbGciOiJIUzUxMiJ9.eyJhdWQiOiJTcHJpbmdpZnkgVXNlcnMiLCJqdGkiOiJhZG1pbkBzcHJpbmdpZnkuY29tIiwic3ViIjoiYWRtaW4iLCJleHAiOjE1MTY2NzA0NzAsImlzcyI6ImNvbS5zcnBpbmdpZnkua2FiYXNha2FsaXMifQ.IgEZ6OPP2n9ir3PzE8eWQF8yojLt-HoBrwdbIf5VnPLqr3oxCnBI7RJrx26YCuY78Mg6mrQt24hOGjNMd4SykQ
1 &gt; Connection: Keep-Alive
1 &gt; Content-Type: application/json
1 &gt; Host: 127.0.0.1:35051
1 &gt; User-Agent: Apache-HttpClient/4.5.3 (Java/1.8.0_151)

01:21:13.076 DEBUG - 
1 &lt; 200
1 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
1 &lt; Content-Type: application/hal+json;charset=UTF-8
1 &lt; Date: Sun, 14 Jan 2018 23:21:12 GMT
1 &lt; Expires: 0
1 &lt; Pragma: no-cache
1 &lt; Set-Cookie: JSESSIONID=E9F60994E2D1AE22647D6FDDCB1CA23A; Path=/api; HttpOnly
1 &lt; Transfer-Encoding: chunked
1 &lt; X-Application-Context: application:0
1 &lt; X-Content-Type-Options: nosniff
1 &lt; X-Frame-Options: DENY
1 &lt; X-XSS-Protection: 1; mode=block
{
  "id" : 1043,
  "name" : "Motley Crue",
  "genre" : "Rock",
  "country" : "USA",
  "albums_count" : 0,
  "created_date" : "Mon, 15 Jan 2018 01:21:11 +0200",
  "updated_date" : "Mon, 15 Jan 2018 01:21:12 +0200",
  "_links" : {
    "self" : {
      "href" : "http://127.0.0.1:35051/api/artists/1043"
    },
    "artists" : {
      "href" : "http://127.0.0.1:35051/api/artists"
    },
    "albums" : {
      "href" : "http://127.0.0.1:35051/api/artists/1043/albums"
    },
    "genre" : {
      "href" : "http://127.0.0.1:35051/api/artists/1043/genre"
    }
  }
}

01:21:13.076 DEBUG - response time in milliseconds: 106
01:21:13.077 INFO  - response:
{
  "id": 1043,
  "name": "Motley Crue",
  "genre": "Rock",
  "country": "USA",
  "albums_count": 0,
  "created_date": "Mon, 15 Jan 2018 01:21:11 +0200",
  "updated_date": "Mon, 15 Jan 2018 01:21:12 +0200",
  "_links": {
    "self": {
      "href": "http:\/\/127.0.0.1:35051\/api\/artists\/1043"
    },
    "artists": {
      "href": "http:\/\/127.0.0.1:35051\/api\/artists"
    },
    "albums": {
      "href": "http:\/\/127.0.0.1:35051\/api\/artists\/1043\/albums"
    },
    "genre": {
      "href": "http:\/\/127.0.0.1:35051\/api\/artists\/1043\/genre"
    }
  }
}

</pre>
<div class="step-row">
<div class="step-cell">Then status 200</div>
<div class="time-cell">0.000127</div>
</div>
<div class="step-row">
<div class="step-cell">And match response contains { genre: 'Rock' }</div>
<div class="time-cell">0.000352</div>
</div>
</div>
</div>
<div class="scenario">
<div class="scenario-heading">
<span class="scenario-keyword">Scenario: </span><span class="scenario-name">Remove association of artist with this genre</span>
</div>
<div class="scenario-steps">
<div class="step-row">
<div class="step-cell">* def postData = {}</div>
<div class="time-cell">0.623283</div>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">* call classpath:springifyapi/common/setHeaders.feature</div>
<div class="time-cell">0</div>
</div>
<pre>{
  "config": {
    "user": "admin",
    "baseUrl": "http:\/\/127.0.0.1:35051\/api\/"
  }
}
</pre>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">* print 'Config passed: ', karate.pretty(config)</div>
<div class="time-cell">0</div>
</div>
<pre>01:21:13.377 INFO  - [print] Config passed:  {
  "user": "admin",
  "baseUrl": "http:\/\/127.0.0.1:35051\/api\/"
}

</pre>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">* def creds = read('classpath:springifyapi/data/'+ config.user + '.json')</div>
<div class="time-cell">0</div>
</div>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">* url baseUrl</div>
<div class="time-cell">0</div>
</div>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">Given url baseUrl</div>
<div class="time-cell">0</div>
</div>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">And path 'login'</div>
<div class="time-cell">0</div>
</div>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">And request creds</div>
<div class="time-cell">0</div>
</div>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">When method post</div>
<div class="time-cell">0</div>
</div>
<pre>01:21:13.438 INFO  - request:
{
  "password": "11111111",
  "username": "admin"
}

01:21:13.441 DEBUG - 
1 &gt; POST http://127.0.0.1:35051/api/login
1 &gt; Accept-Encoding: gzip,deflate
1 &gt; Connection: Keep-Alive
1 &gt; Content-Length: 42
1 &gt; Content-Type: application/json
1 &gt; Host: 127.0.0.1:35051
1 &gt; User-Agent: Apache-HttpClient/4.5.3 (Java/1.8.0_151)
{"password":"11111111","username":"admin"}

01:21:13.661 DEBUG - 
1 &lt; 200
1 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
1 &lt; Content-Type: application/hal+json;charset=UTF-8
1 &lt; Date: Sun, 14 Jan 2018 23:21:13 GMT
1 &lt; Expires: 0
1 &lt; Pragma: no-cache
1 &lt; Token: eyJhbGciOiJIUzUxMiJ9.eyJhdWQiOiJTcHJpbmdpZnkgVXNlcnMiLCJqdGkiOiJhZG1pbkBzcHJpbmdpZnkuY29tIiwic3ViIjoiYWRtaW4iLCJleHAiOjE1MTY2NzA0NzMsImlzcyI6ImNvbS5zcnBpbmdpZnkua2FiYXNha2FsaXMifQ.7DXj9OK_3Cut9BCQ-KuKRrOwijb0QvlNMdZVi7QwFk0KqhVSA3lOWa5Da3glEpc9jFRyyNJ2JzyVNy191GYiwQ
1 &lt; Transfer-Encoding: chunked
1 &lt; X-Application-Context: application:0
1 &lt; X-Content-Type-Options: nosniff
1 &lt; X-Frame-Options: DENY
1 &lt; X-XSS-Protection: 1; mode=block
{
  "username" : "admin",
  "email" : "admin@springify.com",
  "password" : "$2a$10$UClj/ChiXzRXcT6HvSdOpePZFzTIJs9CYDagygovYbM0TDzMRe7Di",
  "jwtToken" : "eyJhbGciOiJIUzUxMiJ9.eyJhdWQiOiJTcHJpbmdpZnkgVXNlcnMiLCJqdGkiOiJhZG1pbkBzcHJpbmdpZnkuY29tIiwic3ViIjoiYWRtaW4iLCJleHAiOjE1MTY2NzA0NzMsImlzcyI6ImNvbS5zcnBpbmdpZnkua2FiYXNha2FsaXMifQ.7DXj9OK_3Cut9BCQ-KuKRrOwijb0QvlNMdZVi7QwFk0KqhVSA3lOWa5Da3glEpc9jFRyyNJ2JzyVNy191GYiwQ",
  "created_date" : "Sat, 13 Jan 2018 23:47:57 +0200",
  "updated_date" : "Sat, 13 Jan 2018 23:47:57 +0200"
}

01:21:13.661 DEBUG - response time in milliseconds: 222
01:21:13.662 INFO  - response:
{
  "username": "admin",
  "email": "admin@springify.com",
  "password": "$2a$10$UClj\/ChiXzRXcT6HvSdOpePZFzTIJs9CYDagygovYbM0TDzMRe7Di",
  "jwtToken": "eyJhbGciOiJIUzUxMiJ9.eyJhdWQiOiJTcHJpbmdpZnkgVXNlcnMiLCJqdGkiOiJhZG1pbkBzcHJpbmdpZnkuY29tIiwic3ViIjoiYWRtaW4iLCJleHAiOjE1MTY2NzA0NzMsImlzcyI6ImNvbS5zcnBpbmdpZnkua2FiYXNha2FsaXMifQ.7DXj9OK_3Cut9BCQ-KuKRrOwijb0QvlNMdZVi7QwFk0KqhVSA3lOWa5Da3glEpc9jFRyyNJ2JzyVNy191GYiwQ",
  "created_date": "Sat, 13 Jan 2018 23:47:57 +0200",
  "updated_date": "Sat, 13 Jan 2018 23:47:57 +0200"
}

</pre>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">Then status 200</div>
<div class="time-cell">0</div>
</div>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">* def jwtToken = response.jwtToken</div>
<div class="time-cell">0</div>
</div>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">* print 'jwtToken OK: ', karate.pretty(jwtToken)</div>
<div class="time-cell">0</div>
</div>
<pre>01:21:13.725 INFO  - [print] jwtToken OK:  eyJhbGciOiJIUzUxMiJ9.eyJhdWQiOiJTcHJpbmdpZnkgVXNlcnMiLCJqdGkiOiJhZG1pbkBzcHJpbmdpZnkuY29tIiwic3ViIjoiYWRtaW4iLCJleHAiOjE1MTY2NzA0NzMsImlzcyI6ImNvbS5zcnBpbmdpZnkua2FiYXNha2FsaXMifQ.7DXj9OK_3Cut9BCQ-KuKRrOwijb0QvlNMdZVi7QwFk0KqhVSA3lOWa5Da3glEpc9jFRyyNJ2JzyVNy191GYiwQ
</pre>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">* def defaultHeaders =  callonce read('classpath:springifyapi/common/HeadersFun.js')  { jwtToken:  '#(jwtToken)' }</div>
<div class="time-cell">0</div>
</div>
<pre>01:21:13.725 DEBUG - callonce cache hit for: read('classpath:springifyapi/common/HeadersFun.js')
</pre>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">* configure headers = defaultHeaders</div>
<div class="time-cell">0</div>
</div>
</div>
<div class="step-row">
<div class="step-cell">* def artist_payload = {name: 'Motley Crue', country: 'USA'}</div>
<div class="time-cell">0.00099</div>
</div>
<div class="step-row">
<div class="step-cell">* set postData.path = 'artists'</div>
<div class="time-cell">0.010892</div>
</div>
<div class="step-row">
<div class="step-cell">* set postData.payload =  artist_payload</div>
<div class="time-cell">0.000329</div>
</div>
<div class="step-row">
<div class="step-cell">* def post = callonce read('classpath:springifyapi/common/genericPost.feature') { postData: '#(postData)' }</div>
<div class="time-cell">0.000354</div>
</div>
<pre>01:21:13.750 DEBUG - callonce cache hit for: read('classpath:springifyapi/common/genericPost.feature')
</pre>
<div class="step-row">
<div class="step-cell">* def postResponse = post.genericPostResult.response</div>
<div class="time-cell">0.000186</div>
</div>
<div class="step-row">
<div class="step-cell">* def location = post.genericPostResult.location</div>
<div class="time-cell">0.000141</div>
</div>
<div class="step-row">
<div class="step-cell">* print 'postRe', karate.pretty(postResponse)</div>
<div class="time-cell">0.02371</div>
</div>
<pre>01:21:13.774 INFO  - [print] postRe {
  "id": 1043,
  "name": "Motley Crue",
  "country": "USA",
  "albums_count": 0,
  "created_date": "Mon, 15 Jan 2018 01:21:11 +0200",
  "updated_date": "Mon, 15 Jan 2018 01:21:11 +0200",
  "_links": {
    "self": {
      "href": "http:\/\/127.0.0.1:35051\/api\/artists\/1043"
    },
    "artists": {
      "href": "http:\/\/127.0.0.1:35051\/api\/artists"
    },
    "albums": {
      "href": "http:\/\/127.0.0.1:35051\/api\/artists\/1043\/albums"
    },
    "genre": {
      "href": "http:\/\/127.0.0.1:35051\/api\/artists\/1043\/genre"
    }
  }
}

</pre>
<div class="step-row">
<div class="step-cell">Given url baseUrl</div>
<div class="time-cell">0.000088</div>
</div>
<div class="step-row">
<div class="step-cell">And path '/genres/1/artists/' + postResponse.id</div>
<div class="time-cell">0.018435</div>
</div>
<div class="step-row">
<div class="step-cell">When method delete</div>
<div class="time-cell">0.084435</div>
</div>
<pre>01:21:13.799 DEBUG - 
1 &gt; DELETE http://127.0.0.1:35051/api/genres/1/artists/1043
1 &gt; Accept-Encoding: gzip,deflate
1 &gt; Authorization: Bearer eyJhbGciOiJIUzUxMiJ9.eyJhdWQiOiJTcHJpbmdpZnkgVXNlcnMiLCJqdGkiOiJhZG1pbkBzcHJpbmdpZnkuY29tIiwic3ViIjoiYWRtaW4iLCJleHAiOjE1MTY2NzA0NzAsImlzcyI6ImNvbS5zcnBpbmdpZnkua2FiYXNha2FsaXMifQ.IgEZ6OPP2n9ir3PzE8eWQF8yojLt-HoBrwdbIf5VnPLqr3oxCnBI7RJrx26YCuY78Mg6mrQt24hOGjNMd4SykQ
1 &gt; Connection: Keep-Alive
1 &gt; Content-Type: application/json
1 &gt; Host: 127.0.0.1:35051
1 &gt; User-Agent: Apache-HttpClient/4.5.3 (Java/1.8.0_151)

01:21:13.878 DEBUG - 
1 &lt; 204
1 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
1 &lt; Date: Sun, 14 Jan 2018 23:21:13 GMT
1 &lt; Expires: 0
1 &lt; Pragma: no-cache
1 &lt; Set-Cookie: JSESSIONID=F1BC382A462E482566BBD77622683603; Path=/api; HttpOnly
1 &lt; X-Application-Context: application:0
1 &lt; X-Content-Type-Options: nosniff
1 &lt; X-Frame-Options: DENY
1 &lt; X-XSS-Protection: 1; mode=block

01:21:13.878 DEBUG - response time in milliseconds: 84
</pre>
<div class="step-row">
<div class="step-cell">Then status 204</div>
<div class="time-cell">0.00011</div>
</div>
</div>
</div>
<div class="scenario">
<div class="scenario-heading">
<span class="scenario-keyword">Scenario: </span><span class="scenario-name">Verify that the new artist has no genre</span>
</div>
<div class="scenario-steps">
<div class="step-row">
<div class="step-cell">* def postData = {}</div>
<div class="time-cell">0.460516</div>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">* call classpath:springifyapi/common/setHeaders.feature</div>
<div class="time-cell">0</div>
</div>
<pre>{
  "config": {
    "user": "admin",
    "baseUrl": "http:\/\/127.0.0.1:35051\/api\/"
  }
}
</pre>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">* print 'Config passed: ', karate.pretty(config)</div>
<div class="time-cell">0</div>
</div>
<pre>01:21:14.070 INFO  - [print] Config passed:  {
  "user": "admin",
  "baseUrl": "http:\/\/127.0.0.1:35051\/api\/"
}

</pre>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">* def creds = read('classpath:springifyapi/data/'+ config.user + '.json')</div>
<div class="time-cell">0</div>
</div>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">* url baseUrl</div>
<div class="time-cell">0</div>
</div>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">Given url baseUrl</div>
<div class="time-cell">0</div>
</div>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">And path 'login'</div>
<div class="time-cell">0</div>
</div>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">And request creds</div>
<div class="time-cell">0</div>
</div>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">When method post</div>
<div class="time-cell">0</div>
</div>
<pre>01:21:14.112 INFO  - request:
{
  "password": "11111111",
  "username": "admin"
}

01:21:14.114 DEBUG - 
1 &gt; POST http://127.0.0.1:35051/api/login
1 &gt; Accept-Encoding: gzip,deflate
1 &gt; Connection: Keep-Alive
1 &gt; Content-Length: 42
1 &gt; Content-Type: application/json
1 &gt; Host: 127.0.0.1:35051
1 &gt; User-Agent: Apache-HttpClient/4.5.3 (Java/1.8.0_151)
{"password":"11111111","username":"admin"}

01:21:14.331 DEBUG - 
1 &lt; 200
1 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
1 &lt; Content-Type: application/hal+json;charset=UTF-8
1 &lt; Date: Sun, 14 Jan 2018 23:21:13 GMT
1 &lt; Expires: 0
1 &lt; Pragma: no-cache
1 &lt; Token: eyJhbGciOiJIUzUxMiJ9.eyJhdWQiOiJTcHJpbmdpZnkgVXNlcnMiLCJqdGkiOiJhZG1pbkBzcHJpbmdpZnkuY29tIiwic3ViIjoiYWRtaW4iLCJleHAiOjE1MTY2NzA0NzQsImlzcyI6ImNvbS5zcnBpbmdpZnkua2FiYXNha2FsaXMifQ.oMsbHJ7eL1xGgvwVmgoN0uNZWhfusC3X9syIAhBdIMdlLsbJQA4egQ1BnZOZjnGnV-HQA35OvG9rGFTeWb_69g
1 &lt; Transfer-Encoding: chunked
1 &lt; X-Application-Context: application:0
1 &lt; X-Content-Type-Options: nosniff
1 &lt; X-Frame-Options: DENY
1 &lt; X-XSS-Protection: 1; mode=block
{
  "username" : "admin",
  "email" : "admin@springify.com",
  "password" : "$2a$10$UClj/ChiXzRXcT6HvSdOpePZFzTIJs9CYDagygovYbM0TDzMRe7Di",
  "jwtToken" : "eyJhbGciOiJIUzUxMiJ9.eyJhdWQiOiJTcHJpbmdpZnkgVXNlcnMiLCJqdGkiOiJhZG1pbkBzcHJpbmdpZnkuY29tIiwic3ViIjoiYWRtaW4iLCJleHAiOjE1MTY2NzA0NzQsImlzcyI6ImNvbS5zcnBpbmdpZnkua2FiYXNha2FsaXMifQ.oMsbHJ7eL1xGgvwVmgoN0uNZWhfusC3X9syIAhBdIMdlLsbJQA4egQ1BnZOZjnGnV-HQA35OvG9rGFTeWb_69g",
  "created_date" : "Sat, 13 Jan 2018 23:47:57 +0200",
  "updated_date" : "Sat, 13 Jan 2018 23:47:57 +0200"
}

01:21:14.332 DEBUG - response time in milliseconds: 219
01:21:14.332 INFO  - response:
{
  "username": "admin",
  "email": "admin@springify.com",
  "password": "$2a$10$UClj\/ChiXzRXcT6HvSdOpePZFzTIJs9CYDagygovYbM0TDzMRe7Di",
  "jwtToken": "eyJhbGciOiJIUzUxMiJ9.eyJhdWQiOiJTcHJpbmdpZnkgVXNlcnMiLCJqdGkiOiJhZG1pbkBzcHJpbmdpZnkuY29tIiwic3ViIjoiYWRtaW4iLCJleHAiOjE1MTY2NzA0NzQsImlzcyI6ImNvbS5zcnBpbmdpZnkua2FiYXNha2FsaXMifQ.oMsbHJ7eL1xGgvwVmgoN0uNZWhfusC3X9syIAhBdIMdlLsbJQA4egQ1BnZOZjnGnV-HQA35OvG9rGFTeWb_69g",
  "created_date": "Sat, 13 Jan 2018 23:47:57 +0200",
  "updated_date": "Sat, 13 Jan 2018 23:47:57 +0200"
}

</pre>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">Then status 200</div>
<div class="time-cell">0</div>
</div>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">* def jwtToken = response.jwtToken</div>
<div class="time-cell">0</div>
</div>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">* print 'jwtToken OK: ', karate.pretty(jwtToken)</div>
<div class="time-cell">0</div>
</div>
<pre>01:21:14.370 INFO  - [print] jwtToken OK:  eyJhbGciOiJIUzUxMiJ9.eyJhdWQiOiJTcHJpbmdpZnkgVXNlcnMiLCJqdGkiOiJhZG1pbkBzcHJpbmdpZnkuY29tIiwic3ViIjoiYWRtaW4iLCJleHAiOjE1MTY2NzA0NzQsImlzcyI6ImNvbS5zcnBpbmdpZnkua2FiYXNha2FsaXMifQ.oMsbHJ7eL1xGgvwVmgoN0uNZWhfusC3X9syIAhBdIMdlLsbJQA4egQ1BnZOZjnGnV-HQA35OvG9rGFTeWb_69g
</pre>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">* def defaultHeaders =  callonce read('classpath:springifyapi/common/HeadersFun.js')  { jwtToken:  '#(jwtToken)' }</div>
<div class="time-cell">0</div>
</div>
<pre>01:21:14.374 DEBUG - callonce cache hit for: read('classpath:springifyapi/common/HeadersFun.js')
</pre>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">* configure headers = defaultHeaders</div>
<div class="time-cell">0</div>
</div>
</div>
<div class="step-row">
<div class="step-cell">* def artist_payload = {name: 'Motley Crue', country: 'USA'}</div>
<div class="time-cell">0.000545</div>
</div>
<div class="step-row">
<div class="step-cell">* set postData.path = 'artists'</div>
<div class="time-cell">0.034897</div>
</div>
<div class="step-row">
<div class="step-cell">* set postData.payload =  artist_payload</div>
<div class="time-cell">0.000233</div>
</div>
<div class="step-row">
<div class="step-cell">* def post = callonce read('classpath:springifyapi/common/genericPost.feature') { postData: '#(postData)' }</div>
<div class="time-cell">0.000326</div>
</div>
<pre>01:21:14.420 DEBUG - callonce cache hit for: read('classpath:springifyapi/common/genericPost.feature')
</pre>
<div class="step-row">
<div class="step-cell">* def postResponse = post.genericPostResult.response</div>
<div class="time-cell">0.000355</div>
</div>
<div class="step-row">
<div class="step-cell">* def location = post.genericPostResult.location</div>
<div class="time-cell">0.002862</div>
</div>
<div class="step-row">
<div class="step-cell">* print 'postRe', karate.pretty(postResponse)</div>
<div class="time-cell">0.03543</div>
</div>
<pre>01:21:14.461 INFO  - [print] postRe {
  "id": 1043,
  "name": "Motley Crue",
  "country": "USA",
  "albums_count": 0,
  "created_date": "Mon, 15 Jan 2018 01:21:11 +0200",
  "updated_date": "Mon, 15 Jan 2018 01:21:11 +0200",
  "_links": {
    "self": {
      "href": "http:\/\/127.0.0.1:35051\/api\/artists\/1043"
    },
    "artists": {
      "href": "http:\/\/127.0.0.1:35051\/api\/artists"
    },
    "albums": {
      "href": "http:\/\/127.0.0.1:35051\/api\/artists\/1043\/albums"
    },
    "genre": {
      "href": "http:\/\/127.0.0.1:35051\/api\/artists\/1043\/genre"
    }
  }
}

</pre>
<div class="step-row">
<div class="step-cell">Given url location</div>
<div class="time-cell">0.001082</div>
</div>
<div class="step-row">
<div class="step-cell">When method get</div>
<div class="time-cell">0.039094</div>
</div>
<pre>01:21:14.466 DEBUG - 
1 &gt; GET http://127.0.0.1:35051/api/artists/1043
1 &gt; Accept-Encoding: gzip,deflate
1 &gt; Authorization: Bearer eyJhbGciOiJIUzUxMiJ9.eyJhdWQiOiJTcHJpbmdpZnkgVXNlcnMiLCJqdGkiOiJhZG1pbkBzcHJpbmdpZnkuY29tIiwic3ViIjoiYWRtaW4iLCJleHAiOjE1MTY2NzA0NzAsImlzcyI6ImNvbS5zcnBpbmdpZnkua2FiYXNha2FsaXMifQ.IgEZ6OPP2n9ir3PzE8eWQF8yojLt-HoBrwdbIf5VnPLqr3oxCnBI7RJrx26YCuY78Mg6mrQt24hOGjNMd4SykQ
1 &gt; Connection: Keep-Alive
1 &gt; Content-Type: application/json
1 &gt; Host: 127.0.0.1:35051
1 &gt; User-Agent: Apache-HttpClient/4.5.3 (Java/1.8.0_151)

01:21:14.502 DEBUG - 
1 &lt; 200
1 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
1 &lt; Content-Type: application/hal+json;charset=UTF-8
1 &lt; Date: Sun, 14 Jan 2018 23:21:13 GMT
1 &lt; Expires: 0
1 &lt; Pragma: no-cache
1 &lt; Set-Cookie: JSESSIONID=619DBDA25A4E7F87C30458B31DEDB135; Path=/api; HttpOnly
1 &lt; Transfer-Encoding: chunked
1 &lt; X-Application-Context: application:0
1 &lt; X-Content-Type-Options: nosniff
1 &lt; X-Frame-Options: DENY
1 &lt; X-XSS-Protection: 1; mode=block
{
  "id" : 1043,
  "name" : "Motley Crue",
  "country" : "USA",
  "albums_count" : 0,
  "created_date" : "Mon, 15 Jan 2018 01:21:11 +0200",
  "updated_date" : "Mon, 15 Jan 2018 01:21:13 +0200",
  "_links" : {
    "self" : {
      "href" : "http://127.0.0.1:35051/api/artists/1043"
    },
    "artists" : {
      "href" : "http://127.0.0.1:35051/api/artists"
    },
    "albums" : {
      "href" : "http://127.0.0.1:35051/api/artists/1043/albums"
    },
    "genre" : {
      "href" : "http://127.0.0.1:35051/api/artists/1043/genre"
    }
  }
}

01:21:14.503 DEBUG - response time in milliseconds: 37
01:21:14.503 INFO  - response:
{
  "id": 1043,
  "name": "Motley Crue",
  "country": "USA",
  "albums_count": 0,
  "created_date": "Mon, 15 Jan 2018 01:21:11 +0200",
  "updated_date": "Mon, 15 Jan 2018 01:21:13 +0200",
  "_links": {
    "self": {
      "href": "http:\/\/127.0.0.1:35051\/api\/artists\/1043"
    },
    "artists": {
      "href": "http:\/\/127.0.0.1:35051\/api\/artists"
    },
    "albums": {
      "href": "http:\/\/127.0.0.1:35051\/api\/artists\/1043\/albums"
    },
    "genre": {
      "href": "http:\/\/127.0.0.1:35051\/api\/artists\/1043\/genre"
    }
  }
}

</pre>
<div class="step-row">
<div class="step-cell">Then status 200</div>
<div class="time-cell">0.000126</div>
</div>
<div class="step-row">
<div class="step-cell">And match response contains { genre: '#null' }</div>
<div class="time-cell">0.002034</div>
</div>
</div>
</div>
<div class="scenario">
<div class="scenario-heading">
<span class="scenario-keyword">Scenario: </span><span class="scenario-name">Get all artists of this genre and verify the json schema</span>
</div>
<div class="scenario-steps">
<div class="step-row">
<div class="step-cell">* def postData = {}</div>
<div class="time-cell">0.47069</div>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">* call classpath:springifyapi/common/setHeaders.feature</div>
<div class="time-cell">0</div>
</div>
<pre>{
  "config": {
    "user": "admin",
    "baseUrl": "http:\/\/127.0.0.1:35051\/api\/"
  }
}
</pre>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">* print 'Config passed: ', karate.pretty(config)</div>
<div class="time-cell">0</div>
</div>
<pre>01:21:14.667 INFO  - [print] Config passed:  {
  "user": "admin",
  "baseUrl": "http:\/\/127.0.0.1:35051\/api\/"
}

</pre>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">* def creds = read('classpath:springifyapi/data/'+ config.user + '.json')</div>
<div class="time-cell">0</div>
</div>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">* url baseUrl</div>
<div class="time-cell">0</div>
</div>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">Given url baseUrl</div>
<div class="time-cell">0</div>
</div>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">And path 'login'</div>
<div class="time-cell">0</div>
</div>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">And request creds</div>
<div class="time-cell">0</div>
</div>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">When method post</div>
<div class="time-cell">0</div>
</div>
<pre>01:21:14.717 INFO  - request:
{
  "password": "11111111",
  "username": "admin"
}

01:21:14.719 DEBUG - 
1 &gt; POST http://127.0.0.1:35051/api/login
1 &gt; Accept-Encoding: gzip,deflate
1 &gt; Connection: Keep-Alive
1 &gt; Content-Length: 42
1 &gt; Content-Type: application/json
1 &gt; Host: 127.0.0.1:35051
1 &gt; User-Agent: Apache-HttpClient/4.5.3 (Java/1.8.0_151)
{"password":"11111111","username":"admin"}

01:21:14.962 DEBUG - 
1 &lt; 200
1 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
1 &lt; Content-Type: application/hal+json;charset=UTF-8
1 &lt; Date: Sun, 14 Jan 2018 23:21:14 GMT
1 &lt; Expires: 0
1 &lt; Pragma: no-cache
1 &lt; Token: eyJhbGciOiJIUzUxMiJ9.eyJhdWQiOiJTcHJpbmdpZnkgVXNlcnMiLCJqdGkiOiJhZG1pbkBzcHJpbmdpZnkuY29tIiwic3ViIjoiYWRtaW4iLCJleHAiOjE1MTY2NzA0NzQsImlzcyI6ImNvbS5zcnBpbmdpZnkua2FiYXNha2FsaXMifQ.oMsbHJ7eL1xGgvwVmgoN0uNZWhfusC3X9syIAhBdIMdlLsbJQA4egQ1BnZOZjnGnV-HQA35OvG9rGFTeWb_69g
1 &lt; Transfer-Encoding: chunked
1 &lt; X-Application-Context: application:0
1 &lt; X-Content-Type-Options: nosniff
1 &lt; X-Frame-Options: DENY
1 &lt; X-XSS-Protection: 1; mode=block
{
  "username" : "admin",
  "email" : "admin@springify.com",
  "password" : "$2a$10$UClj/ChiXzRXcT6HvSdOpePZFzTIJs9CYDagygovYbM0TDzMRe7Di",
  "jwtToken" : "eyJhbGciOiJIUzUxMiJ9.eyJhdWQiOiJTcHJpbmdpZnkgVXNlcnMiLCJqdGkiOiJhZG1pbkBzcHJpbmdpZnkuY29tIiwic3ViIjoiYWRtaW4iLCJleHAiOjE1MTY2NzA0NzQsImlzcyI6ImNvbS5zcnBpbmdpZnkua2FiYXNha2FsaXMifQ.oMsbHJ7eL1xGgvwVmgoN0uNZWhfusC3X9syIAhBdIMdlLsbJQA4egQ1BnZOZjnGnV-HQA35OvG9rGFTeWb_69g",
  "created_date" : "Sat, 13 Jan 2018 23:47:57 +0200",
  "updated_date" : "Sat, 13 Jan 2018 23:47:57 +0200"
}

01:21:14.962 DEBUG - response time in milliseconds: 244
01:21:14.962 INFO  - response:
{
  "username": "admin",
  "email": "admin@springify.com",
  "password": "$2a$10$UClj\/ChiXzRXcT6HvSdOpePZFzTIJs9CYDagygovYbM0TDzMRe7Di",
  "jwtToken": "eyJhbGciOiJIUzUxMiJ9.eyJhdWQiOiJTcHJpbmdpZnkgVXNlcnMiLCJqdGkiOiJhZG1pbkBzcHJpbmdpZnkuY29tIiwic3ViIjoiYWRtaW4iLCJleHAiOjE1MTY2NzA0NzQsImlzcyI6ImNvbS5zcnBpbmdpZnkua2FiYXNha2FsaXMifQ.oMsbHJ7eL1xGgvwVmgoN0uNZWhfusC3X9syIAhBdIMdlLsbJQA4egQ1BnZOZjnGnV-HQA35OvG9rGFTeWb_69g",
  "created_date": "Sat, 13 Jan 2018 23:47:57 +0200",
  "updated_date": "Sat, 13 Jan 2018 23:47:57 +0200"
}

</pre>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">Then status 200</div>
<div class="time-cell">0</div>
</div>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">* def jwtToken = response.jwtToken</div>
<div class="time-cell">0</div>
</div>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">* print 'jwtToken OK: ', karate.pretty(jwtToken)</div>
<div class="time-cell">0</div>
</div>
<pre>01:21:14.984 INFO  - [print] jwtToken OK:  eyJhbGciOiJIUzUxMiJ9.eyJhdWQiOiJTcHJpbmdpZnkgVXNlcnMiLCJqdGkiOiJhZG1pbkBzcHJpbmdpZnkuY29tIiwic3ViIjoiYWRtaW4iLCJleHAiOjE1MTY2NzA0NzQsImlzcyI6ImNvbS5zcnBpbmdpZnkua2FiYXNha2FsaXMifQ.oMsbHJ7eL1xGgvwVmgoN0uNZWhfusC3X9syIAhBdIMdlLsbJQA4egQ1BnZOZjnGnV-HQA35OvG9rGFTeWb_69g
</pre>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">* def defaultHeaders =  callonce read('classpath:springifyapi/common/HeadersFun.js')  { jwtToken:  '#(jwtToken)' }</div>
<div class="time-cell">0</div>
</div>
<pre>01:21:14.985 DEBUG - callonce cache hit for: read('classpath:springifyapi/common/HeadersFun.js')
</pre>
</div>
<div class="scenario-steps-nested">
<div class="step-row">
<div class="step-cell">* configure headers = defaultHeaders</div>
<div class="time-cell">0</div>
</div>
</div>
<div class="step-row">
<div class="step-cell">* def artist_payload = {name: 'Motley Crue', country: 'USA'}</div>
<div class="time-cell">0.000175</div>
</div>
<div class="step-row">
<div class="step-cell">* set postData.path = 'artists'</div>
<div class="time-cell">0.00836</div>
</div>
<div class="step-row">
<div class="step-cell">* set postData.payload =  artist_payload</div>
<div class="time-cell">0.000183</div>
</div>
<div class="step-row">
<div class="step-cell">* def post = callonce read('classpath:springifyapi/common/genericPost.feature') { postData: '#(postData)' }</div>
<div class="time-cell">0.000248</div>
</div>
<pre>01:21:14.999 DEBUG - callonce cache hit for: read('classpath:springifyapi/common/genericPost.feature')
</pre>
<div class="step-row">
<div class="step-cell">* def postResponse = post.genericPostResult.response</div>
<div class="time-cell">0.000178</div>
</div>
<div class="step-row">
<div class="step-cell">* def location = post.genericPostResult.location</div>
<div class="time-cell">0.00012</div>
</div>
<div class="step-row">
<div class="step-cell">* print 'postRe', karate.pretty(postResponse)</div>
<div class="time-cell">0.026957</div>
</div>
<pre>01:21:15.027 INFO  - [print] postRe {
  "id": 1043,
  "name": "Motley Crue",
  "country": "USA",
  "albums_count": 0,
  "created_date": "Mon, 15 Jan 2018 01:21:11 +0200",
  "updated_date": "Mon, 15 Jan 2018 01:21:11 +0200",
  "_links": {
    "self": {
      "href": "http:\/\/127.0.0.1:35051\/api\/artists\/1043"
    },
    "artists": {
      "href": "http:\/\/127.0.0.1:35051\/api\/artists"
    },
    "albums": {
      "href": "http:\/\/127.0.0.1:35051\/api\/artists\/1043\/albums"
    },
    "genre": {
      "href": "http:\/\/127.0.0.1:35051\/api\/artists\/1043\/genre"
    }
  }
}

</pre>
<div class="step-row">
<div class="step-cell">* def artistStructure = read('classpath:springifyapi/common/schemas/artist.js')</div>
<div class="time-cell">0.013771</div>
</div>
<div class="step-row">
<div class="step-cell">* def pageStructure = read('classpath:springifyapi/common/schemas/page.js')</div>
<div class="time-cell">0.012383</div>
</div>
<div class="step-row">
<div class="step-cell">* def linksStructure = read('classpath:springifyapi/common/schemas/artists_links.js')</div>
<div class="time-cell">0.0115</div>
</div>
<div class="step-row">
<div class="step-cell">Given url baseUrl</div>
<div class="time-cell">0.000161</div>
</div>
<div class="step-row">
<div class="step-cell">And path '/genres/1/artists/'</div>
<div class="time-cell">0.007974</div>
</div>
<div class="step-row">
<div class="step-cell">When method get</div>
<div class="time-cell">0.274482</div>
</div>
<pre>01:21:15.076 DEBUG - 
1 &gt; GET http://127.0.0.1:35051/api/genres/1/artists/
1 &gt; Accept-Encoding: gzip,deflate
1 &gt; Authorization: Bearer eyJhbGciOiJIUzUxMiJ9.eyJhdWQiOiJTcHJpbmdpZnkgVXNlcnMiLCJqdGkiOiJhZG1pbkBzcHJpbmdpZnkuY29tIiwic3ViIjoiYWRtaW4iLCJleHAiOjE1MTY2NzA0NzAsImlzcyI6ImNvbS5zcnBpbmdpZnkua2FiYXNha2FsaXMifQ.IgEZ6OPP2n9ir3PzE8eWQF8yojLt-HoBrwdbIf5VnPLqr3oxCnBI7RJrx26YCuY78Mg6mrQt24hOGjNMd4SykQ
1 &gt; Connection: Keep-Alive
1 &gt; Content-Type: application/json
1 &gt; Host: 127.0.0.1:35051
1 &gt; User-Agent: Apache-HttpClient/4.5.3 (Java/1.8.0_151)

01:21:15.344 DEBUG - 
1 &lt; 200
1 &lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate
1 &lt; Content-Type: application/hal+json;charset=UTF-8
1 &lt; Date: Sun, 14 Jan 2018 23:21:14 GMT
1 &lt; Expires: 0
1 &lt; Pragma: no-cache
1 &lt; Set-Cookie: JSESSIONID=2DE2B5D77A7C94D892D61A24D6599041; Path=/api; HttpOnly
1 &lt; Transfer-Encoding: chunked
1 &lt; X-Application-Context: application:0
1 &lt; X-Content-Type-Options: nosniff
1 &lt; X-Frame-Options: DENY
1 &lt; X-XSS-Protection: 1; mode=block
{
  "_embedded" : {
    "artistResources" : [ {
      "id" : 11,
      "name" : "AC/DC",
      "genre" : "Rock",
      "country" : "Australia",
      "albums_count" : 4,
      "created_date" : "Sat, 13 Jan 2018 23:47:57 +0200",
      "updated_date" : "Sat, 13 Jan 2018 23:47:57 +0200",
      "_links" : {
        "self" : {
          "href" : "http://127.0.0.1:35051/api/artists/11"
        },
        "artists" : {
          "href" : "http://127.0.0.1:35051/api/artists"
        },
        "albums" : {
          "href" : "http://127.0.0.1:35051/api/artists/11/albums"
        },
        "genre" : {
          "href" : "http://127.0.0.1:35051/api/artists/11/genre"
        }
      }
    }, {
      "id" : 12,
      "name" : "Van Halen",
      "genre" : "Rock",
      "country" : "USA",
      "albums_count" : 4,
      "created_date" : "Sat, 13 Jan 2018 23:47:57 +0200",
      "updated_date" : "Sat, 13 Jan 2018 23:47:57 +0200",
      "_links" : {
        "self" : {
          "href" : "http://127.0.0.1:35051/api/artists/12"
        },
        "artists" : {
          "href" : "http://127.0.0.1:35051/api/artists"
        },
        "albums" : {
          "href" : "http://127.0.0.1:35051/api/artists/12/albums"
        },
        "genre" : {
          "href" : "http://127.0.0.1:35051/api/artists/12/genre"
        }
      }
    }, {
      "id" : 13,
      "name" : "Def Leppard",
      "genre" : "Rock",
      "country" : "UK",
      "albums_count" : 4,
      "created_date" : "Sat, 13 Jan 2018 23:47:57 +0200",
      "updated_date" : "Sat, 13 Jan 2018 23:47:57 +0200",
      "_links" : {
        "self" : {
          "href" : "http://127.0.0.1:35051/api/artists/13"
        },
        "artists" : {
          "href" : "http://127.0.0.1:35051/api/artists"
        },
        "albums" : {
          "href" : "http://127.0.0.1:35051/api/artists/13/albums"
        },
        "genre" : {
          "href" : "http://127.0.0.1:35051/api/artists/13/genre"
        }
      }
    }, {
      "id" : 14,
      "name" : "Kip Winger",
      "genre" : "Rock",
      "country" : "USA",
      "albums_count" : 2,
      "created_date" : "Sat, 13 Jan 2018 23:47:57 +0200",
      "updated_date" : "Sat, 13 Jan 2018 23:47:57 +0200",
      "_links" : {
        "self" : {
          "href" : "http://127.0.0.1:35051/api/artists/14"
        },
        "artists" : {
          "href" : "http://127.0.0.1:35051/api/artists"
        },
        "albums" : {
          "href" : "http://127.0.0.1:35051/api/artists/14/albums"
        },
        "genre" : {
          "href" : "http://127.0.0.1:35051/api/artists/14/genre"
        }
      }
    }, {
      "id" : 15,
      "name" : "Foreigner",
      "genre" : "Rock",
      "country" : "USA",
      "albums_count" : 2,
      "created_date" : "Sat, 13 Jan 2018 23:47:57 +0200",
      "updated_date" : "Sat, 13 Jan 2018 23:47:57 +0200",
      "_links" : {
        "self" : {
          "href" : "http://127.0.0.1:35051/api/artists/15"
        },
        "artists" : {
          "href" : "http://127.0.0.1:35051/api/artists"
        },
        "albums" : {
          "href" : "http://127.0.0.1:35051/api/artists/15/albums"
        },
        "genre" : {
          "href" : "http://127.0.0.1:35051/api/artists/15/genre"
        }
      }
    }, {
      "id" : 16,
      "name" : "Supertramp",
      "genre" : "Rock",
      "country" : "USA",
      "albums_count" : 2,
      "created_date" : "Sat, 13 Jan 2018 23:47:57 +0200",
      "updated_date" : "Sat, 13 Jan 2018 23:47:57 +0200",
      "_links" : {
        "self" : {
          "href" : "http://127.0.0.1:35051/api/artists/16"
        },
        "artists" : {
          "href" : "http://127.0.0.1:35051/api/artists"
        },
        "albums" : {
          "href" : "http://127.0.0.1:35051/api/artists/16/albums"
        },
        "genre" : {
          "href" : "http://127.0.0.1:35051/api/artists/16/genre"
        }
      }
    }, {
      "id" : 17,
      "name" : "Queen",
      "genre" : "Rock",
      "country" : "USA",
      "albums_count" : 2,
      "created_date" : "Sat, 13 Jan 2018 23:47:57 +0200",
      "updated_date" : "Sat, 13 Jan 2018 23:47:57 +0200",
      "_links" : {
        "self" : {
          "href" : "http://127.0.0.1:35051/api/artists/17"
        },
        "artists" : {
          "href" : "http://127.0.0.1:35051/api/artists"
        },
        "albums" : {
          "href" : "http://127.0.0.1:35051/api/artists/17/albums"
        },
        "genre" : {
          "href" : "http://127.0.0.1:35051/api/artists/17/genre"
        }
      }
    }, {
      "id" : 18,
      "name" : "ZZ Top",
      "genre" : "Rock",
      "country" : "USA",
      "albums_count" : 0,
      "created_date" : "Sat, 13 Jan 2018 23:47:57 +0200",
      "updated_date" : "Sat, 13 Jan 2018 23:47:57 +0200",
      "_links" : {
        "self" : {
          "href" : "http://127.0.0.1:35051/api/artists/18"
        },
        "artists" : {
          "href" : "http://127.0.0.1:35051/api/artists"
        },
        "albums" : {
          "href" : "http://127.0.0.1:35051/api/artists/18/albums"
        },
        "genre" : {
          "href" : "http://127.0.0.1:35051/api/artists/18/genre"
        }
      }
    }, {
      "id" : 19,
      "name" : "Kiss",
      "genre" : "Rock",
      "country" : "USA",
      "albums_count" : 0,
      "created_date" : "Sat, 13 Jan 2018 23:47:57 +0200",
      "updated_date" : "Sat, 13 Jan 2018 23:47:57 +0200",
      "_links" : {
        "self" : {
          "href" : "http://127.0.0.1:35051/api/artists/19"
        },
        "artists" : {
          "href" : "http://127.0.0.1:35051/api/artists"
        },
        "albums" : {
          "href" : "http://127.0.0.1:35051/api/artists/19/albums"
        },
        "genre" : {
          "href" : "http://127.0.0.1:35051/api/artists/19/genre"
        }
      }
    }, {
      "id" : 20,
      "name" : "Rush",
      "genre" : "Rock",
      "country" : "USA",
      "albums_count" : 0,
      "created_date" : "Sat, 13 Jan 2018 23:47:57 +0200",
      "updated_date" : "Sat, 13 Jan 2018 23:47:57 +0200",
      "_links" : {
        "self" : {
          "href" : "http://127.0.0.1:35051/api/artists/20"
        },
        "artists" : {
          "href" : "http://127.0.0.1:35051/api/artists"
        },
        "albums" : {
          "href" : "http://127.0.0.1:35051/api/artists/20/albums"
        },
        "genre" : {
          "href" : "http://127.0.0.1:35051/api/artists/20/genre"
        }
      }
    }, {
      "id" : 1021,
      "name" : "Motley Crue",
      "genre" : "Rock",
      "country" : "USA",
      "albums_count" : 0,
      "created_date" : "Sun, 14 Jan 2018 22:24:58 +0200",
      "updated_date" : "Sun, 14 Jan 2018 22:24:59 +0200",
      "_links" : {
        "self" : {
          "href" : "http://127.0.0.1:35051/api/artists/1021"
        },
        "artists" : {
          "href" : "http://127.0.0.1:35051/api/artists"
        },
        "albums" : {
          "href" : "http://127.0.0.1:35051/api/artists/1021/albums"
        },
        "genre" : {
          "href" : "http://127.0.0.1:35051/api/artists/1021/genre"
        }
      }
    }, {
      "id" : 1022,
      "name" : "Motley Crue",
      "genre" : "Rock",
      "country" : "USA",
      "albums_count" : 0,
      "created_date" : "Sun, 14 Jan 2018 22:29:55 +0200",
      "updated_date" : "Sun, 14 Jan 2018 22:29:56 +0200",
      "_links" : {
        "self" : {
          "href" : "http://127.0.0.1:35051/api/artists/1022"
        },
        "artists" : {
          "href" : "http://127.0.0.1:35051/api/artists"
        },
        "albums" : {
          "href" : "http://127.0.0.1:35051/api/artists/1022/albums"
        },
        "genre" : {
          "href" : "http://127.0.0.1:35051/api/artists/1022/genre"
        }
      }
    }, {
      "id" : 1023,
      "name" : "Motley Crue",
      "genre" : "Rock",
      "country" : "USA",
      "albums_count" : 0,
      "created_date" : "Sun, 14 Jan 2018 22:36:08 +0200",
      "updated_date" : "Sun, 14 Jan 2018 22:36:09 +0200",
      "_links" : {
        "self" : {
          "href" : "http://127.0.0.1:35051/api/artists/1023"
        },
        "artists" : {
          "href" : "http://127.0.0.1:35051/api/artists"
        },
        "albums" : {
          "href" : "http://127.0.0.1:35051/api/artists/1023/albums"
        },
        "genre" : {
          "href" : "http://127.0.0.1:35051/api/artists/1023/genre"
        }
      }
    }, {
      "id" : 1024,
      "name" : "Motley Crue",
      "genre" : "Rock",
      "country" : "USA",
      "albums_count" : 0,
      "created_date" : "Sun, 14 Jan 2018 22:40:06 +0200",
      "updated_date" : "Sun, 14 Jan 2018 22:40:07 +0200",
      "_links" : {
        "self" : {
          "href" : "http://127.0.0.1:35051/api/artists/1024"
        },
        "artists" : {
          "href" : "http://127.0.0.1:35051/api/artists"
        },
        "albums" : {
          "href" : "http://127.0.0.1:35051/api/artists/1024/albums"
        },
        "genre" : {
          "href" : "http://127.0.0.1:35051/api/artists/1024/genre"
        }
      }
    }, {
      "id" : 1025,
      "name" : "Motley Crue",
      "genre" : "Rock",
      "country" : "USA",
      "albums_count" : 0,
      "created_date" : "Sun, 14 Jan 2018 22:43:40 +0200",
      "updated_date" : "Sun, 14 Jan 2018 22:43:41 +0200",
      "_links" : {
        "self" : {
          "href" : "http://127.0.0.1:35051/api/artists/1025"
        },
        "artists" : {
          "href" : "http://127.0.0.1:35051/api/artists"
        },
        "albums" : {
          "href" : "http://127.0.0.1:35051/api/artists/1025/albums"
        },
        "genre" : {
          "href" : "http://127.0.0.1:35051/api/artists/1025/genre"
        }
      }
    }, {
      "id" : 1026,
      "name" : "Motley Crue",
      "genre" : "Rock",
      "country" : "USA",
      "albums_count" : 0,
      "created_date" : "Sun, 14 Jan 2018 22:45:27 +0200",
      "updated_date" : "Sun, 14 Jan 2018 22:45:28 +0200",
      "_links" : {
        "self" : {
          "href" : "http://127.0.0.1:35051/api/artists/1026"
        },
        "artists" : {
          "href" : "http://127.0.0.1:35051/api/artists"
        },
        "albums" : {
          "href" : "http://127.0.0.1:35051/api/artists/1026/albums"
        },
        "genre" : {
          "href" : "http://127.0.0.1:35051/api/artists/1026/genre"
        }
      }
    } ]
  },
  "_links" : {
    "self" : {
      "href" : "http://127.0.0.1:35051/api/genres/1/artists/?page=0&amp;size=20"
    },
    "artists" : {
      "href" : "http://127.0.0.1:35051/api/artists"
    },
    "playlists" : {
      "href" : "http://127.0.0.1:35051/api/playlists"
    },
    "home" : {
      "href" : "http://127.0.0.1:35051/api/"
    }
  },
  "page" : {
    "size" : 20,
    "totalElements" : 16,
    "totalPages" : 1,
    "number" : 0
  }
}

01:21:15.345 DEBUG - response time in milliseconds: 270
01:21:15.348 INFO  - response:
{
  "_embedded": {
    "artistResources": [
      {
        "id": 11,
        "name": "AC\/DC",
        "genre": "Rock",
        "country": "Australia",
        "albums_count": 4,
        "created_date": "Sat, 13 Jan 2018 23:47:57 +0200",
        "updated_date": "Sat, 13 Jan 2018 23:47:57 +0200",
        "_links": {
          "self": {
            "href": "http:\/\/127.0.0.1:35051\/api\/artists\/11"
          },
          "artists": {
            "href": "http:\/\/127.0.0.1:35051\/api\/artists"
          },
          "albums": {
            "href": "http:\/\/127.0.0.1:35051\/api\/artists\/11\/albums"
          },
          "genre": {
            "href": "http:\/\/127.0.0.1:35051\/api\/artists\/11\/genre"
          }
        }
      },
      {
        "id": 12,
        "name": "Van Halen",
        "genre": "Rock",
        "country": "USA",
        "albums_count": 4,
        "created_date": "Sat, 13 Jan 2018 23:47:57 +0200",
        "updated_date": "Sat, 13 Jan 2018 23:47:57 +0200",
        "_links": {
          "self": {
            "href": "http:\/\/127.0.0.1:35051\/api\/artists\/12"
          },
          "artists": {
            "href": "http:\/\/127.0.0.1:35051\/api\/artists"
          },
          "albums": {
            "href": "http:\/\/127.0.0.1:35051\/api\/artists\/12\/albums"
          },
          "genre": {
            "href": "http:\/\/127.0.0.1:35051\/api\/artists\/12\/genre"
          }
        }
      },
      {
        "id": 13,
        "name": "Def Leppard",
        "genre": "Rock",
        "country": "UK",
        "albums_count": 4,
        "created_date": "Sat, 13 Jan 2018 23:47:57 +0200",
        "updated_date": "Sat, 13 Jan 2018 23:47:57 +0200",
        "_links": {
          "self": {
            "href": "http:\/\/127.0.0.1:35051\/api\/artists\/13"
          },
          "artists": {
            "href": "http:\/\/127.0.0.1:35051\/api\/artists"
          },
          "albums": {
            "href": "http:\/\/127.0.0.1:35051\/api\/artists\/13\/albums"
          },
          "genre": {
            "href": "http:\/\/127.0.0.1:35051\/api\/artists\/13\/genre"
          }
        }
      },
      {
        "id": 14,
        "name": "Kip Winger",
        "genre": "Rock",
        "country": "USA",
        "albums_count": 2,
        "created_date": "Sat, 13 Jan 2018 23:47:57 +0200",
        "updated_date": "Sat, 13 Jan 2018 23:47:57 +0200",
        "_links": {
          "self": {
            "href": "http:\/\/127.0.0.1:35051\/api\/artists\/14"
          },
          "artists": {
            "href": "http:\/\/127.0.0.1:35051\/api\/artists"
          },
          "albums": {
            "href": "http:\/\/127.0.0.1:35051\/api\/artists\/14\/albums"
          },
          "genre": {
            "href": "http:\/\/127.0.0.1:35051\/api\/artists\/14\/genre"
          }
        }
      },
      {
        "id": 15,
        "name": "Foreigner",
        "genre": "Rock",
        "country": "USA",
        "albums_count": 2,
        "created_date": "Sat, 13 Jan 2018 23:47:57 +0200",
        "updated_date": "Sat, 13 Jan 2018 23:47:57 +0200",
        "_links": {
          "self": {
            "href": "http:\/\/127.0.0.1:35051\/api\/artists\/15"
          },
          "artists": {
            "href": "http:\/\/127.0.0.1:35051\/api\/artists"
          },
          "albums": {
            "href": "http:\/\/127.0.0.1:35051\/api\/artists\/15\/albums"
          },
          "genre": {
            "href": "http:\/\/127.0.0.1:35051\/api\/artists\/15\/genre"
          }
        }
      },
      {
        "id": 16,
        "name": "Supertramp",
        "genre": "Rock",
        "country": "USA",
        "albums_count": 2,
        "created_date": "Sat, 13 Jan 2018 23:47:57 +0200",
        "updated_date": "Sat, 13 Jan 2018 23:47:57 +0200",
        "_links": {
          "self": {
            "href": "http:\/\/127.0.0.1:35051\/api\/artists\/16"
          },
          "artists": {
            "href": "http:\/\/127.0.0.1:35051\/api\/artists"
          },
          "albums": {
            "href": "http:\/\/127.0.0.1:35051\/api\/artists\/16\/albums"
          },
          "genre": {
            "href": "http:\/\/127.0.0.1:35051\/api\/artists\/16\/genre"
          }
        }
      },
      {
        "id": 17,
        "name": "Queen",
        "genre": "Rock",
        "country": "USA",
        "albums_count": 2,
        "created_date": "Sat, 13 Jan 2018 23:47:57 +0200",
        "updated_date": "Sat, 13 Jan 2018 23:47:57 +0200",
        "_links": {
          "self": {
            "href": "http:\/\/127.0.0.1:35051\/api\/artists\/17"
          },
          "artists": {
            "href": "http:\/\/127.0.0.1:35051\/api\/artists"
          },
          "albums": {
            "href": "http:\/\/127.0.0.1:35051\/api\/artists\/17\/albums"
          },
          "genre": {
            "href": "http:\/\/127.0.0.1:35051\/api\/artists\/17\/genre"
          }
        }
      },
      {
        "id": 18,
        "name": "ZZ Top",
        "genre": "Rock",
        "country": "USA",
        "albums_count": 0,
        "created_date": "Sat, 13 Jan 2018 23:47:57 +0200",
        "updated_date": "Sat, 13 Jan 2018 23:47:57 +0200",
        "_links": {
          "self": {
            "href": "http:\/\/127.0.0.1:35051\/api\/artists\/18"
          },
          "artists": {
            "href": "http:\/\/127.0.0.1:35051\/api\/artists"
          },
          "albums": {
            "href": "http:\/\/127.0.0.1:35051\/api\/artists\/18\/albums"
          },
          "genre": {
            "href": "http:\/\/127.0.0.1:35051\/api\/artists\/18\/genre"
          }
        }
      },
      {
        "id": 19,
        "name": "Kiss",
        "genre": "Rock",
        "country": "USA",
        "albums_count": 0,
        "created_date": "Sat, 13 Jan 2018 23:47:57 +0200",
        "updated_date": "Sat, 13 Jan 2018 23:47:57 +0200",
        "_links": {
          "self": {
            "href": "http:\/\/127.0.0.1:35051\/api\/artists\/19"
          },
          "artists": {
            "href": "http:\/\/127.0.0.1:35051\/api\/artists"
          },
          "albums": {
            "href": "http:\/\/127.0.0.1:35051\/api\/artists\/19\/albums"
          },
          "genre": {
            "href": "http:\/\/127.0.0.1:35051\/api\/artists\/19\/genre"
          }
        }
      },
      {
        "id": 20,
        "name": "Rush",
        "genre": "Rock",
        "country": "USA",
        "albums_count": 0,
        "created_date": "Sat, 13 Jan 2018 23:47:57 +0200",
        "updated_date": "Sat, 13 Jan 2018 23:47:57 +0200",
        "_links": {
          "self": {
            "href": "http:\/\/127.0.0.1:35051\/api\/artists\/20"
          },
          "artists": {
            "href": "http:\/\/127.0.0.1:35051\/api\/artists"
          },
          "albums": {
            "href": "http:\/\/127.0.0.1:35051\/api\/artists\/20\/albums"
          },
          "genre": {
            "href": "http:\/\/127.0.0.1:35051\/api\/artists\/20\/genre"
          }
        }
      },
      {
        "id": 1021,
        "name": "Motley Crue",
        "genre": "Rock",
        "country": "USA",
        "albums_count": 0,
        "created_date": "Sun, 14 Jan 2018 22:24:58 +0200",
        "updated_date": "Sun, 14 Jan 2018 22:24:59 +0200",
        "_links": {
          "self": {
            "href": "http:\/\/127.0.0.1:35051\/api\/artists\/1021"
          },
          "artists": {
            "href": "http:\/\/127.0.0.1:35051\/api\/artists"
          },
          "albums": {
            "href": "http:\/\/127.0.0.1:35051\/api\/artists\/1021\/albums"
          },
          "genre": {
            "href": "http:\/\/127.0.0.1:35051\/api\/artists\/1021\/genre"
          }
        }
      },
      {
        "id": 1022,
        "name": "Motley Crue",
        "genre": "Rock",
        "country": "USA",
        "albums_count": 0,
        "created_date": "Sun, 14 Jan 2018 22:29:55 +0200",
        "updated_date": "Sun, 14 Jan 2018 22:29:56 +0200",
        "_links": {
          "self": {
            "href": "http:\/\/127.0.0.1:35051\/api\/artists\/1022"
          },
          "artists": {
            "href": "http:\/\/127.0.0.1:35051\/api\/artists"
          },
          "albums": {
            "href": "http:\/\/127.0.0.1:35051\/api\/artists\/1022\/albums"
          },
          "genre": {
            "href": "http:\/\/127.0.0.1:35051\/api\/artists\/1022\/genre"
          }
        }
      },
      {
        "id": 1023,
        "name": "Motley Crue",
        "genre": "Rock",
        "country": "USA",
        "albums_count": 0,
        "created_date": "Sun, 14 Jan 2018 22:36:08 +0200",
        "updated_date": "Sun, 14 Jan 2018 22:36:09 +0200",
        "_links": {
          "self": {
            "href": "http:\/\/127.0.0.1:35051\/api\/artists\/1023"
          },
          "artists": {
            "href": "http:\/\/127.0.0.1:35051\/api\/artists"
          },
          "albums": {
            "href": "http:\/\/127.0.0.1:35051\/api\/artists\/1023\/albums"
          },
          "genre": {
            "href": "http:\/\/127.0.0.1:35051\/api\/artists\/1023\/genre"
          }
        }
      },
      {
        "id": 1024,
        "name": "Motley Crue",
        "genre": "Rock",
        "country": "USA",
        "albums_count": 0,
        "created_date": "Sun, 14 Jan 2018 22:40:06 +0200",
        "updated_date": "Sun, 14 Jan 2018 22:40:07 +0200",
        "_links": {
          "self": {
            "href": "http:\/\/127.0.0.1:35051\/api\/artists\/1024"
          },
          "artists": {
            "href": "http:\/\/127.0.0.1:35051\/api\/artists"
          },
          "albums": {
            "href": "http:\/\/127.0.0.1:35051\/api\/artists\/1024\/albums"
          },
          "genre": {
            "href": "http:\/\/127.0.0.1:35051\/api\/artists\/1024\/genre"
          }
        }
      },
      {
        "id": 1025,
        "name": "Motley Crue",
        "genre": "Rock",
        "country": "USA",
        "albums_count": 0,
        "created_date": "Sun, 14 Jan 2018 22:43:40 +0200",
        "updated_date": "Sun, 14 Jan 2018 22:43:41 +0200",
        "_links": {
          "self": {
            "href": "http:\/\/127.0.0.1:35051\/api\/artists\/1025"
          },
          "artists": {
            "href": "http:\/\/127.0.0.1:35051\/api\/artists"
          },
          "albums": {
            "href": "http:\/\/127.0.0.1:35051\/api\/artists\/1025\/albums"
          },
          "genre": {
            "href": "http:\/\/127.0.0.1:35051\/api\/artists\/1025\/genre"
          }
        }
      },
      {
        "id": 1026,
        "name": "Motley Crue",
        "genre": "Rock",
        "country": "USA",
        "albums_count": 0,
        "created_date": "Sun, 14 Jan 2018 22:45:27 +0200",
        "updated_date": "Sun, 14 Jan 2018 22:45:28 +0200",
        "_links": {
          "self": {
            "href": "http:\/\/127.0.0.1:35051\/api\/artists\/1026"
          },
          "artists": {
            "href": "http:\/\/127.0.0.1:35051\/api\/artists"
          },
          "albums": {
            "href": "http:\/\/127.0.0.1:35051\/api\/artists\/1026\/albums"
          },
          "genre": {
            "href": "http:\/\/127.0.0.1:35051\/api\/artists\/1026\/genre"
          }
        }
      }
    ]
  },
  "_links": {
    "self": {
      "href": "http:\/\/127.0.0.1:35051\/api\/genres\/1\/artists\/?page=0&amp;size=20"
    },
    "artists": {
      "href": "http:\/\/127.0.0.1:35051\/api\/artists"
    },
    "playlists": {
      "href": "http:\/\/127.0.0.1:35051\/api\/playlists"
    },
    "home": {
      "href": "http:\/\/127.0.0.1:35051\/api\/"
    }
  },
  "page": {
    "size": 20,
    "totalElements": 16,
    "totalPages": 1,
    "number": 0
  }
}

</pre>
<div class="step-row">
<div class="step-cell">Then status 200</div>
<div class="time-cell">0.000136</div>
</div>
<div class="step-row">
<div class="step-cell">And match response._embedded.artistResources == '#[] artistStructure'</div>
<div class="time-cell">0.013442</div>
</div>
<div class="step-row">
<div class="step-cell">And match response._links == linksStructure</div>
<div class="time-cell">0.000425</div>
</div>
<div class="step-row">
<div class="step-cell">And match response.page == pageStructure</div>
<div class="time-cell">0.000321</div>
</div>
</div>
</div>
</div>
</body>
</html>

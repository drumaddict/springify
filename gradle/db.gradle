// Migration tasks, properties are environment dependent.
task migrate {
  // supports only one profile.
  doLast {
    println "Executing $propertyDrivenProfile migrate task actions for ${project.ext.appProps.getProperty('liquibase.change-log')} changelog file."
      liquibase {
        activities {
          main {
              changeLogFile    "$projectDir" + project.ext.appProps.getProperty("liquibase.change-log")
              url            project.ext.appProps.getProperty("spring.datasource.url")
              username       project.ext.appProps.getProperty("spring.datasource.username")
              password       project.ext.appProps.getProperty("spring.datasource.password")
              referenceUrl    'hibernate:spring:com.kabasakalis.springifyapi.domain?dialect=org.hibernate.dialect.PostgreSQLDialect'
              driver        'org.postgresql.Driver'
              referenceDriver  'org.postgresql.Driver'
              classpath    project.ext.appProps.getProperty("liquibase.classpath")

          }
        }
      }
  }
}
